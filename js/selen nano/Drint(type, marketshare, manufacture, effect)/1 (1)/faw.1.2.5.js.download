function _typeof(e){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){t=_toPropertyKey(t);if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return _typeof(t)==="symbol"?t:String(t)}function _toPrimitive(e,t){if(_typeof(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if(_typeof(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}(function(){function e(){var u,e=this.config,a=e.buried_point.module_tag,o=e.buried_point.item_click_tag,i=e.buried_point.custom_property_parse[o],l=e.buried_point.faw_id;function s(e,t){u=null;var n={},r=faw.parentNodeWithAttr(e,o);e&&r&&1===e.nodeType&&((u=r.getAttribute(l))&&faw.proxy.list[u+"_click"]||(u||(u=faw.generateID(),r.setAttribute(l,u)),e=faw.parentNodeWithAttr(e,a),n=faw.assign(n,c,{target:r,moduleDom:e,moduleData:faw.assign({faw_id:u},t)}),e&&(n.moduleName=e.getAttribute(a)),faw.proxy.on(u+"_click",i,n)),faw.proxy.fire(u+"_click",{moduleData:t||{}}))}i?(faw.addEventListener("click",document,function(e){var t=faw.parentWrap(e.target,"a");if(s(e.target),t){var e=faw.pageStorage(),n="",r="",a="";try{var n=e.pgcnt.pv_id,r=faw.generateID(),o=new URLSearchParams(window.location.search),i=document.getElementById("user_behavior_trace_id"),a=o.get("bv_id")||i&&i.value||""}catch(e){}faw.storeReferrer(),faw.clearLastLocalStorage("form");e={pv_id:n,faw_id:u,bv_id:r},o=(a&&(e.pbv_id=a),faw.linkAddParams(t.href,e));o&&(t.href=o)}}),faw.debug("plugin init","click init complete."),faw.manual.click=function(e,t){var n=t;faw.isObject(t)||(faw.debug("plugin error","manual click event customData format Error."),n=null),s(e,n)}):faw.debug("plugin error","custom attr"+o+" clickHandler not defined")}function t(){var t,e,u,n=this.config,i=n.buried_point.module_tag,l=n.buried_point.exposure_sub_tag,s=n.buried_point.exposure_tag,c=n.buried_point.custom_property_parse[s],f=n.buried_point.faw_id,d={},p={},m=0;function g(e,t,n){var r,a,o;e&&(r=e.getAttribute(f)),(e&&null===r&&null!==e.offsetParent||null!==r&&!d[r]&&!p[r])&&(o={},null===r&&(r=faw.generateID(),e.setAttribute(f,r)),a=faw.parentNodeWithAttr(e,i),o=faw.assign(o,b,{target:e,moduleDom:a,moduleData:faw.assign({faw_id:r},t)}),a&&(o.moduleName=a.getAttribute(i)),n?(o.parentDom=n,o.listWrap=n,p[r]=o):d[r]=o,faw.proxy.on(r+"_exposure",c,o))}function a(e){var t=(e||document).querySelectorAll("["+s+"]");m=t.length;for(var n=0;n<t.length;n++){var r,a=(r=t[n]).getAttribute(f);if((null===a||null!==a&&!d[a]&&!p[a])&&null!==r.offsetParent){var o=r.querySelectorAll("["+l+"]");if(0<o.length)for(var i=0;i<o.length;i++)g(o[i],null,r);else g(r)}}}function o(e){var t,n,r;for(n in d)(null===(r=(t=d[n]).lvt)||r&&5e3<(new Date).getTime()-r)&&((r=t).listWrap=e,_(r))}function _(e,t,n,r){var a=e.target,o=e.moduleData.faw_id,i=e.listWrap||document;u(i,a)&&(e&&!e.inView?(r?w(document,e.parentDom)&&!e.inView&&(e.inView=w(e.parentDom,a)):e.inView=w(i,a),d[o]&&(d[o].inView=e.inView),(e.inView||n)&&(e.lvt=(new Date).getTime(),t&&(e.moduleData=faw.assign({},e.moduleData,t)),o)&&faw.proxy.fire(o+"_exposure",e)):(e.inView=w(i,a),d[o]&&(d[o].inView=e.inView),e&&n&&(e.lvt=(new Date).getTime(),t&&(e.moduleData=faw.assign({},e.moduleData,t)),faw.proxy.fire(o+"_exposure",e))))}function r(t){var n=null,r=null;faw.addEventListener("scroll",t||window,function(e){n||(n=setTimeout(function(){clearTimeout(n),n=null,o(t)},200),null===r&&(r=setTimeout(function(){a(t),r=null},500)))})}function w(e,t){var n=!1,r={top:0,left:0,height:0,width:0};try{if(1===e.nodeType&&(a=e.getBoundingClientRect(),r.top=a.top,r.left=a.left,r.width=a.width,r.height=a.height),9===e.nodeType&&(r.height=window.innerHeight,r.width=window.innerWidth),!t||1!==t.nodeType||!u(e,t))return n;var a,o=(a=t.getBoundingClientRect()).top-r.top,i=a.left-r.left;(o<0&&a.height/2>=Math.abs(o)||i<0&&a.width/2>=Math.abs(i)||0<=o&&a.height/2+o<=r.height&&0<=i&&a.width/2+i<=r.width)&&(n=!0)}catch(e){}return n}c?(t=null,r(),faw.exposureInit=function(e){a(e),o(),null===t&&(t=setInterval(function(){var e,t,n;for(n in p)(null===(e=(t=p[n]).lvt)||e&&5e3<(new Date).getTime()-e)&&_(t,null,!1,!0)},800)),e&&r(e)},faw.debug("plugin init","exposure init complete. exposure items "+m),e=!1,setTimeout(function(){e&&(d={},p={},m=0),faw.exposureInit(),e=!0},20),u=document.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t=t&&t.parentNode;)if(t===e)return!0;return!1},faw.manual.exposure=function(e,t){var n;d[e]&&(null===(n=(e=d[e]).lvt)||n&&5e3<(new Date).getTime()-n)&&_(e,t,!0)}):faw.debug("plugin error","custom attr"+s+" exposure handle not defined")}function n(){var a,o,e=this.config,i=e.buried_point.module_tag,u=e.buried_point.form_tag,l=e.buried_point.form_trace_tag,s=e.buried_point.custom_property_parse[u],c=e.buried_point.faw_id,f={};function t(){if(o&&0<o.length){for(var e={},t=0;t<o.length;t++){var n,r=o[t];e={},(a=r.getAttribute(c))||(a=faw.generateID(),r.setAttribute(c,a),n=faw.parentNodeWithAttr(r,i),e=faw.assign(e,p,{target:r,moduleDom:n}),n&&(e.moduleName=n.getAttribute(i)),f[a]=e,faw.proxy.on(a+"_submit",s,e),r&&"custom"!==r.getAttribute(u)&&faw.addEventListener("submit",r,function(){d(this)})),a=null}faw.debug("plugin init","form init complete.")}}function d(e,t){if(e){var n,r=e.elements,a={form_action:e.action,form_name:e.name,form_method:e.method,form_url:location.href,form_async:null!=e.getAttribute("faw-form-async")};if(0<r.length)for(var o=0,i=r.length;o<i;o++)(n=r[o])&&n.name&&l&&!a[n.name]&&null!==n.getAttribute(l)&&(a["form_item_"+r[o].name]=function(e){if(e.length){for(var t=[],n=0,r=e.length;n<r;n++)e[n].checked&&t.push(e.value||"");return t}return 1===e.nodeType?(e.type,e.value):null}(r[o]));var u=e.getAttribute(c);faw.clearLastLocalStorage("elecnt"),faw.storeReferrer(),faw.proxy.fire(u+"_submit",faw.assign({},{target:e,moduleData:faw.assign({faw_id:e.getAttribute(c)},a,t)}))}}s?(o=document.querySelectorAll("form["+u+"]"),(faw.formInit=t)(),faw.manual.form=function(e,t){f[e]&&d(f[e].target,t)}):faw.debug("plugin error","custom attr"+u+" clickHandler not defined")}function r(){var a,e=this.config,o=e.buried_point.video_tag,s=e.buried_point.video_event_name,i=e.buried_point.module_tag,u=e.buried_point.custom_property_parse[o],l=e.buried_point.faw_id,c={},f=null;function t(){for(var e,t,n=document.querySelectorAll("["+o+"]"),r=0;r<n.length;r++)(null!==(t=(e=n[r]).getAttribute(l))||null===e.offsetParent)&&c[t]||(t=void 0,(e=e)&&null===e.getAttribute(l)&&null!==e.offsetParent?(a=faw.generateID(),e.setAttribute(l,a)):a=e.getAttribute(l),t=faw.assign(d,{target:e}),(e=faw.parentNodeWithAttr(e,i))&&(t.moduleName=e.getAttribute(i),t.moduleDom=e),c[a]=u(t))}faw.proxy.on("videoplay",function(e,t,n){var r,a,o,i,u,l=c[e];l&&(r=s||"videoplay",l.faw_id=e,l.current_time=Math.floor(1e3*t.currentTime),l.target=t.target,l.record_id=faw.generateID(),l.play_status=t.type,l.duration=1e3*t.duration,l.play_id||(l.play_id=faw.generateID()),l.play_time&&-1==="play,playing,seeked".indexOf(t.type)||(l.play_time=(new Date).getTime()),"ended"===t.type&&(l.play_time=l._pt),a=t.type,o=r,i=n,(u=c[e])&&null!==(f=null===f&&u.play_id&&"play"===u.type?setInterval(function(){u.target&&null===u.target.offsetParent&&(f&&clearInterval(f),f=null),u.current_time=u.current_time+5e3,faw.trace(o,{moduleData:faw.assign({},u,{play_status:"sustained",play_time:(new Date).getTime()-u.play_time,current_time:u.target?Math.floor(1e3*u.target.currentTime):u.current_time})},i),u.play_time=(new Date).getTime()},5e3):f)&&-1!=="ended,pause,error".indexOf(a)&&(clearInterval(f),f=null),"pause"===l.type&&"play"===t.type?l.type=t.type:(l.type=t.type,faw.trace(r,{moduleData:faw.assign({},l,{play_time:(new Date).getTime()-l.play_time})},n),"pause"===t.type&&(l._pt=l.play_time,l.play_time=(new Date).getTime()),"ended"===t.type&&(l.play_id=null,l.play_time=null)))});var n=null;faw.addEventListener("scroll",window,function(){null===n&&(n=setTimeout(function(){t(),n=null},1e3))}),t(),faw.videoWatcherInit=t,faw.debug("plugin init","video init complete.")}function a(){var m=this.config;var e=m.buried_point.resource_tag;var g=m.buried_point.resource_event_name,n=m.buried_point.resource_type,_=m.buried_point.custom_property_parse[e],w=m.buried_point.faw_id,r=/^(https?:\/\/)?image\.made-in-china\.com/,b=new Map,a=new IntersectionObserver(function(e){e.forEach(function(e){var t,n,r;e.isIntersecting&&.5<=e.intersectionRatio&&(e=e.target,t=performance.now(),r=e.getBoundingClientRect(),n=window.scrollY+r.top,r=window.scrollX+r.left,v(b,e.src,{element:e,expo_time:t,position_top:n,position_left:r}),i(e.src),a.unobserve(e))})},{threshold:.5});function o(e){(e?[e]:document.querySelectorAll("img")).forEach(function(e){!e.dataset.faw_img&&r.test(e.src)&&(a.observe(e),e.dataset.faw_img=!0,e.complete&&0!==e.naturalWidth?(v(b,e.src,{load_status:0}),i(e.src)):faw.addEventListener("load",e,function(){requestAnimationFrame(function(){v(b,e.src,{load_status:1}),i(e.src)})}))})}function i(d){if(d&&b.has(d)){var p=b.get(d);requestAnimationFrame(function(){if(p.element&&p.entry&&0<=(p===null||p===void 0?void 0:p.load_status)&&!p.report_status){var e=p.element,t=p.position_top,n=p.position_left,r=p.entry,a=(v(b,d,{report_status:2}),faw.getProperties());var o=-1,i=0;if(faw.isArray(r.serverTiming))for(var u=0;u<r.serverTiming.length;u++){var l=r.serverTiming[u];if("app"===l.name){o=l.duration,i=1;break}}var s={resource_tp:"pic",resource_name:r.name,resource_size:y(r.decodedBodySize),resource_size_zip:y(r.encodedBodySize),position_top:parseInt(t),position_left:parseInt(n),cache_flag:r.transferSize&&r.encodedBodySize?0:1,server_time:o,origin:i,resource_duration_tms:h(r.duration),resource_loaded_tms:h(r.responseEnd)};0<p.load_status?(expo_time=h(p.expo_time),s.resource_expo_time=expo_time,s.resource_expo_loaded_tms=Math.max(h(r.responseEnd-p.expo_time),0)):s.resource_expo_loaded_tms=-1;t=faw.parentNodeWithAttr(e,m.buried_point.module_tag),n=(t&&(s.module_name=t.getAttribute(m.buried_point.module_tag)),faw.parentNodeWithAttr(e,m.buried_point.custom_property_attr));if(n){t=_(n);var c=n.getAttribute(w);c||(c=faw.generateID(),n.setAttribute(w,c)),s=faw.assign(s,t,{faw_id:c})}else{var f=e.getAttribute(w);f||(f=faw.generateID(),e.setAttribute(w,f)),s.faw_id=f}faw.trace(g,{},faw.assign({},a,s)),v(b,d,{report_status:1})}})}}function t(){o();var t=new MutationObserver(function(e){e.forEach(function(e){"attributes"===e.type&&"src"===e.attributeName&&(e=e.target,r.test(e.src))&&(delete e.dataset.faw_img,o(e))})});document.querySelectorAll("img").forEach(function(e){return t.observe(e,{attributes:!0,attributeFilter:["src"]})}),new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&0<e.addedNodes.length&&e.addedNodes.forEach(function(e){"IMG"===e.nodeName&&(t.observe(e,{attributes:!0,attributeFilter:["src"]}),r.test(e.src))&&o(e),1===e.nodeType&&e.querySelectorAll("img").forEach(function(e){t.observe(e,{attributes:!0,attributeFilter:["src"]}),r.test(e.src)&&o(e)})})})}).observe(document.body,{childList:!0,subtree:!0}),new PerformanceObserver(function(e){e.getEntries().forEach(function(e){var t;-1<n.indexOf(e.initiatorType)&&(t=e.name,r.test(t))&&(v(b,e.name,{entry:e}),i(e.name))})}).observe({type:"resource",buffered:!0})}function y(e){return e<0?0:+(e/1024).toFixed(2)}function h(e){return+e.toFixed(2)}function v(e,t,n){var r;e.has(t)?(r=e.get(t),faw.assign(r,n),e.set(t,r)):(r=_objectSpread({},n),e.set(t,r))}t(),faw.resourceWatcherInit=t,faw.debug("plugin init","resource init complete.")}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=function(){var l,t="__IS_OBSERVABLE__",s="__IS_ONCE_EVENT__",c=[].slice;try{Object.defineProperty({},"t",{value:1,writable:!1,enumerable:!1,configurable:!1}),l=function e(t,n,r){Object.defineProperty(t,n,{value:r,writable:!1,enumerable:!1,configurable:!1})}}catch(e){l=function e(t,n,r){t[n]=r}}function f(e,t){e.replace(/([^\s\,]+)/g,t)}return function(e){var a,o,i,r,u;return(e=e||{})[t]||(l(e,t,!0),a={},o={},i=function e(t){return a[t]=a[t]||[]},r=function e(t,n,r){"function"==typeof n&&(l(n,s,!!r),f(t,function(e){i(e).push(n)}))},u=function e(t,n){for(var r=0;r<t.length;r++){var a=t[r];a.apply(this,n),a[s]&&t.splice(r--,1)}},l(e,"on",function(e,t,n){return o[e]=n,r(e,t),this}),l(e,"once",function(e,t,n){return o[e]=n,r(e,t,!0),this}),l(e,"off",function(e,r){return"string"==typeof e?f(e,"function"==typeof r?function(e){for(var t=i(e),n=0;n<t.length;n++)t[n]===r&&t.splice(n--,1)}:function(e){delete a[e],delete o[e]}):a={},this}),l(e,"fire",function(e){var t=this,n=c.call(arguments,1);if(o&&faw.isObject(o[e])&&(n=[faw.assign.apply(this,[o[e]].concat(n))]),"string"==typeof e)f(e,function(e){e=i(e);u.call(t,e,n)});else for(var r in a)a.hasOwnProperty(r)&&(r=a[r],u.call(t,r,n));return this}),e.list=a),e}}.call(o),i={debug:!1,domain_reg:"",domain_storage:{key:"trackLocalData",cross:!1,client_url:null},buried_point:{faw_id:"faw-id",module_tag:"faw-module",item_click_tag:"faw-click",form_tag:"faw-form",form_trace_tag:"faw-form-trace",exposure_tag:"faw-exposure",exposure_sub_tag:"faw-exposure-sub",video_tag:"faw-video",video_event_name:null,resource_tag:"faw-resource",resource_event_name:"",resource_type:"",page_preset:null,custom_property_attr:"faw-data",custom_property_parse:{"faw-exposure":null,"faw-click":null,"faw-form":null,"faw-video":null,"faw-resource":null}},sdk:{probe:{async:!1,load:!0,sdk:"//discovery.micstatic.com/mic.probe.js",options:{name:""},onReady:function e(t,n,r){var a;window.Probe&&((a=new Probe(t)).start(r.global),window[t.name||"probeIns"]=a)},init:function e(){}},sensors:{async:!0,load:!0,sdk:"//www.micstatic.com/common/js/libs/sensors/sfaw_1.22.7.js",options:{name:"sensors",show_log:!1,heatmap_url:"//www.micstatic.com/common/js/libs/sensors/sheat_1.22.7.js",server_url:"https://fa.micstatic.com/sc/sa?project=MICEN",send_type:"beacon",encrypt_cookie:!0,heatmap:{scroll_notice_map:"default"},max_referrer_string_length:500},onReady:function e(t,n,r){var i,u,l;window.sensorsDataAnalytic201505&&(i=window.sensors=window.sensorsDataAnalytic201505,u=i._,l=n.buried_point.item_click_tag,i.heatmap.initHeatmap=function(){var o=this;return!(!u.isObject(i.para.heatmap)||"default"!==i.para.heatmap.clickmap)&&!(u.isFunction(i.para.heatmap.collect_url)&&!i.para.heatmap.collect_url())&&("all"===i.para.heatmap.collect_elements?i.para.heatmap.collect_elements="all":i.para.heatmap.collect_elements="interact",void("all"===i.para.heatmap.collect_elements?u.addEvent(document,"click",function(e){var t,n,r,e=e||window.event;return!!e&&(t=e.target||e.srcElement,null==faw.parentNodeWithAttr(t,l))&&"object"==_typeof(t)&&"string"==typeof t.tagName&&"body"!==(n=t.tagName.toLowerCase())&&"html"!==n&&!!(t&&t.parentNode&&t.parentNode.children)&&void("a"===(r=t.parentNode.tagName.toLowerCase())||"button"===r?o.start(e,t.parentNode,r):o.start(e,t,n))}):u.addEvent(document,"click",function(e){var t,n,r,a=e||window.event;return!!a&&(r=a.target||a.srcElement,null==faw.parentNodeWithAttr(r,l))&&"object"==_typeof(r)&&"string"==typeof r.tagName&&"body"!==(t=r.tagName.toLowerCase()).toLowerCase()&&"html"!==t.toLowerCase()&&!!(r&&r.parentNode&&r.parentNode.children)&&(n=r.parentNode,void("a"===t||"button"===t||"input"===t||"textarea"===t||"uni-button"===t||u.hasAttribute(r,"data-sensors-click")?o.start(a,r,t):"button"===n.tagName.toLowerCase()||"a"===n.tagName.toLowerCase()?o.start(a,n,r.parentNode.tagName.toLowerCase()):"area"===t&&"map"===n.tagName.toLowerCase()&&u.ry(n).prev().tagName&&"img"===u.ry(n).prev().tagName.toLowerCase()?o.start(a,u.ry(n).prev(),u.ry(n).prev().tagName.toLowerCase()):(r=o.hasElement(e))&&o.start(a,r,r.tagName.toLowerCase())))})))},i.para=t,i.trackFAW=function(e,t,n){var r,a={};faw.isObject(n)||faw.debug("traceFAW Error","customData is not object "+n+" eventName:"+e+" moduleItem:"+JSON.stringify(t)),faw.isObject(t.moduleData)&&(a=faw.assign(a,t.moduleData)),"trackAllHeatMap"===e?(r=t.target,t=t.event,i.quick("trackAllHeatMap",r,faw.assign(a,n)),t&&"a"===r.nodeName.toLowerCase()&&"_blank"!==r.getAttribute("target")&&(t.preventDefault(),t.stopPropagation(),setTimeout(function(){location.href=r.href},500))):i.track(e,faw.assign(a,n))},i.init(),sensors.registerPage(r.global))},init:function e(t,n){window.self!==window.top&&!document.getElementById("is_track_iframe_page")||sensors.quick("autoTrack",n.page);var r=window.faw;r&&r.lastLocalStorage(function(e){e&&e.form&&e.form.moduleData&&(sensors.trackFAW("formAction",e.form,{}),e.form=null,r.localStorage().setItem(r.config.domain_storage.key,JSON.stringify(e)))})}},ga:{async:!0,load:!1,sdk:function e(){var t=window,n="dataLayer";t[n]=t[n]||[],t[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});return"https://www.googletagmanager.com/gtm.js?id=GTM-T39J99"},onReady:function e(t,n,r){},init:function e(){}}}},c={moduleName:"",moduleDom:null,target:null,moduleData:{}},b={moduleName:"",lvt:null,inView:!1,subModuleItems:null,moduleDom:null,parentDom:null,moduleData:null,listWrap:null},p={target:null,moduleData:null,moduleName:null,moduleDom:null},d={moduleName:"",moduleDom:null,target:null};function u(e){this.hubUrl=e,this.id=0,this._requests={},this._q=[],this._ready=!1;var t=this;return this._createIframe(this.hubUrl,function(e){t._iframeWin=e.contentWindow,t._initListener(),t._ready=!0,t._q&&0<t._q.length&&(t._q.forEach(function(e){e.method&&t[e.method].apply(t,e.args)}),t._q.length=0,t._q=null)}),this}u.prototype={getItem:function e(t,n){this._ready?this._requestFn("getItem",{key:t,callback:n}):this._q.push({method:"getItem",args:arguments})},setItem:function e(t,n,r){this._ready?this._requestFn("setItem",{key:t,value:n,callback:r}):this._q.push({method:"setItem",args:arguments})},removeItem:function e(t){this._ready?this._requestFn("removeItem",{key:t}):this._q.push({method:"removeItem",args:arguments})},_requestFn:function e(t,n){t={id:this.id++,method:t,key:n.key,value:n.value};this._requests[t.id]=n.callback,this._iframeWin.postMessage(t,"*")},_initListener:function e(){var n=this;window.addEventListener("message",function(e){var t;e&&e.data&&"faw_store"===e.data._tag&&(t=e.data.id,e=e.data.result,t=n._requests[t])&&t(e)})},_createIframe:function e(t,n){var r=document.createElement("iframe");r.src=t,r.style.cssText="display: none;",r.attachEvent?r.attachEvent("onload",function(){n&&n(r)}):r.onload=function(){n&&n(r)},window.document.body.appendChild(r)}};var l,m=u,s=window,f=document,g=s.faw||{},_=i,w=e,y=t,h=n,v=r,k=a,i=function r(e){var a=this,t=a.defineProperty,o=a.config,i=o.domain_storage.key,n="faw_debug",r={pgcnt:{},elecnt:{},form:{},referrer:""},u=null,l=a.assign({},r),s=window,c=document;var f=null;function d(e,t){try{void 0!==l[e]&&(a.isObject(l[e])&&"elecnt"!==e?l[e]=a.assign(l[e],t):l[e]=t)}catch(t){e=t;if(o.debug)throw new Error(e)}a.localStorage().setItem(i,JSON.stringify(l))}t(a,"localStorage",function(){return f=f||(f=o.domain_storage.cross&&o.domain_storage.client_url?new m(o.domain_storage.client_url):{getItem:function e(t,n){n&&n(s.localStorage.getItem(t))},setItem:function e(t,n,r){s.localStorage.setItem(t,n),r&&r()},removeItem:function e(t){s.localStorage.removeItem(t)}},navigator.cookieEnabled)?f:{getItem:function e(t,n){n&&n(decodeURIComponent(a.getCookie(t)))},setItem:function e(t,n,r){a.setCookie(t,n),r&&r()},removeItem:function e(t){}}}),t(a,"pageStorage",function(e){return e&&d("pgcnt",e),l}),t(a,"elStorage",function(e){return d("elecnt",e),l}),t(a,"formStorage",function(e){return d("form",e),l}),t(a,"referrer",function(){if(function(){var e=!1;var t,n=c.referrer;var r=null;return u&&(r=u.referrer),n&&r?((t=c.createElement("a")).href=r,t.host===c.location.host&&(e=!0)):null===n.match(o.domain_reg)&&(e=!0),e}())return c.referrer;if(u){var e=c.createElement("a");if(e.href=u.referrer,e.host!==c.location.host)return u.referrer}}),t(a,"storeReferrer",function(){d("referrer",location.href)}),t(a,"enableDebug",function(){s.localStorage.setItem(n,"true")}),t(a,"debugStatus",function(e){"localhost"===document.domain?e&&e("true"):navigator.cookieEnabled?e&&e(s.localStorage.getItem(n)):e&&e(!1)}),t(a,"lastLocalStorage",function(n){u?n&&n(u):a.localStorage().getItem(i,function(e){var t=a.assign({},r);e&&(t=JSON.parse(e),u=JSON.parse(e))&&(l.referrer=u.referrer),n&&n(t)})}),t(a,"clearLastLocalStorage",function(e){l[e]&&(l[e]={}),a.localStorage().setItem(i,JSON.stringify(l))}),e&&e()},A={},S={},D=_.debug;if(!g.isload){try{l=function e(t,n,r){Object.defineProperty(t,n,{value:r,writable:!1,enumerable:!1,configurable:!1})}}catch(e){l=function e(t,n,r){t[n]=r}}g.config=_,(g.defineProperty=l)(g,"proxy",new o),l(g,"loader",function(e,t){var n=f.getElementsByTagName("script")[0],r=f.createElement("script");e&&(r.async=!0,r.src=e+(-1===e.indexOf("?")?"?":"&")+"r="+g.version,n.parentNode.insertBefore(r,n),r.onload=r.onreadystatechange=function(){r.readyState&&!/loaded|complete/.test(r.readyState)||(r.onload=r.onreadystatechange=null,t&&t())})}),l(g,"generateID",function(){return(new Date).getTime().toString(32)+(1+65536*Math.random()|0).toString(16).substring(1)}),l(g,"isFunction",function(e){return"function"==typeof e||"[object Function]"===(e=Object.prototype.toString.call(e))||"[object GeneratorFunction]"===e}),l(g,"isObject",function(e){return"[object Object]"===Object.prototype.toString.call(e)}),l(g,"isArray",function(e){return"[object Array]"===Object.prototype.toString.call(e)}),l(g,"assign",function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n,r,a=Object(e),o=1;o<arguments.length;o++){var i=arguments[o];if(null!=i)for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(g.isObject(i[u])?(a[u]||(a[u]={}),g.assign(a[u],i[u])):("init"===u||"onReady"===u)&&g.isFunction(a[u])&&g.isFunction(i[u])?(n=a[u],r=i[u],a[u]=function(){n.apply(this,[].slice.call(arguments)),r.apply(this,[].slice.call(arguments))}):a[u]=i[u])}return a}),l(g,"parentNodeWithAttr",function(e,t){var n=null;if(e&&"object"==_typeof(e)&&1===e.nodeType)for(var r=e;r&&1===r.nodeType;)r=null!==r.getAttribute(t)?(n=r,null):r.parentNode;return n}),l(g,"parentWrap",function(e,t){var n=null;if(e&&"object"==_typeof(e)&&1===e.nodeType)for(var r=e;r&&1===r.nodeType;)r=r.nodeName.toLowerCase()===t.toLowerCase()?(n=r,null):r.parentNode;return n}),l(g,"addEventListener",s.addEventListener?function(e,t,n){t.addEventListener(e,n,!1)}:s.attachEvent?function(e,t,n){t.attachEvent("on"+e,function(){n&&n()})}:void 0),l(g,"manual",{click:function e(t,n){},exposure:function e(t,n){},exposureInit:function e(){},form:function e(t,n){}}),l(g,"setConfig",function(e){g.isObject(e)&&g.assign(_,e)}),l(g,"setProperties",function(e){e&&g.isObject(e)&&g.assign(S,e)}),l(g,"getProperties",function(){return S}),l(g,"getCookie",function(e){return RegExp("(?:^|;)\\s*"+e+"=([^;]*)").test(document.cookie)?RegExp.$1:null}),l(g,"setCookie",function(e,t){f.cookie=e+"="+encodeURIComponent(t)+";path=/;domain="+(s.location.hostname.match(/[-\w]+\.[-\w]+$/)?s.location.hostname.match(/[-\w]+\.[-\w]+$/)[0]:"")}),l(g,"linkAddParams",function(t,e){var n={originalLink:t,updatedLink:"",params:[]};if(!t||["javascript:","blob:","//pic.made-in-china.com"].some(function(e){return-1!==t.indexOf(e)}))return null;var r="",a=t.indexOf("#"),a=(-1!==a&&(r=t.substring(a),t=t.substring(0,a)),t.indexOf("?")),o="";if((o=-1!==a?(o=t.substring(a+1)).replace(/&$/,""):o).split("&").forEach(function(e){var e=e.split("="),t=e[0];""!==t&&n.params.push({key:t,value:e[1]||""})}),e&&"object"==_typeof(e))for(var i in e)if(e.hasOwnProperty(i)){for(var u=-1,l=0;l<n.params.length;l++)if(n.params[l].key===i){u=l;break}-1!==u?n.params[u].value=e[i]:n.params.push({key:i,value:e[i]})}a=n.params.map(function(e){return e.key+"="+e.value}).join("&");return n.updatedLink=t.split("?")[0]+(a?"?"+a:"")+r,n.updatedLink}),l(g,"debug",function(e,t){var n;D&&s.console&&t&&(n="color: green",-1!==e.toLowerCase().indexOf("error")&&(n="color: red"),console.log("[FAW "+e+"]: %c"+t,n))}),i.call(g),g.debugStatus(function(e){D="true"===e}),g.onload=function(){};var I="faw_async_initialize",N=[],O=[],E=[];g.proxy.on(I,function(){if(O.length+E.length===N.length){g.debug("init","faw library init complete."),g.proxy.off(I),g.debug("init","trigger onload callback event"),g.onload&&g.onload();var e,t=_.sdk,n=null,o=[];for(e in t)n=t[e],g.isObject(n.options)&&n.options.name&&o.push(n.options.name);for(e in g.trace=function(e,t,n){for(var r,a=0;a<o.length;a++)s[r=o[a]]&&g.isFunction(s[r].trackFAW)&&s[r].trackFAW.apply(this,arguments)},g.storeReferrer(),g.clearLastLocalStorage(),t)n=t[e],g.isFunction(n.init)&&n.init(_,{global:S,page:A});g.debug("start load plugins","initialize plugins event."),_.buried_point.item_click_tag&&w.call(g),_.buried_point.exposure_tag&&y.call(g),_.buried_point.form_tag&&h.call(g),_.buried_point.video_tag&&v.call(g),_.buried_point.resource_tag&&_.buried_point.resource_event_name&&_.buried_point.resource_type&&k.call(g)}}),g.init=function(){if(!g.isload){g.isload=!0,g.debug("init","start init faw library.");var e,t,n=_.sdk||{};for(t in n)(e=n[t]).load&&(e.async?O:E).push(e);g.debug("init","async frame count "+O.length),g.debug("init","sync frame count "+E.length);var r=_.buried_point.page_preset;r&&g.isFunction(r)&&a(r(a)),0<O.length&&("complete"===f.readyState?(g.debug("init","document had loaded, start load async frame immediately."),j(O)):g.addEventListener("load",s,function(){setTimeout(function(){g.debug("init","start load async frame"),j(O)},200)})),0<E.length&&(g.debug("init","start load sync frame"),j(E)),0===O.length&&g.onload&&g.onload()}function a(e){e&&e.global&&g.assign(S,e.global),e&&e.pageView&&g.assign(A,e.pageView)}},g._q&&(g._q.forEach(function(e){e&&e.method&&g[e.method]&&(g.isFunction(e.handle[0])?g[e.method]=e.handle[0]:g[e.method].apply(g,e.handle))}),g._q=null),s.faw||(s.faw=g)}function j(e){e&&0<e.length&&e.forEach(function(e){var t,n;(t=e)&&t.sdk&&g.isFunction(t.onReady)&&(n=t.sdk,g.isFunction(t.sdk)&&(n=t.sdk()),g.debug("frame","start load+"+n),g.loader(n,function(){t.onReady(t.options,_,{global:S,page:A}),N.push(n),g.debug("frame","loaded+"+n),g.proxy.fire(I)}))})}})();
//# sourceMappingURL=../../../../__sources__/common/js/libs/faw/faw.1.2.5_fc5c8478.js.map
