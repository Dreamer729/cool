function _typeof(e){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}!function(e,t){"object"==(typeof exports==="undefined"?"undefined":_typeof(exports))&&"object"==(typeof module==="undefined"?"undefined":_typeof(module))?module.exports=t():t()}(this,function(){function u(e){if(!e)return!1;var t=Object.prototype.toString.call(e);return"[object Function]"==t||"[object AsyncFunction]"==t}function _(){return Date.now&&u(Date.now)?Date.now():(new Date).getTime()}function f(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)}function l(){if("function"==typeof Uint32Array){var e="";if("undefined"!=typeof crypto?e=crypto:"undefined"!=typeof msCrypto&&(e=msCrypto),f(e)&&e.getRandomValues){var t=new Uint32Array(1),r=e.getRandomValues(t)[0],i=Math.pow(2,32);return r/i}}return kr(1e19)/1e19}function g(e){var t=null;try{t=JSON.parse(e)}catch(e){}return t}function R(e,t){this.lockGetPrefix=e||"lock-get-prefix",this.lockSetPrefix=t||"lock-set-prefix"}function i(e){return"function"==typeof e||!(!e||"object"!=_typeof(e))&&i(e.listener)}function e(){this._events={}}function c(t){var r=t;try{r=decodeURIComponent(t)}catch(e){r=t}return r}function K(e){e=e||"";for(var t={},r=e.substring(1),i=r.split("&"),n=0;n<i.length;n++){var a=i[n].indexOf("=");if(a!==-1){var s=i[n].substring(0,a),o=i[n].substring(a+1);s=c(s),o=c(o),t[s]=o}}return t}function v(e){return"[object String]"==Object.prototype.toString.call(e)}function h(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function M(e){var t=function e(t){this._fields={Username:4,Password:5,Port:7,Protocol:2,Host:6,Path:8,URL:0,QueryString:9,Fragment:10},this._values={},this._regex=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/,"undefined"!=typeof t&&this._parse(t)};return t.prototype.setUrl=function(e){this._parse(e)},t.prototype._initValues=function(){for(var e in this._fields)this._values[e]=""},t.prototype.addQueryString=function(e){if("object"!=_typeof(e))return!1;var t=this._values.QueryString||"";for(var r in e)t=new RegExp(r+"[^&]+").test(t)?t.replace(new RegExp(r+"[^&]+"),r+"="+e[r]):"&"===t.slice(-1)?t+r+"="+e[r]:""===t?r+"="+e[r]:t+"&"+r+"="+e[r];this._values.QueryString=t},t.prototype.getUrl=function(){var e="";return e+=this._values.Origin,e+=this._values.Port?":"+this._values.Port:"",e+=this._values.Path,e+=this._values.QueryString?"?"+this._values.QueryString:"",e+=this._values.Fragment?"#"+this._values.Fragment:""},t.prototype._parse=function(e){this._initValues();var t=this._regex.exec(e);t||$.log("URLParser::_parse -> Invalid URL");var r=e.split("#"),i=r[0],n=r.slice(1).join("#");t=this._regex.exec(i);for(var a in this._fields)"undefined"!=typeof t[this._fields[a]]&&(this._values[a]=t[this._fields[a]]);this._values.Hostname=this._values.Host.replace(/:\d+$/,""),this._values.Origin=this._values.Protocol+"://"+this._values.Hostname,this._values.Fragment=n},new t(e)}function s(e){var t={},r=function e(){var t;try{return t=new URL("http://modernizr.com/"),"http://modernizr.com/"===t.href}catch(e){return!1}};if("function"==typeof window.URL&&r())t=new URL(e),t.searchParams||(t.searchParams=function(){var r=K(t.search);return{get:function e(t){return r[t]}}}());else{v(e)||(e=String(e)),e=h(e);var i=/^https?:\/\/.+/;if(i.test(e)===!1)return void $.log("Invalid URL");var n=M(e);t.hash=n._values.Fragment,t.host=n._values.Host?n._values.Host+(n._values.Port?":"+n._values.Port:""):"",t.href=n._values.URL,t.password=n._values.Password,t.pathname=n._values.Path,t.port=n._values.Port,t.search=n._values.QueryString?"?"+n._values.QueryString:"",t.username=n._values.Username,t.hostname=n._values.Hostname,t.protocol=n._values.Protocol?n._values.Protocol+":":"",t.origin=n._values.Origin?n._values.Origin+(n._values.Port?":"+n._values.Port:""):"",t.searchParams=function(){var r=K("?"+n._values.QueryString);return{get:function e(t){return r[t]}}}()}return t}function d(e){return!(!e||1!==e.nodeType)}function W(e){return void 0===e}function y(e){return Array.isArray&&u(y)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function p(e){return new Dr(e)}function a(e,t,r,a){function c(e){return e&&(e.preventDefault=c.preventDefault,e.stopPropagation=c.stopPropagation,e._getPath=c._getPath),e}function s(a,s,o,l){var e=function e(t){if(t=t||c(window.event)){t.target=t.srcElement;var r,i,n=!0;return"function"==typeof o&&(r=o(t)),i=s.call(a,t),"beforeunload"!==l?(!1!==r&&!1!==i||(n=!1),n):void 0}};return e}c._getPath=function(){var e=this;return this.path||this.composedPath&&this.composedPath()||p(e.target).getParents()},c.preventDefault=function(){this.returnValue=!1},c.stopPropagation=function(){this.cancelBubble=!0};var i=function e(t,r,i){if(void 0===a&&"click"===r&&(a=!0),t&&t.addEventListener)t.addEventListener(r,function(e){e._getPath=c._getPath,i.call(this,e)},a);else{var e="on"+r,n=t[e];t[e]=s(t,i,n,r)}};i.apply(null,arguments)}function V(e){var t="pushState"in window.history?"popstate":"hashchange";a(window,t,e)}function q(e){if(e)return"undefined"!=typeof window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?new XMLHttpRequest:"undefined"!=typeof XDomainRequest?new XDomainRequest:null;if("undefined"!=typeof window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){$.log(e)}}}function w(e,t,r){if(null==e)return!1;if(Nr&&e.forEach===Nr)e.forEach(t,r);else if(y(e))for(var i=0,n=e.length;i<n;i++)i in e&&t.call(r,e[i],i,e);else for(var a in e)Or.call(e,a)&&t.call(r,e[a],a,e)}function S(r){return w(Array.prototype.slice.call(arguments,1),function(e){for(var t in e)Cr.call(e,t)&&void 0!==e[t]&&(r[t]=e[t])}),r}function F(e){function t(e){if(!e)return"";try{return JSON.parse(e)}catch(e){return{}}}function r(){try{i&&"object"==_typeof(i)&&i.abort&&i.abort()}catch(e){$.log(e)}n&&(clearTimeout(n),n=null,e.error&&e.error(),i.onreadystatechange=null,i.onload=null,i.onerror=null)}e.timeout=e.timeout||2e4,e.credentials="undefined"==typeof e.credentials||e.credentials;var i=q(e.cors);if(!i)return!1;e.type||(e.type=e.data?"POST":"GET"),e=S({success:function e(){},error:function e(){}},e);var n,a=e.success,s=e.error;e.success=function(e){a(e),n&&(clearTimeout(n),n=null)},e.error=function(e){s(e),n&&(clearTimeout(n),n=null)},n=setTimeout(function(){r()},e.timeout),"undefined"!=typeof XDomainRequest&&i instanceof XDomainRequest&&(i.onload=function(){e.success&&e.success(t(i.responseText)),i.onreadystatechange=null,i.onload=null,i.onerror=null},i.onerror=function(){e.error&&e.error(t(i.responseText),i.status),i.onreadystatechange=null,i.onerror=null,i.onload=null}),i.onreadystatechange=function(){try{4==i.readyState&&(i.status>=200&&i.status<300||304==i.status?e.success(t(i.responseText)):e.error(t(i.responseText),i.status),i.onreadystatechange=null,i.onload=null)}catch(e){i.onreadystatechange=null,i.onload=null}},i.open(e.type,e.url,!0);try{e.credentials&&(i.withCredentials=!0),f(e.header)&&w(e.header,function(e,t){i.setRequestHeader&&i.setRequestHeader(t,e)}),e.data&&(e.cors||i.setRequestHeader&&i.setRequestHeader("X-Requested-With","XMLHttpRequest"),"application/json"===e.contentType?i.setRequestHeader&&i.setRequestHeader("Content-type","application/json; charset=UTF-8"):i.setRequestHeader&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded"))}catch(e){$.log(e)}i.send(e.data||null)}function r(e,i){var n=[];return null==e?n:Array.prototype.map&&e.map===Array.prototype.map?e.map(i):(w(e,function(e,t,r){n.push(i(e,t,r))}),n)}function z(e){var t=[];try{t=r(atob(e).split(""),function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})}catch(e){t=[]}try{return decodeURIComponent(t.join(""))}catch(e){return t.join("")}}function X(t){var r="";try{r=btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))}catch(e){r=t}return r}function t(r,i){i=i||window;var n=!1,e=!0,a=i.document,s=a.documentElement,t=a.addEventListener,o=t?"addEventListener":"attachEvent",l=t?"removeEventListener":"detachEvent",c=t?"":"on",u=function e(t){"readystatechange"==t.type&&"complete"!=a.readyState||(("load"==t.type?i:a)[l](c+t.type,e,!1),!n&&(n=!0)&&r.call(i,t.type||t))},d=function t(){try{s.doScroll("left")}catch(e){return void setTimeout(t,50)}u("poll")};if("complete"==a.readyState)r.call(i,"lazy");else{if(!t&&s.doScroll){try{e=!i.frameElement}catch(e){$.log(e)}e&&d()}a[o](c+"DOMContentLoaded",u,!1),a[o](c+"readystatechange",u,!1),i[o](c+"load",u,!1)}}function Z(r){return w(Array.prototype.slice.call(arguments,1),function(e){for(var t in e)void 0!==e[t]&&void 0===r[t]&&(r[t]=e[t])}),r}function Y(t){var r=t;try{r=decodeURI(t)}catch(e){r=t}return r}function G(e){var t="t6KJCZa5pDdQ9khoEM3Tj70fbP2eLSyc4BrsYugARqFIw1mzlGNVXOHiWvxUn8",r=t.length-1,i={},n=0;for(n=0;n<t.length;n++)i[t.charAt(n)]=t.charAt(r-n);var a="";for(n=0;n<e.length;n++)a+=e.charAt(n)in i?i[e.charAt(n)]:e.charAt(n);return a}function Q(e){return"[object Date]"==Object.prototype.toString.call(e)}function ee(e){function t(e){return e<10?"0"+e:e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+"."+t(e.getMilliseconds())}function te(r){return w(r,function(e,t){Q(e)?r[t]=ee(e):f(e)&&(r[t]=te(e))}),r}function re(r){return w(Array.prototype.slice.call(arguments,1),function(e){for(var t in e)void 0!==e[t]&&(f(e[t])&&f(r[t])?S(r[t],e[t]):r[t]=e[t])}),r}function ie(e,t,r){var i=Object.prototype.hasOwnProperty;if(e.filter)return e.filter(t);for(var n=[],a=0;a<e.length;a++)if(i.call(e,a)){var s=e[a];t.call(r,s,a,e)&&n.push(s)}return n}function ne(t){try{return JSON.stringify(t,null,"  ")}catch(e){return JSON.stringify(t)}}function ae(e,t){function r(e){return!!e&&e}e=e||location.hostname,t=t||"domain_test";var i=r(e);if(!i)return"";var n=i.split(".");if(y(n)&&n.length>=2&&!/^(\d+\.)+\d+$/.test(i))for(var a="."+n.splice(n.length-1,1);n.length>0;)if(a="."+n.splice(n.length-1,1)+a,document.cookie=t+"=true; path=/; domain="+a,document.cookie.indexOf(t+"=true")!==-1){var s=new Date;return s.setTime(s.getTime()-1e3),document.cookie=t+"=true; expires="+s.toGMTString()+"; path=/; SameSite=Lax; domain="+a,a}return""}function se(e){function i(e,t){e=h(e);var r;if("body"===e)return document.getElementsByTagName("body")[0];if(0===e.indexOf("#"))e=e.slice(1),r=document.getElementById(e);else if(e.indexOf(":nth-of-type")>-1){var i=e.split(":nth-of-type");if(!i[0]||!i[1])return null;var n=i[0],a=i[1].match(/\(([0-9]+)\)/);if(!a||!a[1])return null;var s=Number(a[1]);if(!(d(t)&&t.children&&t.children.length>0))return null;for(var o=t.children,l=0;l<o.length;l++)if(d(o[l])){var c=o[l].tagName.toLowerCase();if(c===n&&(s--,0===s)){r=o[l];break}}if(s>0)return null}return r?r:null}function n(e){var t,r=a.shift();if(!r)return e;try{t=i(r,e)}catch(e){$.log(e)}return t&&d(t)?n(t):null}if(!v(e))return null;var a=e.split(">"),t=null;return t=n(),t&&d(t)?t:null}function oe(e,t){var r="",i="";return e.textContent?r=h(e.textContent):e.innerText&&(r=h(e.innerText)),r&&(r=r.replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)),i=r||"","input"!==t&&"INPUT"!==t||(i=e.value||""),i}function b(e,t){t&&"string"==typeof t||(t="hostname解析异常");var r=null;try{r=s(e).hostname}catch(e){$.log("getHostname传入的url参数不合法！")}return r||t}function le(){try{var e=navigator.appVersion.match(/OS (\d+)[._](\d+)[._]?(\d+)?/);return e&&e[1]?Number.parseInt(e[1],10):""}catch(e){return""}}function ce(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),e=c(e);var r="[\\?&]"+t+"=([^&#]*)",i=new RegExp(r),n=i.exec(e);return null===n||n&&"string"!=typeof n[1]&&n[1].length?"":c(n[1])}function ue(e){var t={},r=e.split("?"),i=r[1]||"";return i&&(t=K("?"+i)),t}function de(){return"undefined"!=typeof window.matchMedia||"undefined"!=typeof window.msMatchMedia}function pe(){var e=screen.msOrientation||screen.mozOrientation||(screen.orientation||{}).type,t="未取到值";if(e)t=e.indexOf("landscape")>-1?"landscape":"portrait";else if(de()){var r=window.matchMedia||window.msMatchMedia;r("(orientation: landscape)").matches?t="landscape":r("(orientation: portrait)").matches&&(t="portrait")}return t}function _e(){var e,t={},r=navigator.userAgent.toLowerCase();return(e=r.match(/opera.([\d.]+)/))?t.opera=Number(e[1].split(".")[0]):(e=r.match(/msie ([\d.]+)/))?t.ie=Number(e[1].split(".")[0]):(e=r.match(/edge.([\d.]+)/))?t.edge=Number(e[1].split(".")[0]):(e=r.match(/firefox\/([\d.]+)/))?t.firefox=Number(e[1].split(".")[0]):(e=r.match(/chrome\/([\d.]+)/))?t.chrome=Number(e[1].split(".")[0]):(e=r.match(/version\/([\d.]+).*safari/))?t.safari=Number(e[1].match(/^\d*.\d*/)):(e=r.match(/trident\/([\d.]+)/))&&(t.ie=11),t}function k(e){return v(e)?(e=h(e),Y(e)):Y(location.href)}function fe(e){return v(e)?(e=h(e),Y(e)):Y(location.pathname)}function ge(e,t){return e.hasAttribute?e.hasAttribute(t):e.attributes?!(!e.attributes[t]||!e.attributes[t].specified):void 0}function he(e,t){if("string"==typeof t)return ge(e,t);if(y(t)){for(var r=!1,i=0;i<t.length;i++){var n=ge(e,t[i]);if(n){r=!0;break}}return r}}function me(e){if("string"!=typeof e)return 0;var t=0,r=null;if(0==e.length)return t;for(var i=0;i<e.length;i++)r=e.charCodeAt(i),t=(t<<5)-t+r,t&=t;return t}function ve(e){var t=9007199254740992,r=-9007199254740992,i=31,n=0;if(e.length>0)for(var a=e.split(""),s=0;s<a.length;s++){var o=a[s].charCodeAt(),l=i*n+o;if(l>t)for(n=r+n;l=i*n+o,l<r;)n=n/2+o;if(l<r)for(n=t+n;l=i*n+o,l>t;)n=n/2+o;n=i*n+o}return n}function P(e,t){var r=e.indexOf;if(r)return r.call(e,t);for(var i=0;i<e.length;i++)if(t===e[i])return i;return-1}function ye(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e}function we(e){return!(!e||!Ar.call(e,"callee"))}function Se(e){return"[object Boolean]"==Object.prototype.toString.call(e)}function D(e){if(f(e)){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}return!1}function be(e){if("string"!=typeof e)return!1;var t=/^https?:\/\/.+/;return t.test(e)!==!1||($.log("Invalid URL"),!1)}function ke(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)}function Pe(e){try{JSON.parse(e)}catch(e){return!1}return!0}function j(e){return"[object Number]"==Object.prototype.toString.call(e)&&/[\d\.]+/.test(String(e))}function De(){var e=!1;if("object"!=(typeof navigator==="undefined"?"undefined":_typeof(navigator))||"function"!=typeof navigator.sendBeacon)return e;var t=_e(),r=navigator.userAgent.toLowerCase();if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)){var i=/os [\d._]*/gi,n=r.match(i),a=(n+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,"."),s=a.split(".");"undefined"==typeof t.safari&&(t.safari=s[0]),s[0]&&s[0]<13?(t.chrome>41||t.firefox>30||t.opera>25||t.safari>12)&&(e=!0):(t.chrome>41||t.firefox>30||t.opera>25||t.safari>11.3)&&(e=!0)}else(t.chrome>38||t.edge>13||t.firefox>30||t.opera>25||t.safari>11)&&(e=!0);return e}function je(){return"undefined"!=typeof window.XMLHttpRequest&&("withCredentials"in new XMLHttpRequest||"undefined"!=typeof XDomainRequest)}function Ne(t){if(!f(t)||!v(t.callbackName))return $.log("JSONP 请求缺少 callbackName"),!1;t.success=u(t.success)?t.success:function(){},t.error=u(t.error)?t.error:function(){},t.data=t.data||"";var r=document.createElement("script"),i=document.getElementsByTagName("head")[0],n=null,a=!1;if(i.appendChild(r),j(t.timeout)&&(n=setTimeout(function(){return!a&&(t.error("timeout"),window[t.callbackName]=function(){$.log("call jsonp error")},n=null,i.removeChild(r),void(a=!0))},t.timeout)),window[t.callbackName]=function(){clearTimeout(n),n=null,t.success.apply(null,arguments),window[t.callbackName]=function(){$.log("call jsonp error")},i.removeChild(r)},t.url.indexOf("?")>-1?t.url+="&callbackName="+t.callbackName:t.url+="?callbackName="+t.callbackName,f(t.data)){var s=[];w(t.data,function(e,t){s.push(t+"="+e)}),t.data=s.join("&"),t.url+="&"+t.data}r.onerror=function(e){return!a&&(window[t.callbackName]=function(){$.log("call jsonp error")},clearTimeout(n),n=null,i.removeChild(r),t.error(e),void(a=!0))},r.src=t.url}function Oe(e){var t={visibleHandler:u(e.visible)?e.visible:function(){},hiddenHandler:u(e.hidden)?e.hidden:function(){},visibilityChange:null,hidden:null,isSupport:function e(){return"undefined"!=typeof document[this.hidden]},init:function e(){"undefined"!=typeof document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):"undefined"!=typeof document.mozHidden?(this.hidden="mozHidden",this.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),this.listen()},listen:function e(){if(this.isSupport()){var t=this;a(document,this.visibilityChange,function(){document[t.hidden]?t.hiddenHandler():t.visibleHandler()},1)}else a(window,"focus",this.visibleHandler),a(window,"blur",this.hiddenHandler)}};t.init()}function Ce(e){e=S({success:function e(){},error:function e(){},appendCall:function e(t){document.getElementsByTagName("head")[0].appendChild(t)}},e);var t=null;"css"===e.type&&(t=document.createElement("link"),t.rel="stylesheet",t.href=e.url),"js"===e.type&&(t=document.createElement("script"),t.async="async",t.setAttribute("charset","UTF-8"),t.src=e.url,t.type="text/javascript"),t.onload=t.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e.success(),t.onload=t.onreadystatechange=null)},t.onerror=function(){e.error(),t.onerror=null},e.appendCall(t)}function $e(e){if("string"!=typeof e)return"";for(var t=/^\s*javascript/i;t.test(e);)e=e.replace(t,"");return e}function Ae(e,t){e=String(e),t="number"==typeof t?t:13;for(var r=126,i=e.split(""),n=0,a=i.length;n<a;n++){var s=i[n].charCodeAt(0);s<r&&(i[n]=String.fromCharCode((i[n].charCodeAt(0)+t)%r))}return i.join("")}function Te(e){var t=13,r=126;return e=String(e),Ae(e,r-t)}function xe(r){f(r)&&w(r,function(e,t){f(e)?xe(r[t]):Q(e)&&(r[t]=ee(e))})}function Le(t){var r=document.createElement("style");r.type="text/css";try{r.appendChild(document.createTextNode(t))}catch(e){r.styleSheet.cssText=t}var e=document.getElementsByTagName("head")[0],i=document.getElementsByTagName("script")[0];e?e.children.length?e.insertBefore(r,e.children[0]):e.appendChild(r):i.parentNode.insertBefore(r,i)}function Ie(e){if("string"!=typeof e)return $.log("转换unicode错误",e),e;for(var t="",r=0;r<e.length;r++)t+="\\"+e.charCodeAt(r).toString(16);return t}function Ee(r,i,n){var a,s,o,l=null,c=0;n||(n={});var u=function e(){c=n.leading===!1?0:_(),l=null,o=r.apply(a,s),l||(a=s=null)};return function(){var e=_();c||n.leading!==!1||(c=e);var t=i-(e-c);return a=this,s=arguments,t<=0||t>i?(l&&(clearTimeout(l),l=null),c=e,o=r.apply(a,s),l||(a=s=null)):l||n.trailing===!1||(l=setTimeout(u,t)),o}}function Je(e){var t=[];return null==e?t:(w(e,function(e){t[t.length]=e}),t)}function He(e){return e?e.toArray?e.toArray():y(e)||we(e)?Array.prototype.slice.call(e):Je(e):[]}function Ue(e){for(var t,r=[],i={},n=0;n<e.length;n++)t=e[n],t in i||(i[t]=!0,r.push(t));return r}function N(){if((n.isSupport()&&"true"===sessionStorage.getItem("sensorsdata_jssdk_debug")||T.show_log)&&(!f(arguments[0])||T.show_log!==!0&&"string"!==T.show_log&&T.show_log!==!1||(arguments[0]=ne(arguments[0])),"object"==(typeof console==="undefined"?"undefined":_typeof(console))&&console.log))try{return console.log.apply(console,arguments)}catch(e){console.log(arguments[0])}}function Be(e){return 0===e.indexOf(Jr)?(e=e.substring(Jr.length),e=Te(e)):0===e.indexOf(Hr)&&(e=e.substring(Hr.length),e=G(e)),e}function Re(e){return!v(e)||0!==e.indexOf(Jr)&&0!==e.indexOf(Hr)||(e=Be(e)),e}function Ke(e){return Hr+G(e)}function Me(e){var r=e.properties,i=JSON.parse(JSON.stringify(e));f(r)&&w(r,function(e,t){if(u(e))try{r[t]=e(i),u(r[t])&&(N("您的属性- "+t+" 格式不满足要求，我们已经将其删除"),delete r[t])}catch(e){delete r[t],N("您的属性- "+t+" 抛出了异常，我们已经将其删除")}})}function We(e){if("object"==_typeof(e)&&e.$option){var t=e.$option;return delete e.$option,t}return{}}function Ve(e){var r={};return w(e,function(e,t){null!=e&&(r[t]=e)}),r}function qe(e){var t=T.current_domain;switch(_typeof(t)){case"function":var r=t();return""===r||""===h(r)?"url解析失败":r.indexOf(".")!==-1?r:"url解析失败";case"string":return""===t||""===h(t)?"url解析失败":t.indexOf(".")!==-1?t:"url解析失败";default:var i=ae(null,Kr);return""===e?"url解析失败":""===i?"url解析失败":i}}function Fe(e){if(!e.target)return!1;var t=e.target,r=t.tagName.toLowerCase(),i={};return i.$element_type=r,i.$element_name=t.getAttribute("name"),i.$element_id=t.getAttribute("id"),i.$element_class_name="string"==typeof t.className?t.className:null,i.$element_target_url=t.getAttribute("href"),i.$element_content=it(t,r),i=Ve(i),i.$url=k(),i.$url_path=fe(),i.$title=document.title,i}function ze(){var e=document.referrer,t="baidu.com";if(!e)return!1;try{var r=s(e).hostname;return r&&r.substring(r.length-t.length)===t}catch(e){return!1}}function Xe(){var e=ue(document.referrer);return D(e)||!e.eqid?Pr().replace(/-/g,""):e.eqid}function Ze(){var e=ue(document.referrer);if(D(e)||!e.eqid){var t=ue(location.href);return e.ck||t.utm_source?"baidu_sem_keyword_id":"baidu_other_keyword_id"}return"baidu_seo_keyword_id"}function Ye(e){return e=e||document.referrer,""===e||ae(b(e),Kr)!==ae(null,Kr)}function O(e,t){return e=e||document.referrer,"string"!=typeof e?"取值异常_referrer异常_"+String(e):(e=h(e),e=Y(e),0!==e.indexOf("https://www.baidu.com/")||t||(e=e.split("?")[0]),e=e.slice(0,T.max_referrer_string_length),"string"==typeof e?e:"")}function Ge(e){var t=b(e);if(!t||"hostname解析异常"===t)return"";var r={baidu:[/^.*\.baidu\.com$/],bing:[/^.*\.bing\.com$/],google:[/^www\.google\.com$/,/^www\.google\.com\.[a-z]{2}$/,/^www\.google\.[a-z]{2}$/],sm:[/^m\.sm\.cn$/],so:[/^.+\.so\.com$/],sogou:[/^.*\.sogou\.com$/],yahoo:[/^.*\.yahoo\.com$/]};for(var i in r)for(var n=r[i],a=0,s=n.length;a<s;a++)if(n[a].test(t))return i;return"未知搜索引擎"}function Qe(e,t){e=e||document.referrer;var r=T.source_type.keyword;if(document&&"string"==typeof e){if(0===e.indexOf("http")){var i=Ge(e),n=ue(e);if(D(n))return T.preset_properties.search_keyword_baidu&&ze()?void 0:"未取到值";var a=null;for(var s in r)if(i===s&&"object"==_typeof(n))if(a=r[s],y(a))for(s=0;s<a.length;s++){var o=n[a[s]];if(o)return t?{active:o}:o}else if(n[a])return t?{active:n[a]}:n[a];return T.preset_properties.search_keyword_baidu&&ze()?void 0:"未取到值"}return""===e?"未取到值_直接打开":"未取到值_非http的url"}return"取值异常_referrer异常_"+String(e)}function et(e){var t=ce(e,"gdt_vid"),r=ce(e,"hash_key"),i=ce(e,"callbacks"),n={click_id:"",hash_key:"",callbacks:""};return v(t)&&t.length&&(n.click_id=16==t.length||18==t.length?t:"参数解析不合法",v(r)&&r.length&&(n.hash_key=r),v(i)&&i.length&&(n.callbacks=i)),n}function tt(){function e(e,t){for(var r=0;r<e.length;r++)if(t.split("?")[0].indexOf(e[r])!==-1)return!0}var t="("+T.source_type.utm.join("|")+")\\=[^&]+",r=T.source_type.search,i=T.source_type.social,n=document.referrer||"",a=x.pageProp.url;if(a){var s=a.match(new RegExp(t));return s&&s[0]?"付费广告流量":e(r,n)?"自然搜索流量":e(i,n)?"社交网站流量":""===n?"直接流量":"引荐流量"}return"获取url异常"}function rt(e){var t=T.heatmap&&"function"==typeof T.heatmap.collect_input&&T.heatmap.collect_input(e);return"button"===e.type||"submit"===e.type||t?e.value||"":""}function it(e,t){return v(t)&&"input"===t.toLowerCase()?rt(e):oe(e,t)}function nt(e){return Ur.protocol.ajax(e.url),F(e)}function at(e,t,r){var i=!(!f(T.heatmap)||!T.heatmap.useCapture);return f(T.heatmap)&&"undefined"==typeof T.heatmap.useCapture&&"click"===t&&(i=!0),a(e,t,r,i)}function st(e,t){var r="";if(t=t||location.href,T.cross_subdomain===!1){try{r=s(t).hostname}catch(e){N(e)}r="string"==typeof r&&""!==r?"sajssdk_2015_"+T.sdk_id+e+"_"+r.replace(/\./g,"_"):"sajssdk_2015_root_"+T.sdk_id+e}else r="sajssdk_2015_cross_"+T.sdk_id+e;return r}function ot(){var e="new_user";return L.isSupport()?null!==L.get("sensorsdata_is_new_user")||null!==L.get(st(e)):null!==Vr.get(Vr.getNewUserFlagMemoryKey(e))}function lt(e,t){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&!zr.check(r,e[r],t))return!1;return!0}function ct(e){var t=!e.type||"profile"!==e.type.slice(0,7),r="取值异常";f(e.properties)&&(e.properties.$first_referrer&&(e.properties.$first_referrer_host=b(e.properties.$first_referrer,r)),t&&("$referrer"in e.properties&&(e.properties.$referrer_host=""===e.properties.$referrer?"":b(e.properties.$referrer,r)),C.para.preset_properties.latest_referrer&&C.para.preset_properties.latest_referrer_host&&(e.properties.$latest_referrer_host=""===e.properties.$latest_referrer?"":b(e.properties.$latest_referrer,r))))}function ut(e){var t=!e.type||"profile"!==e.type.slice(0,7),r=C.para.preset_properties&&t;r&&C.para.preset_properties.url&&"undefined"==typeof e.properties.$url&&(e.properties.$url=k()),r&&C.para.preset_properties.title&&"undefined"==typeof e.properties.$title&&(e.properties.$title=document.title)}function dt(e){S(T,e||C.para||{}),C.para=T;var t={};if(f(C.para.is_track_latest))for(var r in C.para.is_track_latest)t["latest_"+r]=C.para.is_track_latest[r];C.para.preset_properties=S({},C.para_default.preset_properties,t,C.para.preset_properties||{});var i;for(i in C.para_default)void 0===C.para[i]&&(C.para[i]=C.para_default[i]);"string"==typeof C.para.server_url&&(C.para.server_url=h(C.para.server_url),C.para.server_url&&("://"===C.para.server_url.slice(0,3)?C.para.server_url=location.protocol.slice(0,-1)+C.para.server_url:"//"===C.para.server_url.slice(0,2)?C.para.server_url=location.protocol+C.para.server_url:"http"!==C.para.server_url.slice(0,4)&&(C.para.server_url=""))),"string"!=typeof C.para.web_url||"://"!==C.para.web_url.slice(0,3)&&"//"!==C.para.web_url.slice(0,2)||("://"===C.para.web_url.slice(0,3)?C.para.web_url=location.protocol.slice(0,-1)+C.para.web_url:C.para.web_url=location.protocol+C.para.web_url),"image"!==C.para.send_type&&"ajax"!==C.para.send_type&&"beacon"!==C.para.send_type&&(C.para.send_type="image"),C.debug.protocol.serverUrl(),C.bridge.initPara(),C.bridge.initState();var n={datasend_timeout:6e3,send_interval:6e3};A.isSupport()&&je()&&"object"==(typeof localStorage==="undefined"?"undefined":_typeof(localStorage))?C.para.batch_send===!0?C.para.batch_send=S({},n):"object"==_typeof(C.para.batch_send)&&(C.para.batch_send=S({},n,C.para.batch_send)):C.para.batch_send=!1;var a=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],s=["www.baidu.","m.baidu.","m.sm.cn","so.com","sogou.com","youdao.com","google.","yahoo.com/","bing.com/","ask.com/"],o=["weibo.com","renren.com","kaixin001.com","douban.com","qzone.qq.com","zhihu.com","tieba.baidu.com","weixin.qq.com"],l={baidu:["wd","word","kw","keyword"],google:"q",bing:"q",yahoo:"p",sogou:["query","keyword"],so:"q",sm:"q"};"object"==_typeof(C.para.source_type)&&(C.para.source_type.utm=y(C.para.source_type.utm)?C.para.source_type.utm.concat(a):a,C.para.source_type.search=y(C.para.source_type.search)?C.para.source_type.search.concat(s):s,C.para.source_type.social=y(C.para.source_type.social)?C.para.source_type.social.concat(o):o,C.para.source_type.keyword=f(C.para.source_type.keyword)?S(l,C.para.source_type.keyword):l);var c={div:!1},u=["mark","/mark","strong","b","em","i","u","abbr","ins","del","s","sup"];if(C.para.heatmap&&!f(C.para.heatmap)&&(C.para.heatmap={}),f(C.para.heatmap)){C.para.heatmap.clickmap=C.para.heatmap.clickmap||"default",C.para.heatmap.scroll_notice_map=C.para.heatmap.scroll_notice_map||"default",C.para.heatmap.scroll_delay_time=C.para.heatmap.scroll_delay_time||4e3,C.para.heatmap.scroll_event_duration=C.para.heatmap.scroll_event_duration||18e3,C.para.heatmap.renderRefreshTime=C.para.heatmap.renderRefreshTime||1e3,C.para.heatmap.loadTimeout=C.para.heatmap.loadTimeout||1e3,C.para.heatmap.get_vtrack_config!==!0&&(C.para.heatmap.get_vtrack_config=!1);var d=y(C.para.heatmap.track_attr)?ie(C.para.heatmap.track_attr,function(e){return e&&"string"==typeof e}):[];if(d.push("data-sensors-click"),C.para.heatmap.track_attr=d,f(C.para.heatmap.collect_tags)){if(C.para.heatmap.collect_tags.div===!0)C.para.heatmap.collect_tags.div={ignore_tags:u,max_level:1};else if(f(C.para.heatmap.collect_tags.div)){if(C.para.heatmap.collect_tags.div.ignore_tags?y(C.para.heatmap.collect_tags.div.ignore_tags)||(C.log("ignore_tags 参数必须是数组格式"),C.para.heatmap.collect_tags.div.ignore_tags=u):C.para.heatmap.collect_tags.div.ignore_tags=u,C.para.heatmap.collect_tags.div.max_level){var p=[1,2,3];P(p,C.para.heatmap.collect_tags.div.max_level)===-1&&(C.para.heatmap.collect_tags.div.max_level=1)}}else C.para.heatmap.collect_tags.div=!1}else C.para.heatmap.collect_tags=c}if(y(C.para.server_url)&&C.para.server_url.length)for(i=0;i<C.para.server_url.length;i++)/sa\.gif[^\/]*$/.test(C.para.server_url[i])||(C.para.server_url[i]=C.para.server_url[i].replace(/\/sa$/,"/sa.gif").replace(/(\/sa)(\?[^\/]+)$/,"/sa.gif$2"));else/sa\.gif[^\/]*$/.test(C.para.server_url)||"string"!=typeof C.para.server_url||(C.para.server_url=C.para.server_url.replace(/\/sa$/,"/sa.gif").replace(/(\/sa)(\?[^\/]+)$/,"/sa.gif$2"));"string"==typeof C.para.server_url&&(C.para.debug_mode_url=C.para.debug_mode_url||C.para.server_url.replace("sa.gif","debug")),C.para.noCache===!0?C.para.noCache="?"+(new Date).getTime():C.para.noCache="",C.para.callback_timeout>C.para.datasend_timeout&&(C.para.datasend_timeout=C.para.callback_timeout),C.para.heatmap&&C.para.heatmap.collect_tags&&f(C.para.heatmap.collect_tags)&&w(C.para.heatmap.collect_tags,function(e,t){"div"!==t&&e&&C.heatmap.otherTags.push(t)}),C.para.heatmap&&"default"===C.para.heatmap.clickmap&&C.heatmap.initUnlimitedTags()}function pt(e){var t={};for(var r in e)t[r]=e[r];C.store._state.identities=t,C.store.save()}function _t(){C._t=C._t||1*new Date,C.lib_version=Rr,C.is_first_visitor=!1,C.source_channel_standard=Br}function ft(){if(n.isSupport())try{sessionStorage.setItem("sensorsdata_jssdk_debug","true")}catch(e){C.log("enableLocalLog error: "+e.message)}}function gt(){n.isSupport()&&sessionStorage.removeItem("sensorsdata_jssdk_debug")}function ht(){var e=Array.prototype.slice.call(arguments),t=e[0],r=e.slice(1);return"string"==typeof t&&Yr[t]?Yr[t].apply(Yr,r):void("function"==typeof t?t.apply(C,r):C.log("quick方法中没有这个功能"+e[0]))}function mt(e,t){return v(e)?f(window.SensorsDataWebJSSDKPlugin)&&f(window.SensorsDataWebJSSDKPlugin[e])&&u(window.SensorsDataWebJSSDKPlugin[e].init)?(window.SensorsDataWebJSSDKPlugin[e].init(C,t),window.SensorsDataWebJSSDKPlugin[e]):f(C.modules)&&f(C.modules[e])&&u(C.modules[e].init)?(C.modules[e].init(C,t),C.modules[e]):void C.log(e+"没有获取到,请查阅文档，调整"+e+"的引入顺序！"):(C.log("use插件名称必须是字符串！"),!1)}function vt(e,t,r){J.check({event:e,properties:t})&&J.send({type:"track",event:e,properties:t},r)}function yt(e,t){return!!J.check({bindKey:e,bindValue:t})&&(C.store._state.identities[e]=t,C.store.save(),void J.send({type:"track_id_bind",event:"$BindID",properties:{}}))}function wt(e,t){if(!J.check({unbindKey:e,bindValue:t}))return!1;if(f(C.store._state.identities)&&C.store._state.identities.hasOwnProperty(e)&&C.store._state.identities[e]===t){var r=C.store.getUnionId().login_id;r&&e+"+"+t===r&&(C.store._state.distinct_id=C.store._state.first_id,C.store._state.first_id="",C.store.set("history_login_id",{name:"",value:""})),"$identity_cookie_id"!==e&&(delete C.store._state.identities[e],C.store.save())}var i={};i[e]=t,J.send({identities:i,type:"track_id_unbind",event:"$UnbindID",properties:{}})}function St(e,t,r){function i(e,i,n){function t(e){function t(){r||(r=!0,location.href=a.href)}e.stopPropagation(),e.preventDefault();var r=!1;setTimeout(t,1e3),C.track(i,n,t)}e=e||{};var a=null;return e.ele&&(a=e.ele),e.event&&(a=e.target?e.target:e.event.target),n=n||{},!(!a||"object"!=_typeof(a))&&(!a.href||/^javascript/.test(a.href)||a.target||a.download||a.onclick?(C.track(i,n),!1):(e.event&&t(e.event),void(e.ele&&at(e.ele,"click",function(e){t(e)}))))}"object"==_typeof(e)&&e.tagName?i({ele:e},t,r):"object"==_typeof(e)&&e.target&&e.event&&i(e,t,r)}function bt(i,n,a){return a=a||{},!(!i||"object"!=_typeof(i))&&!(!i.href||/^javascript/.test(i.href)||i.target)&&void at(i,"click",function(e){function t(){r||(r=!0,location.href=i.href)}e.preventDefault();var r=!1;setTimeout(t,1e3),C.track(n,a,t)})}function kt(e,t,r){J.check({item_type:e,item_id:t,properties:r})&&J.sendItem({type:"item_set",item_type:e,item_id:t,properties:r||{}})}function Pt(e,t){J.check({item_type:e,item_id:t})&&J.sendItem({type:"item_delete",item_type:e,item_id:t})}function Dt(e,t){J.check({propertiesMust:e})&&J.send({type:"profile_set",properties:e},t)}function jt(e,t){J.check({propertiesMust:e})&&J.send({type:"profile_set_once",properties:e},t)}function Nt(r,e){J.check({propertiesMust:r})&&(w(r,function(e,t){v(e)?r[t]=[e]:y(e)?r[t]=e:(delete r[t],C.log("appendProfile属性的值必须是字符串或者数组"))}),D(r)||J.send({type:"profile_append",properties:r},e))}function Ot(e,t){function r(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&!/-*\d+/.test(String(e[t])))return!1;return!0}var i=e;v(e)&&(e={},e[i]=1),J.check({propertiesMust:e})&&(r(e)?J.send({type:"profile_increment",properties:e},t):C.log("profile_increment的值只能是数字"))}function Ct(e){J.send({type:"profile_delete"},e),I.set("distinct_id",Pr()),I.set("first_id","")}function $t(e,t){var r=e,i={};v(e)&&(e=[],e.push(r)),y(e)?(w(e,function(e){v(e)?i[e]=!0:C.log("profile_unset给的数组里面的值必须时string,已经过滤掉",e)}),J.send({type:"profile_unset",properties:i},t)):C.log("profile_unset的参数是数组")}function At(e,t){function r(e){C.store._state.identities.$identity_anonymous_id=e,C.store.save()}"number"==typeof e&&(e=String(e));var i=I.getFirstId();if("undefined"==typeof e){var n=Pr();i?I.set("first_id",n):I.set("distinct_id",n),r(n)}else J.check({distinct_id:e})&&(t===!0?i?I.set("first_id",e):I.set("distinct_id",e):i?I.change("first_id",e):I.change("distinct_id",e),r(e))}function Tt(e,t,r,i){var n=I.getFirstId()||I.getDistinctId();I.set("distinct_id",e),J.send({original_id:n,distinct_id:C.store.getDistinctId(),type:"track_signup",event:t,properties:r},i)}function xt(e,t,r,i){"number"==typeof e&&(e=String(e)),J.check({distinct_id:e,event:t,properties:r})&&Tt(e,t,r,i)}function Lt(e){J.check({properties:e})?S(x.currentProps,e):C.log("register输入的参数有误")}function It(e){I.clearAllProps(e)}function Et(e){var t;if(y(e)&&e.length>0)for(t=0;t<e.length;t++)v(e[t])&&e[t]in x.currentProps&&delete x.currentProps[e[t]];else if(e===!0)for(t in x.currentProps)delete x.currentProps[t]}function Jt(e){J.check({properties:e})?I.setProps(e):C.log("register输入的参数有误")}function Ht(e){J.check({properties:e})?I.setPropsOnce(e):C.log("registerOnce输入的参数有误")}function Ut(e){J.check({properties:e})?I.setSessionProps(e):C.log("registerSession输入的参数有误")}function Bt(e){J.check({properties:e})?I.setSessionPropsOnce(e):C.log("registerSessionOnce输入的参数有误")}function Rt(e){var t=e.id,r=e.callback,i=e.name,n=I.getFirstId(),a=I.getOriginDistinctId();if(!J.check({distinct_id:t}))return C.log("login id is invalid"),!1;if(t===C.store.getOriginDistinctId()&&!n)return C.log("login id is equal to distinct_id"),!1;if(f(C.store._state.identities)&&C.store._state.identities.hasOwnProperty(i)&&t===C.store._state.first_id)return!1;var s=C.store._state.history_login_id.name!==i||t!==C.store._state.history_login_id.value;if(s){C.store._state.identities[i]=t,C.store.set("history_login_id",{name:i,value:t}),n||I.set("first_id",a),Tt(t,"$SignUp",{},r);var o={$identity_cookie_id:C.store._state.identities.$identity_cookie_id};o[i]=t,pt(o)}}function Kt(e,t){"number"==typeof e&&(e=String(e)),Rt({id:e,callback:t,name:Mr.LOGIN}),u(t)&&t()}function Mt(e,t){return"number"==typeof t&&(t=String(t)),"number"==typeof e&&(e=String(e)),!!J.check({loginIdKey:e})&&(Mr.LOGIN===e?(Kt(t),!1):void Rt({id:t,callback:null,name:e}))}function Wt(e){var t=I.getFirstId();if(t)if(I.set("first_id",""),e===!0){var r=Pr();I.set("distinct_id",r)}else I.set("distinct_id",t);pt({$identity_cookie_id:C.store._state.identities.$identity_cookie_id}),C.store.set("history_login_id",{name:"",value:""})}function Vt(){function e(){var e=x.campaignParams(),i={};return w(e,function(e,t,r){(" "+C.source_channel_standard+" ").indexOf(" "+t+" ")!==-1?i["$"+t]=r[t]:i[t]=r[t]}),i}var t={$is_first_day:ot(),$is_first_time:qr.is_page_first_visited,$referrer:x.pageProp.referrer||"",$referrer_host:x.pageProp.referrer?b(x.pageProp.referrer):"",$url:k(),$url_path:fe(),$title:document.title||"",_distinct_id:I.getDistinctId(),identities:JSON.parse(JSON.stringify(I._state.identities))},r=S({},x.properties(),C.store.getProps(),e(),t);return C.para.preset_properties.latest_referrer&&C.para.preset_properties.latest_referrer_host&&(r.$latest_referrer_host=""===r.$latest_referrer?"":b(r.$latest_referrer)),r}function qt(){var t="",r=" { cursor: pointer; -webkit-tap-highlight-color: rgba(0,0,0,0); }";C.heatmap&&y(C.heatmap.otherTags)&&w(C.heatmap.otherTags,function(e){t+=e+r}),ke()&&le()&&le()<13&&(C.para.heatmap&&C.para.heatmap.collect_tags&&C.para.heatmap.collect_tags.div&&Le("div, [data-sensors-click]"+r),C.para.heatmap&&C.para.heatmap.track_attr&&Le("["+C.para.heatmap.track_attr.join("], [")+"]"+r),""!==t&&Le(t))}function Ft(e,t){var r=ri.encodeTrackData(t);return e.indexOf("?")!==-1?e+"&"+r:e+"?"+r}function zt(e){return ri.encodeTrackData(e)}function Xt(e){var t=["image","ajax","beacon"],r=t[0];return r=e.config&&P(t,e.config.send_type)>-1?e.config.send_type:C.para.send_type,"beacon"===r&&De()===!1&&(r="image"),"ajax"===r&&je()===!1&&(r="image"),r}function Zt(e){var t=Xt(e);switch(t){case"image":return new ii(e);case"ajax":return new ni(e);case"beacon":return new ai(e);default:return new ii(e)}}function Yt(e){var t=Zt(e),r=t.start;return t.start=function(){var e=this;r.apply(this,arguments),setTimeout(function(){e.isEnd(!0)},C.para.callback_timeout)},t.end=function(){this.callback&&this.callback();var e=this;setTimeout(function(){e.lastClear&&e.lastClear()},C.para.datasend_timeout-C.para.callback_timeout)},t.isEnd=function(){this.received||(this.received=!0,this.end())},t}function Gt(){this.sendTimeStamp=0,this.timer=null,this.serverUrl="",this.hasTabStorage=!1}function Qt(e){var t=location.href,r=window.history.pushState,i=window.history.replaceState;u(window.history.pushState)&&(window.history.pushState=function(){r.apply(window.history,arguments),e(t),t=location.href}),u(window.history.replaceState)&&(window.history.replaceState=function(){i.apply(window.history,arguments),e(t),t=location.href});var n;n=window.document.documentMode?"hashchange":r?"popstate":"hashchange",a(window,n,function(){e(t),t=location.href})}function er(r){var i=null,e=new RegExp(r+"=([^&#]+)");try{var t=JSON.parse(window.name);w(t,function(e,t){r===t&&(i=decodeURIComponent(e))})}catch(e){i=null}if(null===i){var n=location.href.match(e);n&&n[0]&&n[1]&&(i=c(n[1]))}return i}function tr(t){function e(){var e=[];r.touch_app_bridge||e.push(C.debug.defineMode("1")),f(C.para.app_js_bridge)||(e.push(C.debug.defineMode("2")),r.verify_success=!1),f(C.para.heatmap)&&"default"==C.para.heatmap.clickmap||e.push(C.debug.defineMode("3")),"fail"===r.verify_success&&e.push(C.debug.defineMode("4"));var t={callType:"app_alert",data:e};SensorsData_App_Visual_Bridge&&SensorsData_App_Visual_Bridge.sensorsdata_visualized_alert_info?SensorsData_App_Visual_Bridge.sensorsdata_visualized_alert_info(JSON.stringify(t)):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage(JSON.stringify(t))}var r=C.bridge.bridge_info;if(f(window.SensorsData_App_Visual_Bridge)&&window.SensorsData_App_Visual_Bridge.sensorsdata_visualized_mode&&(window.SensorsData_App_Visual_Bridge.sensorsdata_visualized_mode===!0||window.SensorsData_App_Visual_Bridge.sensorsdata_visualized_mode()))if(f(C.para.heatmap)&&"default"==C.para.heatmap.clickmap){if(f(C.para.app_js_bridge)&&"success"===r.verify_success){if(t)sa_jssdk_app_define_mode(C,t);else{var i=location.protocol,n=["http:","https:"];i=P(n,i)>-1?i:"https:",Ce({success:function e(){setTimeout(function(){"undefined"!=typeof sa_jssdk_app_define_mode&&sa_jssdk_app_define_mode(C,t)},0)},error:function e(){},type:"js",url:i+"//static.sensorsdata.cn/sdk/"+C.lib_version+"/vapph5define.min.js"})}}else e()}else e()}function rr(){C.para.is_track_single_page&&mi.on("switch",function(r){var e=function e(t){t=t||{},r!==location.href&&(x.pageProp.referrer=k(r),C.quick("autoTrack",S({$url:k(),$referrer:k(r)},t)))};if("boolean"==typeof C.para.is_track_single_page)e();else if("function"==typeof C.para.is_track_single_page){var t=C.para.is_track_single_page();f(t)?e(t):t===!0&&e()}})}function ir(){C._q&&y(C._q)&&C._q.length>0&&w(C._q,function(e){C[e[0]].apply(C,Array.prototype.slice.call(e[1]))}),f(C.para.heatmap)&&(H.initHeatmap(),H.initScrollmap())}function nr(){C.readyState.setState(3),new C.JSBridge({type:"visualized",app_call_js:function e(){tr("undefined"!=typeof sa_jssdk_app_define_mode?!0:!1)}}),tr(!1),C.bridge.app_js_bridge_v1(),x.initPage(),rr(),!C.para.app_js_bridge&&C.para.batch_send&&A.isSupport()&&C.batchSend.batchInterval(),C.store.init(),C.vtrackBase.init(),C.readyState.setState(4),ir()}function ar(){yi.isSeachHasKeyword()?yi.hasKeywordHandle():window.parent!==self&&B.isSearchHasKeyword()?B.verifyVtrackMode():yi.isStorageHasKeyword()?yi.storageHasKeywordHandle():window.parent!==self&&B.isStorageHasKeyword()?B.verifyVtrackMode():(nr(),B.notifyUser())}function sr(){w(wi,function(e){var t=C[e];C[e]=function(){if(C.readyState.state<3)return y(C._q)||(C._q=[]),C._q.push([e,arguments]),!1;{if(C.readyState.getState())return t.apply(C,arguments);try{console.error("请先初始化神策JS SDK")}catch(e){C.log(e)}}}})}function or(e){this.cancel=function(){e=!0},this.getCanceled=function(){return e||!1}}function lr(e,t,r){var i=null;try{i=JSON.parse(JSON.stringify(e))}catch(e){N(e)}this.getOriginalData=function(){return i},this.getPosition=function(){return t},this.cancelationToken=new or,this.sensors=r}function cr(e){if(!f(e))throw"error: Stage constructor requires arguments.";this.processDef=e,this.registeredInterceptors={}}function ur(e){e&&e.dataStage&&ki.registerStageImplementation(e.dataStage)}function dr(e){e.kit=ri,e.saEvent=J,this.dataStage=Xr}function pr(e){return f(e)?(w(e,function(t,r){if(y(t)){var i=[];w(t,function(e){v(e)?i.push(e):N("您的数据-",r,t,"的数组里的值必须是字符串,已经将其删除")}),e[r]=i}v(t)||j(t)||Q(t)||Se(t)||y(t)||u(t)||"$option"===r||(N("您的数据-",r,t,"-格式不满足要求，我们已经将其删除"),delete e[r])}),e):e}function _r(e,t){return j(t)&&e.length>t?(N("字符串长度超过限制，已经做截取--"+e),e.slice(0,t)):e}function fr(r){var e=["distinct_id","user_id","id","date","datetime","event","events","first_id","original_id","device_id","properties","second_id","time","users"];f(r)&&w(e,function(e,t){e in r&&(t<3?(delete r[e],N("您的属性- "+e+"是保留字段，我们已经将其删除")):N("您的属性- "+e+"是保留字段，请避免其作为属性名"))})}function gr(r){var i=["$element_selector","$element_path"],n=["sensorsdata_app_visual_properties"];f(r)&&w(r,function(e,t){if(f(e))gr(r[t]);else if(v(e)){if(P(n,t)>-1)return;r[t]=_r(e,P(i,t)>-1?1024:T.max_string_length)}})}function hr(e){"undefined"!=typeof e.properties.$project&&(e.project=e.properties.$project,delete e.properties.$project),"undefined"!=typeof e.properties.$token&&(e.token=e.properties.$token,delete e.properties.$token)}function mr(n){if("item_type"in n){var e=n.item_type,t=function e(t){return t||delete n.item_type,!0};lt({item_type:e},t)}if("item_id"in n){var r=n.item_id,i=function e(t,r,i){return t||"string"!==i||delete n.item_id,!0};lt({item_id:r},i)}}function vr(a){w(a,function(e,n){var t=function e(t,r,i){return t||"keyLength"===i||delete a[n],!0};lt({propertyKey:n},t)})}function yr(e){var t=e.properties;f(t)?(pr(t),fr(t),hr(e),vr(t),gr(t)):"properties"in e&&(e.properties={}),xe(e),mr(e)}function wr(){this.dataStage=Pi}function Sr(e){e&&($.setup(N),C._=S(Ir,ti),C.ee=vi,C.sendState=si,C.events=new C._.EventEmitterSa,C.batchSend=ci,C.bridge=ui,C.JSBridge=di,C.store=I,C.vtrackBase=U,C.unlimitedDiv=pi,C.customProp=_i,C.vtrackcollect=fi,C.vapph5collect=hi,C.heatmap=H,C.detectMode=ar,C.registerFeature=ur,ur(new dr(C)),ur(new wr(C)));var t=e?Qr:Si;for(var r in t)C[r]=t[r]}var C={};(function(){function V(e,l){function m(e,t){try{e()}catch(e){t&&t()}}function c(e){if(null!=c[e])return c[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=c("json-stringify")&&c("date-serialization")&&c("json-parse");else if("date-serialization"==e){if(t=c("json-stringify")&&g){var r=l.stringify;m(function(){t='"-271821-04-20T00:00:00.000Z"'==r(new v(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==r(new v(864e13))&&'"-000001-01-01T00:00:00.000Z"'==r(new v(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==r(new v(-1))})}}else{var i,n='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var r=l.stringify,a="function"==typeof r;a&&((i=function e(){return 1}).toJSON=i,m(function(){a="0"===r(0)&&"0"===r(new u)&&'""'==r(new d)&&r(S)===w&&r(w)===w&&r()===w&&"1"===r(i)&&"[1]"==r([i])&&"[null]"==r([w])&&"null"==r(null)&&"[null,null,null]"==r([w,S,null])&&r({a:[i,!0,!1,null,"\0\b\n\f\r\t"]})==n&&"1"===r(null,i)&&"[\n 1,\n 2\n]"==r([1,2],null,1)},function(){a=!1})),t=a}if("json-parse"==e){var s,o=l.parse;"function"==typeof o&&m(function(){0!==o("0")||o(!1)||(i=o(n),s=5==i.a.length&&1===i.a[0],s&&(m(function(){s=!o('"\t"')}),s&&m(function(){s=1!==o("01")}),s&&m(function(){s=1!==o("1.")})))},function(){s=!1}),t=s}}return c[e]=!!t}function a(e){return C(this)}e||(e=F.Object()),l||(l=F.Object());var u=e.Number||F.Number,d=e.String||F.String,t=e.Object||F.Object,v=e.Date||F.Date,r=e.SyntaxError||F.SyntaxError,y=e.TypeError||F.TypeError,f=e.Math||F.Math,i=e.JSON||F.JSON;if("object"==_typeof(i)&&i)return l.stringify=i.stringify,l.parse=i.parse,l.runInContext=V,l;var w,n=t.prototype,S=n.toString,p=n.hasOwnProperty,g=new v(-0xc782b5b800cec);if(m(function(){g=g.getUTCFullYear()==-109252&&0===g.getUTCMonth()&&1===g.getUTCDate()&&10==g.getUTCHours()&&37==g.getUTCMinutes()&&6==g.getUTCSeconds()&&708==g.getUTCMilliseconds()}),c["bug-string-char-index"]=c["date-serialization"]=c.json=c["json-stringify"]=c["json-parse"]=null,!c("json")){var _="[object Function]",b="[object Date]",k="[object Number]",P="[object String]",D="[object Array]",j="[object Boolean]",h=c("bug-string-char-index"),N=function e(t,r){var i,o,n,a=0;(i=function e(){this.valueOf=0}).prototype.valueOf=0,o=new i;for(n in o)p.call(o,n)&&a++;return i=o=null,a?N=function e(t,r){var i,n,a=S.call(t)==_;for(i in t)a&&"prototype"==i||!p.call(t,i)||(n="constructor"===i)||r(i);(n||p.call(t,i="constructor"))&&r(i)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],N=function e(t,r){var i,n,a=S.call(t)==_,s=!a&&"function"!=typeof t.constructor&&q[_typeof(t.hasOwnProperty)]&&t.hasOwnProperty||p;for(i in t)a&&"prototype"==i||!s.call(t,i)||r(i);for(n=o.length;i=o[--n];)s.call(t,i)&&r(i)}),N(t,r)};if(!c("json-stringify")&&!c("date-serialization")){var E={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},J="000000",O=function e(t,r){return(J+(r||0)).slice(-t)},C=function e(t){var r,i,n,a,s,o,l,c,u;if(g)r=function e(t){i=t.getUTCFullYear(),n=t.getUTCMonth(),a=t.getUTCDate(),o=t.getUTCHours(),l=t.getUTCMinutes(),c=t.getUTCSeconds(),u=t.getUTCMilliseconds()};else{var d=f.floor,p=[0,31,59,90,120,151,181,212,243,273,304,334],_=function e(t,r){return p[r]+365*(t-1970)+d((t-1969+(r=+(r>1)))/4)-d((t-1901+r)/100)+d((t-1601+r)/400)};r=function e(t){for(a=d(t/864e5),i=d(a/365.2425)+1970-1;_(i+1,0)<=a;i++);for(n=d((a-_(i,0))/30.42);_(i,n+1)<=a;n++);a=1+a-_(i,n),s=(t%864e5+864e5)%864e5,o=d(s/36e5)%24,l=d(s/6e4)%60,c=d(s/1e3)%60,u=s%1e3}}return(C=function e(t){return t>-1/0&&t<1/0?(r(t),t=(i<=0||i>=1e4?(i<0?"-":"+")+O(6,i<0?-i:i):O(4,i))+"-"+O(2,n+1)+"-"+O(2,a)+"T"+O(2,o)+":"+O(2,l)+":"+O(2,c)+"."+O(3,u)+"Z",i=n=a=o=l=c=u=null):t=null,t})(t)};if(c("json-stringify")&&!c("date-serialization")){var H=l.stringify;l.stringify=function(e,t,r){var i=v.prototype.toJSON;v.prototype.toJSON=a;var n=H(e,t,r);return v.prototype.toJSON=i,n}}else{var U="\\u00",B=function e(t){var r=t.charCodeAt(0),i=E[r];return i?i:U+O(2,r.toString(16))},s=/[\x00-\x1f\x22\x5c]/g,$=function e(t){return s.lastIndex=0,'"'+(s.test(t)?t.replace(s,B):t)+'"'},R=function r(e,t,i,n,a,s,o){var l,c,u,d,p,_,f,g,h;if(m(function(){l=t[e]}),"object"==_typeof(l)&&l&&(l.getUTCFullYear&&S.call(l)==b&&l.toJSON===v.prototype.toJSON?l=C(l):"function"==typeof l.toJSON&&(l=l.toJSON(e))),i&&(l=i.call(t,e,l)),l==w)return l===w?l:"null";switch(c=_typeof(l),"object"==c&&(u=S.call(l)),u||c){case"boolean":case j:return""+l;case"number":case k:return l>-1/0&&l<1/0?""+l:"null";case"string":case P:return $(""+l)}if("object"==_typeof(l)){for(f=o.length;f--;)if(o[f]===l)throw y();if(o.push(l),d=[],g=s,s+=a,u==D){for(_=0,f=l.length;_<f;_++)p=r(_,l,i,n,a,s,o),d.push(p===w?"null":p);h=d.length?a?"[\n"+s+d.join(",\n"+s)+"\n"+g+"]":"["+d.join(",")+"]":"[]"}else N(n||l,function(e){var t=r(e,l,i,n,a,s,o);t!==w&&d.push($(e)+":"+(a?" ":"")+t)}),h=d.length?a?"{\n"+s+d.join(",\n"+s)+"\n"+g+"}":"{"+d.join(",")+"}":"{}";return o.pop(),h}};l.stringify=function(e,t,r){var i,n,a,s;if(q[_typeof(t)]&&t)if(s=S.call(t),s==_)n=t;else if(s==D){a={};for(var o,l=0,c=t.length;l<c;)o=t[l++],s=S.call(o),"[object String]"!=s&&"[object Number]"!=s||(a[o]=1)}if(r)if(s=S.call(r),s==k){if((r-=r%1)>0)for(r>10&&(r=10),i="";i.length<r;)i+=" "}else s==P&&(i=r.length<=10?r:r.slice(0,10));return R("",(o={},o[""]=e,o),n,a,i,"",[])}}}if(!c("json-parse")){var A,T,K=d.fromCharCode,M={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},x=function e(){throw A=T=null,r()},o=function e(){for(var t,r,i,n,a,s=T,o=s.length;A<o;)switch(a=s.charCodeAt(A)){case 9:case 10:case 13:case 32:A++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=h?s.charAt(A):s[A],A++,t;case 34:for(t="@",A++;A<o;)if(a=s.charCodeAt(A),a<32)x();else if(92==a)switch(a=s.charCodeAt(++A)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=M[a],A++;break;case 117:for(r=++A,i=A+4;A<i;A++)a=s.charCodeAt(A),a>=48&&a<=57||a>=97&&a<=102||a>=65&&a<=70||x();t+=K("0x"+s.slice(r,A));break;default:x()}else{if(34==a)break;for(a=s.charCodeAt(A),r=A;a>=32&&92!=a&&34!=a;)a=s.charCodeAt(++A);t+=s.slice(r,A)}if(34==s.charCodeAt(A))return A++,t;x();default:if(r=A,45==a&&(n=!0,a=s.charCodeAt(++A)),a>=48&&a<=57){for(48==a&&(a=s.charCodeAt(A+1),a>=48&&a<=57)&&x(),n=!1;A<o&&(a=s.charCodeAt(A),a>=48&&a<=57);A++);if(46==s.charCodeAt(A)){for(i=++A;i<o&&(a=s.charCodeAt(i),!(a<48||a>57));i++);i==A&&x(),A=i}if(a=s.charCodeAt(A),101==a||69==a){for(a=s.charCodeAt(++A),43!=a&&45!=a||A++,i=A;i<o&&(a=s.charCodeAt(i),!(a<48||a>57));i++);i==A&&x(),A=i}return+s.slice(r,A)}n&&x();var l=s.slice(A,A+4);if("true"==l)return A+=4,!0;if("fals"==l&&101==s.charCodeAt(A+4))return A+=5,!1;if("null"==l)return A+=4,null;x()}return"$"},W=function e(t){var r,i;if("$"==t&&x(),"string"==typeof t){if("@"==(h?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(r=[];t=o(),"]"!=t;)i?","==t?(t=o(),"]"==t&&x()):x():i=!0,","==t&&x(),r.push(e(t));return r}if("{"==t){for(r={};t=o(),"}"!=t;)i?","==t?(t=o(),"}"==t&&x()):x():i=!0,","!=t&&"string"==typeof t&&"@"==(h?t.charAt(0):t[0])&&":"==o()||x(),r[t.slice(1)]=e(o());return r}x()}return t},L=function e(t,r,i){var n=I(t,r,i);n===w?delete t[r]:t[r]=n},I=function e(t,r,i){var n,a=t[r];if("object"==_typeof(a)&&a)if(S.call(a)==D)for(n=a.length;n--;)L(S,N,a,n,i);else N(a,function(e){L(a,e,i)});return i.call(t,r,a)};l.parse=function(e,t){var r,i;return A=0,T=""+e,r=W(o()),"$"!=o()&&x(),A=T=null,t&&S.call(t)==_?I((i={},i[""]=r,i),"",t):r}}}return l.runInContext=V,l}var q={function:!0,object:!0},F=q[typeof window==="undefined"?"undefined":_typeof(window)]&&window||this,t=F.JSON,r=F.JSON3,i=!1,n=V(F,F.JSON3={noConflict:function e(){return i||(i=!0,F.JSON=t,F.JSON3=r,t=r=null),n}});F.JSON={parse:n.parse,stringify:n.stringify}}).call(window),function(e,t){t(e)}(window,function(t){if(t.atob)try{t.atob(" ")}catch(e){t.atob=function(r){var e=function e(t){return r(String(t).replace(/[\t\n\f\r ]+/g,""))};return e.original=r,e}(t.atob)}else{var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;t.btoa=function(e){e=String(e);for(var t,r,i,n,a="",s=0,o=e.length%3;s<e.length;){if((r=e.charCodeAt(s++))>255||(i=e.charCodeAt(s++))>255||(n=e.charCodeAt(s++))>255)return"";t=r<<16|i<<8|n,a+=l.charAt(t>>18&63)+l.charAt(t>>12&63)+l.charAt(t>>6&63)+l.charAt(63&t)}return o?a.slice(0,o-3)+"===".substring(o):a},t.atob=function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!s.test(e))return"";e+="==".slice(2-(3&e.length));for(var t,r,i,n="",a=0;a<e.length;)t=l.indexOf(e.charAt(a++))<<18|l.indexOf(e.charAt(a++))<<12|(r=l.indexOf(e.charAt(a++)))<<6|(i=l.indexOf(e.charAt(a++))),n+=64===r?String.fromCharCode(t>>16&255):64===i?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return n}}}),function(){String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return"[object regexp]"===Object.prototype.toString.call(e).toLowerCase()?this.replace(e,t):this.replace(new RegExp(e,"g"),t)})}();var br,$={setup:function e(t){br=t},log:function e(){(br||console&&console.log||function(){}).apply(null,arguments)}},A={get:function e(t){return window.localStorage.getItem(t)},parse:function e(t){var r;try{r=JSON.parse(A.get(t))||null}catch(e){$.log(e)}return r},set:function e(t,r){try{window.localStorage.setItem(t,r)}catch(e){$.log(e)}},remove:function e(t){window.localStorage.removeItem(t)},isSupport:function e(){var t=!0;try{var r="__local_store_support__",i="testIsSupportStorage";A.set(r,i),A.get(r)!==i&&(t=!1),A.remove(r)}catch(e){t=!1}return t}},kr=function(){function t(){return r=(9301*r+49297)%233280,r/233280}var e=new Date,r=e.getTime();return function(e){return Math.ceil(t()*e)}}();R.prototype.get=function(e,t,r,i){if(!e)throw new Error("key is must");t=t||1e4,r=r||1e3,i=i||function(){};var n=this.lockGetPrefix+e,a=A.get(n),s=String(l());return a&&(a=g(a)||{randomNum:0,expireTime:0},a.expireTime>_())?i(null):(A.set(n,JSON.stringify({randomNum:s,expireTime:_()+t})),void setTimeout(function(){a=g(A.get(n))||{randomNum:0,expireTime:0},a&&a.randomNum===s?(i(A.get(e)),A.remove(e),A.remove(n)):i(null)},r))},R.prototype.set=function(e,t,r,i,n){if(!e||!t)throw new Error("key and val is must");r=r||1e4,i=i||1e3,n=n||function(){};var a=this.lockSetPrefix+e,s=A.get(a),o=String(l());return s&&(s=g(s)||{randomNum:0,expireTime:0},s.expireTime>_())?n({status:"fail",reason:"This key is locked"}):(A.set(a,JSON.stringify({randomNum:o,expireTime:_()+r})),void setTimeout(function(){s=g(A.get(a))||{randomNum:0,expireTime:0},s.randomNum===o?A.set(e,t)&&n({status:"success"}):n({status:"fail",reason:"This key is locked"})},i))},e.prototype.on=function(e,t){if(!e||!t)return!1;if(!i(t))throw new Error("listener must be a function");this._events[e]=this._events[e]||[];var r="object"==_typeof(t);return this._events[e].push(r?t:{listener:t,once:!1}),this},e.prototype.prepend=function(e,t){if(!e||!t)return!1;if(!i(t))throw new Error("listener must be a function");this._events[e]=this._events[e]||[];var r="object"==_typeof(t);return this._events[e].unshift(r?t:{listener:t,once:!1}),this},e.prototype.prependOnce=function(e,t){return this.prepend(e,{listener:t,once:!0})},e.prototype.once=function(e,t){return this.on(e,{listener:t,once:!0})},e.prototype.off=function(e,t){var r=this._events[e];if(!r)return!1;if("number"==typeof t)r.splice(t,1);else if("function"==typeof t)for(var i=0,n=r.length;i<n;i++)r[i]&&r[i].listener===t&&r.splice(i,1);return this},e.prototype.emit=function(e,t){var r=this._events[e];if(!r)return!1;for(var i=0;i<r.length;i++){var n=r[i];n&&(n.listener.call(this,t||{}),n.once&&this.off(e,i))}return this},e.prototype.removeAllListeners=function(e){e&&this._events[e]?this._events[e]=[]:this._events={}},e.prototype.listeners=function(e){return e&&"string"==typeof e?this._events[e]:this._events};var Pr=function(){var r=function e(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)},i=function e(){return l().toString(16).replace(".","")},n=function e(){function t(e,t){var r,i=0;for(r=0;r<t.length;r++)i|=n[r]<<8*r;return e^i}var r,e,i=navigator.userAgent,n=[],a=0;for(r=0;r<i.length;r++)e=i.charCodeAt(r),n.unshift(255&e),n.length>=4&&(a=t(a,n),n=[]);return n.length>0&&(a=t(a,n)),a.toString(16)};return function(){var e=String(screen.height*screen.width);e=e&&/\d{5,}/.test(e)?e.toString(16):String(31242*l()).replace(".","").slice(0,8);var t=r()+"-"+i()+"-"+n()+"-"+e+"-"+r();return t?t:(String(l())+String(l())+String(l())).slice(2,15)}}(),Dr=function e(t){this.ele=t},jr=function e(t,r){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==r&&i.push(t);return i};Dr.prototype={addClass:function e(t){var r=" "+this.ele.className+" ";return r.indexOf(" "+t+" ")===-1&&(this.ele.className=this.ele.className+(""===this.ele.className?"":" ")+t),this},removeClass:function e(t){var r=" "+this.ele.className+" ";return r.indexOf(" "+t+" ")!==-1&&(this.ele.className=r.replace(" "+t+" "," ").slice(1,-1)),this},hasClass:function e(t){var r=" "+this.ele.className+" ";return r.indexOf(" "+t+" ")!==-1},attr:function e(t,r){return"string"==typeof t&&W(r)?this.ele.getAttribute(t):("string"==typeof t&&(r=String(r),this.ele.setAttribute(t,r)),this)},offset:function e(){var t=this.ele.getBoundingClientRect();if(t.width||t.height){var r=this.ele.ownerDocument,i=r.documentElement;return{top:t.top+window.pageYOffset-i.clientTop,left:t.left+window.pageXOffset-i.clientLeft}}return{top:0,left:0}},getSize:function e(){if(!window.getComputedStyle)return{width:this.ele.offsetWidth,height:this.ele.offsetHeight};try{var t=this.ele.getBoundingClientRect();return{width:t.width,height:t.height}}catch(e){return{width:0,height:0}}},getStyle:function e(t){return this.ele.currentStyle?this.ele.currentStyle[t]:this.ele.ownerDocument.defaultView.getComputedStyle(this.ele,null).getPropertyValue(t)},wrap:function e(t){var r=document.createElement(t);return this.ele.parentNode.insertBefore(r,this.ele),r.appendChild(this.ele),p(r)},getCssStyle:function e(t){var r=this.ele.style.getPropertyValue(t);if(r)return r;var i=null;if("function"==typeof window.getMatchedCSSRules&&(i=window.getMatchedCSSRules(this.ele)),!i||!y(i))return null;for(var n=i.length-1;n>=0;n--){var a=i[n];if(r=a.style.getPropertyValue(t))return r}},sibling:function e(t,r){for(;(t=t[r])&&1!==t.nodeType;);return t},next:function e(){return this.sibling(this.ele,"nextSibling")},prev:function e(){return this.sibling(this.ele,"previousSibling")},siblings:function e(){return jr((this.ele.parentNode||{}).firstChild,this.ele)},children:function e(){return jr(this.ele.firstChild)},parent:function e(){var t=this.ele.parentNode;return t=t&&11!==t.nodeType?t:null,p(t)},previousElementSibling:function e(){var t=this.ele;if("previousElementSibling"in document.documentElement)return p(t.previousElementSibling);for(;t=t.previousSibling;)if(1===t.nodeType)return p(t);return p(null)},getSameTypeSiblings:function e(){for(var t=this.ele,r=t.parentNode,i=t.tagName.toLowerCase(),n=[],a=0;a<r.children.length;a++){var s=r.children[a];1===s.nodeType&&s.tagName.toLowerCase()===i&&n.push(r.children[a])}return n},getParents:function e(){try{var t=this.ele;if(!d(t))return[];var r=[t];if(null===t||null===t.parentElement)return[];for(;null!==t.parentElement;)t=t.parentElement,r.push(t);return r}catch(e){return[]}}};var Nr=Array.prototype.forEach,Or=Object.prototype.hasOwnProperty,Cr=Object.prototype.hasOwnProperty,$r={get:function e(t){for(var r=t+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var a=i[n];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(r))return c(a.substring(r.length,a.length))}return null},set:function e(t,r,i,n,a,s,o){function l(e){return!!e&&e.replaceAll(/\r\n/g,"")}var c=o,u="",d="",p="";if(i=null==i?73e3:i,0!==i){var _=new Date;"s"===String(i).slice(-1)?_.setTime(_.getTime()+1e3*Number(String(i).slice(0,-1))):_.setTime(_.getTime()+24*i*60*60*1e3),u="; expires="+_.toGMTString()}v(a)&&""!==a&&(p="; SameSite="+a),s&&(d="; secure");var f="",g="",h="";t&&(f=l(t)),r&&(g=l(r)),c&&(h=l(c)),f&&g&&(document.cookie=f+"="+encodeURIComponent(g)+u+"; path=/"+h+p+d)},remove:function e(t,r){this.set(t,"1",-1,r)},isSupport:function e(t,r){function i(){n.set(t,r);var e=n.get(t);return e===r&&(n.remove(t),!0)}t=t||"cookie_support_test",r=r||"1";var n=this;return navigator.cookieEnabled&&i()}},Ar=Object.prototype.hasOwnProperty,n={isSupport:function e(){var t=!0,r="__session_storage_support__",i="testIsSupportStorage";try{sessionStorage&&sessionStorage.setItem?(sessionStorage.setItem(r,i),sessionStorage.removeItem(r,i),t=!0):t=!1}catch(e){t=!1}return t}},Tr={"+":"-","/":"_","=":"."},xr={"-":"+",_:"/",".":"="},Lr={encode:function e(t){return t.replace(/[+\/=]/g,function(e){return Tr[e]})},decode:function e(t){return t.replace(/[-_.]/g,function(e){return xr[e]})},trim:function e(t){return t.replace(/[.=]{1,2}$/,"")},isBase64:function e(t){return/^[A-Za-z0-9+\/]*[=]{0,2}$/.test(t)},isUrlSafeBase64:function e(t){return/^[A-Za-z0-9_-]*[.]{0,2}$/.test(t)}},Ir={__proto__:null,ConcurrentStorage:R,EventEmitter:e,URL:s,UUID:Pr,addEvent:a,addHashEvent:V,ajax:F,base64Decode:z,base64Encode:X,bindReady:t,cookie:$r,coverExtend:Z,decodeURI:Y,decodeURIComponent:c,dfmapping:G,each:w,encodeDates:te,extend:S,extend2Lev:re,filter:ie,formatDate:ee,formatJsonString:ne,getCookieTopLevelDomain:ae,getDomBySelector:se,getElementContent:oe,getHostname:b,getIOSVersion:le,getQueryParam:ce,getQueryParamsFromUrl:ue,getRandom:l,getRandomBasic:kr,getScreenOrientation:pe,getUA:_e,getURL:k,getURLPath:fe,getURLSearchParams:K,hasAttribute:ge,hasAttributes:he,hashCode:me,hashCode53:ve,indexOf:P,inherit:ye,isArguments:we,isArray:y,isBoolean:Se,isDate:Q,isElement:d,isEmptyObject:D,isFunction:u,isHttpUrl:be,isIOS:ke,isJSONString:Pe,isNumber:j,isObject:f,isString:v,isSupportBeaconSend:De,isSupportCors:je,isUndefined:W,jsonp:Ne,listenPageState:Oe,loadScript:Ce,localStorage:A,logger:$,map:r,mediaQueriesSupported:de,now:_,removeScriptProtocol:$e,rot13defs:Te,rot13obfs:Ae,ry:p,safeJSONParse:g,searchObjDate:xe,sessionStorage:n,setCssStyle:Le,strToUnicode:Ie,throttle:Ee,toArray:He,trim:h,unique:Ue,urlParse:M,urlSafeBase64:Lr,values:Je,xhr:q},T={},Er={preset_properties:{search_keyword_baidu:!1,latest_utm:!0,latest_traffic_source_type:!0,latest_search_keyword:!0,latest_referrer:!0,latest_referrer_host:!1,latest_landing_page:!1,latest_wx_ad_click_id:void 0,url:!0,title:!0},encrypt_cookie:!1,enc_cookie:!1,img_use_crossorigin:!1,name:"sa",max_referrer_string_length:200,max_string_length:500,max_id_length:255,max_key_length:100,cross_subdomain:!0,show_log:!1,is_debug:!1,debug_mode:!1,debug_mode_upload:!1,source_channel:[],sdk_id:"",send_type:"image",vtrack_ignore:{},auto_init:!0,is_track_single_page:!1,is_single_page:!1,batch_send:!1,source_type:{},callback_timeout:200,datasend_timeout:8e3,is_track_device_id:!1,ignore_oom:!0,app_js_bridge:!1},Jr="data:enc;",Hr="dfm-enc-",Ur={distinct_id:function e(){},jssdkDebug:function e(){},_sendDebug:function e(t){},apph5:function e(t){var r="app_h5打通失败-",i={1:r+"use_app_track为false",2:r+"Android或者iOS，没有暴露相应方法",3.1:r+"Android校验server_url失败",3.2:r+"iOS校验server_url失败",4.1:r+"H5 校验 iOS server_url 失败",4.2:r+"H5 校验 Android server_url 失败"},n=t.output,a=t.step,s=t.data||"";"all"!==n&&"console"!==n||N(i[a]),("all"===n||"code"===n)&&f(T.is_debug)&&T.is_debug.apph5&&(s.type&&"profile"===s.type.slice(0,7)||(s.properties._jssdk_debug_info="apph5-"+String(a)))},defineMode:function e(t){var r={1:{title:"当前页面无法进行可视化全埋点",message:"App SDK 与 Web JS SDK 没有进行打通，请联系贵方技术人员修正 App SDK 的配置，详细信息请查看文档。",link_text:"配置文档",link_url:"https://manual.sensorsdata.cn/sa/latest/tech_sdk_client_link-1573913.html"},2:{title:"当前页面无法进行可视化全埋点",message:"App SDK 与 Web JS SDK 没有进行打通，请联系贵方技术人员修正 Web JS SDK 的配置，详细信息请查看文档。",link_text:"配置文档",link_url:"https://manual.sensorsdata.cn/sa/latest/tech_sdk_client_link-1573913.html"},3:{title:"当前页面无法进行可视化全埋点",message:"Web JS SDK 没有开启全埋点配置，请联系贵方工作人员修正 SDK 的配置，详细信息请查看文档。",link_text:"配置文档",link_url:"https://manual.sensorsdata.cn/sa/latest/tech_sdk_client_web_all-1573964.html"},4:{title:"当前页面无法进行可视化全埋点",message:"Web JS SDK 配置的数据校验地址与 App SDK 配置的数据校验地址不一致，请联系贵方工作人员修正 SDK 的配置，详细信息请查看文档。",link_text:"配置文档",link_url:"https://manual.sensorsdata.cn/sa/latest/tech_sdk_client_link-1573913.html"}};return!(!t||!r[t])&&r[t]},protocol:{protocolIsSame:function e(t,r){try{if(s(t).protocol!==s(r).protocol)return!1}catch(e){return N("不支持 _.URL 方法"),!1}return!0},serverUrl:function e(){v(T.server_url)&&""!==T.server_url&&!this.protocolIsSame(T.server_url,location.href)&&N("SDK 检测到您的数据发送地址和当前页面地址的协议不一致，建议您修改成一致的协议。\n因为：1、https 下面发送 http 的图片请求会失败。2、http 页面使用 https + ajax 方式发数据，在 ie9 及以下会丢失数据。")},ajax:function e(t){return t!==T.server_url&&void(v(t)&&""!==t&&!this.protocolIsSame(t,location.href)&&N("SDK 检测到您的数据发送地址和当前页面地址的协议不一致，建议您修改成一致的协议。因为 http 页面使用 https + ajax 方式发数据，在 ie9 及以下会丢失数据。"))}}},Br="utm_source utm_medium utm_campaign utm_content utm_term",Rr="1.22.7",Kr="sensorsdata_domain_test",Mr={EMAIL:"$identity_email",MOBILE:"$identity_mobile",LOGIN:"$identity_login_id"},Wr={data:{},id:function e(){return this.data.id?this.data.id:(this.data.id=Xe(),this.data.id)},type:function e(){return this.data.type?this.data.type:(this.data.type=Ze(),this.data.type)}},x={initPage:function e(){var t=O(),r=k(),i=qe(r);i||Ur.jssdkDebug("url_domain异常_"+r+"_"+i),this.pageProp={referrer:t,referrer_host:t?b(t):"",url:r,url_host:b(r,"url_host取值异常"),url_domain:i}},pageProp:{},campaignParams:function e(){var t=Br.split(" "),r="",i={};return y(T.source_channel)&&T.source_channel.length>0&&(t=t.concat(T.source_channel),t=Ue(t)),w(t,function(e){r=ce(location.href,e),r.length&&(i[e]=r)}),i},campaignParamsStandard:function e(i,n){i=i||"",n=n||"";var t=x.campaignParams(),a={},s={};return w(t,function(e,t,r){(" "+Br+" ").indexOf(" "+t+" ")!==-1?a[i+t]=r[t]:s[n+t]=r[t]}),{$utms:a,otherUtms:s}},properties:function e(){var t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,r=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0,i={$timezone_offset:(new Date).getTimezoneOffset(),$screen_height:Number(screen.height)||0,$screen_width:Number(screen.width)||0,$viewport_height:t,$viewport_width:r,$lib:"js",$lib_version:Rr};return i},currentProps:{},register:function e(t){S(x.currentProps,t)}},L={get:function e(t){return $r.get(t)},set:function e(t,r,i,n){var a="";if(n="undefined"==typeof n?T.cross_subdomain:n){var s=qe(location.href);"url解析失败"===s&&(s=""),a=s?"; domain="+s:""}return $r.set(t,r,i,n,T.set_cookie_samesite,T.is_secure_cookie,a)},remove:function e(t,r){return r="undefined"==typeof r?T.cross_subdomain:r,$r.remove(t,r)},isSupport:function e(t,r){return t=t||"sajssdk_2015_cookie_access_test",r=r||"1",$r.isSupport(t,r)}};L.getNewUser=ot;var Vr={data:{},get:function e(t){var r=this.data[t];return void 0===r?null:void 0!==r._expirationTimestamp_?(new Date).getTime()>r._expirationTimestamp_?null:r.value:r},set:function e(t,r,i){if(i){var n,a=new Date;n="s"===String(i).slice(-1)?a.getTime()+1e3*Number(String(i).slice(0,-1)):a.getTime()+24*i*60*60*1e3,r={value:r,_expirationTimestamp_:n}}this.data[t]=r},getNewUserFlagMemoryKey:function e(t){return"sajssdk_2015_"+T.sdk_id+t}},qr={checkIsAddSign:function e(t){"track"===t.type&&(ot()?t.properties.$is_first_day=!0:t.properties.$is_first_day=!1)},is_first_visit_time:!1,is_page_first_visited:!1,checkIsFirstTime:function e(t){"track"===t.type&&"$pageview"===t.event&&(this.is_first_visit_time?(t.properties.$is_first_time=!0,this.is_first_visit_time=!1):t.properties.$is_first_time=!1)},setDeviceId:function e(t){var r=null,i=L.get("sensorsdata2015jssdkcross"+C.para.sdk_id);i=Re(i);var n={};null!=i&&Pe(i)&&(n=JSON.parse(i),n.$device_id&&(r=n.$device_id)),r=r||t,C.para.cross_subdomain===!0?C.store.set("$device_id",r):(n.$device_id=r,n=JSON.stringify(n),C.para.encrypt_cookie&&(n=Ke(n)),L.set("sensorsdata2015jssdkcross"+C.para.sdk_id,n,null,!0)),C.para.is_track_device_id&&(x.currentProps.$device_id=r)},storeInitCheck:function e(){if(C.is_first_visitor){var t=new Date,r={h:23-t.getHours(),m:59-t.getMinutes(),s:59-t.getSeconds()};L.isSupport()?L.set(st("new_user"),"1",3600*r.h+60*r.m+r.s+"s"):Vr.set(Vr.getNewUserFlagMemoryKey("new_user"),"1",3600*r.h+60*r.m+r.s+"s"),this.is_first_visit_time=!0,this.is_page_first_visited=!0}else ot()||(this.checkIsAddSign=function(e){"track"===e.type&&(e.properties.$is_first_day=!1)}),this.checkIsFirstTime=function(e){"track"===e.type&&"$pageview"===e.event&&(e.properties.$is_first_time=!1)}},checkIsFirstLatest:function e(){var a=x.pageProp.url_domain,s={};""===a&&(a="url解析失败");var t=Qe(document.referrer,!0);if(C.para.preset_properties.search_keyword_baidu?Ye(document.referrer)&&(!ze()||f(t)&&t.active?C.store._state&&C.store._state.props&&(C.store._state.props.$search_keyword_id&&delete C.store._state.props.$search_keyword_id,C.store._state.props.$search_keyword_id_type&&delete C.store._state.props.$search_keyword_id_type,C.store._state.props.$search_keyword_id_hash&&delete C.store._state.props.$search_keyword_id_hash):(s.$search_keyword_id=Wr.id(),s.$search_keyword_id_type=Wr.type(),s.$search_keyword_id_hash=ve(s.$search_keyword_id))):C.store._state&&C.store._state.props&&(C.store._state.props.$search_keyword_id&&delete C.store._state.props.$search_keyword_id,C.store._state.props.$search_keyword_id_type&&delete C.store._state.props.$search_keyword_id_type,C.store._state.props.$search_keyword_id_hash&&delete C.store._state.props.$search_keyword_id_hash),C.store.save(),w(C.para.preset_properties,function(e,t){if(t.indexOf("latest_")===-1)return!1;if(t=t.slice(7),e){if("wx_ad_click_id"===t&&"not_collect"===e)return!1;if("utm"!==t&&"url解析失败"===a)"wx_ad_click_id"===t?(s._latest_wx_ad_click_id="url的domain解析失败",s._latest_wx_ad_hash_key="url的domain解析失败",s._latest_wx_ad_callbacks="url的domain解析失败"):s["$latest_"+t]="url的domain解析失败";else if(Ye(document.referrer))switch(t){case"traffic_source_type":s.$latest_traffic_source_type=tt();break;case"referrer":s.$latest_referrer=x.pageProp.referrer;break;case"search_keyword":Qe()?s.$latest_search_keyword=Qe():f(C.store._state)&&f(C.store._state.props)&&C.store._state.props.$latest_search_keyword&&delete C.store._state.props.$latest_search_keyword;break;case"landing_page":s.$latest_landing_page=k();break;case"wx_ad_click_id":var r=et(location.href);s._latest_wx_ad_click_id=r.click_id,s._latest_wx_ad_hash_key=r.hash_key,s._latest_wx_ad_callbacks=r.callbacks}}else if("utm"===t&&C.store._state&&C.store._state.props)for(var i in C.store._state.props)(0===i.indexOf("$latest_utm")||0===i.indexOf("_latest_")&&i.indexOf("_latest_wx_ad_")<0)&&delete C.store._state.props[i];else if(C.store._state&&C.store._state.props&&"$latest_"+t in C.store._state.props)delete C.store._state.props["$latest_"+t];else if("wx_ad_click_id"==t&&C.store._state&&C.store._state.props&&e===!1){var n=["_latest_wx_ad_click_id","_latest_wx_ad_hash_key","_latest_wx_ad_callbacks"];w(n,function(e){e in C.store._state.props&&delete C.store._state.props[e]})}}),C.register(s),C.para.preset_properties.latest_utm){var r=x.campaignParamsStandard("$latest_","_latest_"),i=r.$utms,n=r.otherUtms;D(i)||C.register(i),D(n)||C.register(n)}}},I={requests:[],_sessionState:{},_state:{distinct_id:"",first_id:"",props:{},identities:{}},getProps:function e(){return this._state.props||{}},getSessionProps:function e(){return this._sessionState},getOriginDistinctId:function e(){return this._state._distinct_id||this._state.distinct_id},getOriginUnionId:function e(t){var r={};t=t||this._state;var i=t._first_id||t.first_id,n=t._distinct_id||t.distinct_id;return i&&n?(r.login_id=n,r.anonymous_id=i):r.anonymous_id=n,r},getDistinctId:function e(){var t=this.getUnionId();return t.login_id||t.anonymous_id},getUnionId:function e(t){var r=this.getOriginUnionId(t);return r.login_id&&this._state.history_login_id&&this._state.history_login_id.name&&this._state.history_login_id.name!==C.IDENTITY_KEY.LOGIN&&(r.login_id=this._state.history_login_id.name+"+"+r.login_id),r},getFirstId:function e(){return this._state._first_id||this._state.first_id},initSessionState:function e(){var t=L.get("sensorsdata2015session");t=Re(t);var r=null;null!==t&&"object"==_typeof(r=g(t))&&(this._sessionState=r||{})},setOnce:function e(t,r){t in this._state||this.set(t,r)},set:function e(t,r){this._state=this._state||{};var i=this._state.distinct_id;this._state[t]=r,"first_id"===t?delete this._state._first_id:"distinct_id"===t&&delete this._state._distinct_id,this.save(),"distinct_id"===t&&i&&C.events.tempAdd("changeDistinctId",r)},change:function e(t,r){this._state["_"+t]=r},setSessionProps:function e(t){var r=this._sessionState;S(r,t),this.sessionSave(r)},setSessionPropsOnce:function e(t){var r=this._sessionState;Z(r,t),this.sessionSave(r)},setProps:function e(t,r){var i={};i=r?t:S(this._state.props||{},t);for(var n in i)"string"==typeof i[n]&&(i[n]=i[n].slice(0,C.para.max_referrer_string_length));this.set("props",i)},setPropsOnce:function e(t){var r=this._state.props||{};Z(r,t),this.set("props",r)},clearAllProps:function e(t){this._sessionState={};var r;if(y(t)&&t.length>0)for(r=0;r<t.length;r++)v(t[r])&&t[r].indexOf("latest_")===-1&&f(this._state.props)&&t[r]in this._state.props&&delete this._state.props[t[r]];else if(f(this._state.props))for(r in this._state.props)1!==r.indexOf("latest_")&&delete this._state.props[r];this.sessionSave({}),this.save()},sessionSave:function e(t){this._sessionState=t;var r=JSON.stringify(this._sessionState);C.para.encrypt_cookie&&(r=Ke(r)),L.set("sensorsdata2015session",r,0)},save:function e(){var t=JSON.parse(JSON.stringify(this._state));delete t._first_id,delete t._distinct_id,t.identities&&(t.identities=X(JSON.stringify(t.identities)));var r=JSON.stringify(t);C.para.encrypt_cookie&&(r=Ke(r)),L.set(this.getCookieName(),r,73e3,C.para.cross_subdomain)},getCookieName:function e(){var t="";if(C.para.cross_subdomain===!1){try{t=s(location.href).hostname}catch(e){C.log(e)}t="string"==typeof t&&""!==t?"sa_jssdk_2015_"+C.para.sdk_id+t.replace(/\./g,"_"):"sa_jssdk_2015_root"+C.para.sdk_id}else t="sensorsdata2015jssdkcross"+C.para.sdk_id;return t},init:function e(){function t(e){var t;e.identities&&(0===e.identities.indexOf("\n/")?e.identities=g(Te(e.identities)):e.identities=g(z(e.identities)));var r=I.getOriginUnionId(e);e.identities&&f(e.identities)&&!D(e.identities)?e.identities.$identity_anonymous_id&&e.identities.$identity_anonymous_id!==r.anonymous_id&&(e.identities.$identity_anonymous_id=r.anonymous_id):(e.identities={},e.identities.$identity_anonymous_id=r.anonymous_id,e.identities.$identity_cookie_id=Pr()),e.history_login_id=e.history_login_id||{};var i=e.history_login_id,n=i.name;if(r.login_id){if(n&&e.identities.hasOwnProperty(n)){if(e.identities[n]!==r.login_id){e.identities[n]=r.login_id;for(t in e.identities)e.identities.hasOwnProperty(t)&&"$identity_cookie_id"!==t&&t!==n&&delete e.identities[t];e.history_login_id.value=r.login_id}}else{var a=n||C.IDENTITY_KEY.LOGIN;e.identities[a]=r.login_id;for(t in e.identities)e.identities.hasOwnProperty(t)&&"$identity_cookie_id"!==t&&t!==a&&delete e.identities[t];e.history_login_id={name:a,value:r.login_id}}}else{if(e.identities.hasOwnProperty("$identity_login_id")||e.identities.hasOwnProperty(n))for(t in e.identities)e.identities.hasOwnProperty(t)&&"$identity_cookie_id"!==t&&"$identity_anonymous_id"!==t&&delete e.identities[t];e.history_login_id={name:"",value:""}}return e}function r(e){C.store.set("distinct_id",e),C.store.set("identities",{$identity_cookie_id:e}),C.store.set("history_login_id",{name:"",value:""})}this.initSessionState();var i,n,a=Pr();L.isSupport()&&(i=L.get(this.getCookieName()),i=Re(i),n=g(i)),L.isSupport()&&null!==i&&Pe(i)&&f(n)&&(!f(n)||n.distinct_id)?(C.store._state=S(t(n)),C.store.save()):(C.is_first_visitor=!0,r(a)),qr.setDeviceId(a),qr.storeInitCheck(),qr.checkIsFirstLatest()},saveObjectVal:function e(t,r){v(r)||(r=JSON.stringify(r)),1==C.para.encrypt_cookie&&(r=Ke(r)),A.set(t,r)},readObjectVal:function e(t){var r=A.get(t);return r?(r=Re(r),g(r)):null}},E={string:function e(t){N(t+" must be string")},emptyString:function e(t){N(t+"'s is empty")},regexTest:function e(t){N(t+" is invalid")},idLength:function e(t){N(t+" length is longer than "+T.max_id_length)},keyLength:function e(t){N(t+" length is longer than "+T.max_key_length)},stringLength:function e(t){N(t+" length is longer than "+T.max_string_length)},voidZero:function e(t){N(t+"'s is undefined")},reservedLoginId:function e(t){N(t+" is invalid")},reservedBind:function e(t){N(t+" is invalid")},reservedUnbind:function e(t){N(t+" is invalid")}},Fr={regName:/^((?!^distinct_id$|^original_id$|^time$|^properties$|^id$|^first_id$|^second_id$|^users$|^events$|^event$|^user_id$|^date$|^datetime$|^user_tag.*|^user_group.*)[a-zA-Z_$][a-zA-Z\d_$]*)$/i,loginIDReservedNames:["$identity_anonymous_id","$identity_cookie_id"],bindReservedNames:["$identity_login_id","$identity_anonymous_id","$identity_cookie_id"],unbindReservedNames:["$identity_anonymous_id",Mr.LOGIN],string:function e(t){return!!v(t)},emptyString:function e(t){return!(!v(t)||0===h(t).length)},regexTest:function e(t){return!(!v(t)||!this.regName.test(t))},idLength:function e(t){return!(!v(t)||t.length>T.max_id_length)},keyLength:function e(t){return!(!v(t)||t.length>T.max_key_length)},stringLength:function e(t){return!(!v(t)||t.length>T.max_string_length)},voidZero:function e(t){return void 0!==t},reservedLoginId:function e(t){return!(P(this.loginIDReservedNames,t)>-1)},reservedUnbind:function e(t){return!(P(this.unbindReservedNames,t)>-1)},reservedBind:function e(t){var r=I._state.history_login_id;return(!r||!r.name||r.name!==t)&&!(P(this.bindReservedNames,t)>-1)}},zr={distinct_id:{rules:["string","emptyString","idLength"],onComplete:function e(t,r,i){return!t&&("emptyString"===i&&(r="Id"),u(E[i])&&E[i](r),"idLength"===i)||t}},event:{rules:["string","emptyString","keyLength","regexTest"],onComplete:function e(t,r,i){return t||("emptyString"===i&&(r="eventName"),u(E[i])&&E[i](r)),!0}},propertyKey:{rules:["string","emptyString","keyLength","regexTest"],onComplete:function e(t,r,i){return t||("emptyString"===i&&(r="Property key"),u(E[i])&&E[i](r)),!0}},propertyValue:{rules:["voidZero"],onComplete:function e(t,r,i){return t||(r="Property Value",u(E[i])&&E[i](r)),!0}},properties:function e(t){return f(t)?w(t,function(e,n){lt({propertyKey:n});var t=function e(t,r,i){return t||(r=n+"'s Value",u(E[i])&&E[i](r)),!0};lt({propertyValue:e},t)}):Fr.voidZero(t)&&N("properties可以没有，但有的话必须是对象"),!0},propertiesMust:function e(t){return void 0!==t&&f(t)&&!D(t)?this.properties.call(this,t):N("properties必须是对象"),!0},item_type:{rules:["string","emptyString","keyLength","regexTest"],onComplete:function e(t,r,i){return t||("emptyString"===i&&(r="item_type"),u(E[i])&&E[i](r)),!0}},item_id:{rules:["string","emptyString","stringLength"],onComplete:function e(t,r,i){return t||("emptyString"===i&&(r="item_id"),u(E[i])&&E[i](r)),!0}},loginIdKey:{rules:["string","emptyString","keyLength","regexTest","reservedLoginId"],onComplete:function e(t,r,i){return!t&&("emptyString"===i&&(r="login_id_key"),u(E[i])&&E[i](r),"keyLength"===i)||t}},bindKey:{rules:["string","emptyString","keyLength","regexTest","reservedBind"],onComplete:function e(t,r,i){return!t&&("emptyString"===i&&(r="Key"),u(E[i])&&E[i](r),"keyLength"===i)||t}},unbindKey:{rules:["string","emptyString","keyLength","regexTest","reservedUnbind"],onComplete:function e(t,r,i){return!t&&("emptyString"===i&&(r="Key"),u(E[i])&&E[i](r),"keyLength"===i)||t}},bindValue:{rules:["string","emptyString","idLength"],onComplete:function e(t,r,i){return!t&&("emptyString"===i&&(r="Value"),u(E[i])&&E[i](r),"idLength"===i)||t}},check:function e(t,r,i){var n=this[t];if(u(n))return n.call(this,r);if(!n)return!1;for(var a=0;a<n.rules.length;a++){var s=n.rules[a],o=Fr[s](r),l=u(i)?i(o,r,s):n.onComplete(o,r,s);if(!o)return l}return!0}},Xr={stage:null,init:function e(t){this.stage=t}},J={};J.check=lt,J.sendItem=function(e){var t={lib:{$lib:"js",$lib_method:"code",$lib_version:String(C.lib_version)},time:1*new Date};S(t,e),Xr.stage.process("formatData",t),C.sendState.getSendCall(t)},J.send=function(e,t){var r=C.kit.buildData(e);C.kit.sendData(r,t)},J.debugPath=function(e){var r=e,t="";t=C.para.debug_mode_url.indexOf("?")!==-1?C.para.debug_mode_url+"&"+C.kit.encodeTrackData(e):C.para.debug_mode_url+"?"+C.kit.encodeTrackData(e),nt({url:t,type:"GET",cors:!0,header:{"Dry-Run":String(C.para.debug_mode_upload)},success:function e(t){D(t)===!0?alert("debug数据发送成功"+r):alert("debug失败 错误原因"+JSON.stringify(t))}})};var Zr={label:!1,li:!1,a:!0,button:!0},H={otherTags:[],initUnlimitedTags:function e(){w(H.otherTags,function(e){e in Zr&&(Zr[e]=!0)})},isUnlimitedTag:function e(t){if(!t||1!==t.nodeType)return!1;var r=t.nodeName.toLowerCase();return Zr[r]||he(t,C.para.heatmap.track_attr)},getTargetElement:function e(t,r){var i=this,n=t;if("object"!=_typeof(n))return null;if("string"!=typeof n.tagName)return null;var a=n.tagName.toLowerCase();if("body"===a.toLowerCase()||"html"===a.toLowerCase())return null;if(!n||!n.parentNode||!n.parentNode.children)return null;var s=n.parentNode,o=i.otherTags;if("a"===a||"button"===a||"input"===a||"textarea"===a)return n;if(P(o,a)>-1)return n;if("area"===a&&"map"===s.tagName.toLowerCase()&&p(s).prev().tagName&&"img"===p(s).prev().tagName.toLowerCase())return p(s).prev();if("div"===a&&C.para.heatmap.collect_tags.div&&i.isDivLevelValid(n)){var l=C.para.heatmap&&C.para.heatmap.collect_tags&&C.para.heatmap.collect_tags.div&&C.para.heatmap.collect_tags.div.max_level||1;if(l>1||i.isCollectableDiv(n))return n}if(i.isStyleTag(a)&&C.para.heatmap.collect_tags.div){var c=i.getCollectableParent(n);if(c&&i.isDivLevelValid(c))return c}var u=i.hasElement({event:r&&r.originalEvent||r,element:t},function(e){return i.isUnlimitedTag(e)});return u||null},getDivLevels:function e(t,r){var i=H.getElementPath(t,!0,r),n=i.split(" > "),a=0;return w(n,function(e){"div"===e&&a++}),a},isDivLevelValid:function e(t){for(var r=C.para.heatmap&&C.para.heatmap.collect_tags&&C.para.heatmap.collect_tags.div&&C.para.heatmap.collect_tags.div.max_level||1,i=t.getElementsByTagName("div"),n=i.length-1;n>=0;n--)if(H.getDivLevels(i[n],t)>r)return!1;return!0},getElementPath:function e(t,r,i){for(var n=[];t.parentNode;){if(t.id&&!r&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(t.id)){n.unshift(t.tagName.toLowerCase()+"#"+t.id);break}if(i&&t===i){n.unshift(t.tagName.toLowerCase());break}if(t===document.body){n.unshift("body");break}n.unshift(t.tagName.toLowerCase()),t=t.parentNode}return n.join(" > ")},getClosestLi:function e(t){var r=function e(t,r){for(;t&&t!==document&&1===t.nodeType;t=t.parentNode)if(t.tagName.toLowerCase()===r)return t;return null};return r(t,"li")},getElementPosition:function e(t,r,i){function n(e){var t=e.parentNode;if(!t)return"";var r=p(e).getSameTypeSiblings(),i=r.length;if(1===i)return 0;for(var n=0,a=e;p(a).previousElementSibling().ele;a=p(a).previousElementSibling().ele,n++);return n}var a=C.heatmap.getClosestLi(t);if(!a)return null;var s=t.tagName.toLowerCase(),o=a.getElementsByTagName(s),l=o.length,c=[];if(l>1){for(var u=0;u<l;u++){var d=C.heatmap.getElementPath(o[u],i);d===r&&c.push(o[u])}if(c.length>1)return P(c,t)}return n(a)},setNotice:function e(t){C.is_heatmap_render_mode=!0,C.para.heatmap||(C.errorMsg="您SDK没有配置开启点击图，可能没有数据！"),t&&"http:"===t.slice(0,5)&&"https:"===location.protocol&&(C.errorMsg="您的当前页面是https的地址，神策分析环境也必须是https！"),C.para.heatmap_url||(C.para.heatmap_url=location.protocol+"//static.sensorsdata.cn/sdk/"+C.lib_version+"/heatmap.min.js")},getDomIndex:function e(t){if(!t.parentNode)return-1;for(var r=0,i=t.tagName,n=t.parentNode.children,a=0;a<n.length;a++)if(n[a].tagName===i){if(t===n[a])return r;r++}return-1},selector:function e(t,r){var i=t.parentNode&&9==t.parentNode.nodeType?-1:this.getDomIndex(t);return t.getAttribute&&t.getAttribute("id")&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(t.getAttribute("id"))&&(!C.para.heatmap||C.para.heatmap&&"not_use_id"!==C.para.heatmap.element_selector)&&!r?"#"+t.getAttribute("id"):t.tagName.toLowerCase()+(~i?":nth-of-type("+(i+1)+")":"")},getDomSelector:function e(t,r,i){if(!t||!t.parentNode||!t.parentNode.children)return!1;r=r&&r.join?r:[];var n=t.nodeName.toLowerCase();return t&&"body"!==n&&1==t.nodeType?(r.unshift(this.selector(t,i)),t.getAttribute&&t.getAttribute("id")&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(t.getAttribute("id"))&&C.para.heatmap&&"not_use_id"!==C.para.heatmap.element_selector&&!i?r.join(" > "):this.getDomSelector(t.parentNode,r,i)):(r.unshift("body"),r.join(" > "))},na:function e(){var t=document.documentElement.scrollLeft||window.pageXOffset;return parseInt(isNaN(t)?0:t,10)},i:function e(){var t=0;try{t=o.documentElement&&o.documentElement.scrollTop||m.pageYOffset,t=isNaN(t)?0:t}catch(e){t=0}return parseInt(t,10)},getBrowserWidth:function e(){var t=window.innerWidth||document.body.clientWidth;return isNaN(t)?0:parseInt(t,10)},getBrowserHeight:function e(){var t=window.innerHeight||document.body.clientHeight;return isNaN(t)?0:parseInt(t,10)},getScrollWidth:function e(){var t=parseInt(document.body.scrollWidth,10);return isNaN(t)?0:t},getEleDetail:function e(t){var r=this.getDomSelector(t),i=Fe({target:t});i.$element_selector=r?r:"",i.$element_path=C.heatmap.getElementPath(t,C.para.heatmap&&"not_use_id"===C.para.heatmap.element_selector);var n=C.heatmap.getElementPosition(t,i.$element_path,C.para.heatmap&&"not_use_id"===C.para.heatmap.element_selector);return j(n)&&(i.$element_position=n),i},getPointerEventProp:function e(t,i){function n(){var e=document.body.scrollLeft||document.documentElement.scrollLeft||0,t=document.body.scrollTop||document.documentElement.scrollTop||0;return{scrollLeft:e,scrollTop:t}}function a(e){if(document.documentElement.getBoundingClientRect){var t=e.getBoundingClientRect();return{targetEleX:t.left+n().scrollLeft||0,targetEleY:t.top+n().scrollTop||0}}}function s(e){return Number(Number(e).toFixed(3))}function r(e){var t=e.pageX||e.clientX+n().scrollLeft||e.offsetX+a(i).targetEleX||0,r=e.pageY||e.clientY+n().scrollTop||e.offsetY+a(i).targetEleY||0;return{$page_x:s(t),$page_y:s(r)}}return t?r(t):{}},start:function e(t,r,i,n,a){var s=f(n)?n:{},o=u(a)?a:u(n)?n:void 0;if(C.para.heatmap&&C.para.heatmap.collect_element&&!C.para.heatmap.collect_element(r))return!1;var l=this.getEleDetail(r);if(C.para.heatmap&&C.para.heatmap.custom_property){var c=C.para.heatmap.custom_property(r);f(c)&&(l=S(l,c))}l=S(l,this.getPointerEventProp(t,r),s),"a"===i&&C.para.heatmap&&C.para.heatmap.isTrackLink===!0?C.trackLink({event:t,target:r},"$WebClick",l):C.track("$WebClick",l,o)},hasElement:function e(t,r){var i;if(t.event){var n=t.event;i=n.path||n._getPath&&n._getPath()}else t.element&&(i=p(t.element).getParents());if(i&&y(i)&&i.length>0)for(var a=0;a<i.length;a++)if("object"==_typeof(i[a])&&1===i[a].nodeType&&r(i[a]))return i[a]},isStyleTag:function e(t,r){var i=["a","div","input","button","textarea"],n=["mark","/mark","strong","b","em","i","u","abbr","ins","del","s","sup"];return!(P(i,t)>-1)&&(!r||C.para.heatmap&&C.para.heatmap.collect_tags&&C.para.heatmap.collect_tags.div?!!(f(C.para.heatmap)&&f(C.para.heatmap.collect_tags)&&f(C.para.heatmap.collect_tags.div)&&y(C.para.heatmap.collect_tags.div.ignore_tags)&&P(C.para.heatmap.collect_tags.div.ignore_tags,t)>-1):P(n,t)>-1)},isCollectableDiv:function e(t,r){try{if(0===t.children.length)return!0;for(var i=0;i<t.children.length;i++)if(1===t.children[i].nodeType){var n=t.children[i].tagName.toLowerCase(),a=C.para&&C.para.heatmap&&C.para.heatmap.collect_tags&&C.para.heatmap.collect_tags.div&&C.para.heatmap.collect_tags.div.max_level;if(!("div"===n&&a>1||this.isStyleTag(n,r)))return!1;if(!this.isCollectableDiv(t.children[i],r))return!1}return!0}catch(e){C.log(e)}return!1},getCollectableParent:function e(t,r){try{var i=t.parentNode,n=i?i.tagName.toLowerCase():"";if("body"===n)return!1;var a=C.para&&C.para.heatmap&&C.para.heatmap.collect_tags&&C.para.heatmap.collect_tags.div&&C.para.heatmap.collect_tags.div.max_level;if(n&&"div"===n&&(a>1||this.isCollectableDiv(i,r)))return i;if(i&&this.isStyleTag(n,r))return this.getCollectableParent(i,r)}catch(e){C.log(e)}return!1},listenUrlChange:function e(t){t(),C.ee.spa.on("switch",function(){t()})},initScrollmap:function e(){if(!f(C.para.heatmap)||"default"!==C.para.heatmap.scroll_notice_map)return!1;var t=!0;C.para.scrollmap&&u(C.para.scrollmap.collect_url)&&this.listenUrlChange(function(){t=!!C.para.scrollmap.collect_url()});var r=function e(t){var r={};return r.timeout=t.timeout||1e3,r.func=t.func,r.hasInit=!1,r.inter=null,r.main=function(e,t){this.func(e,t),this.inter=null},r.go=function(e){var t={};this.inter||(t.$viewport_position=document.documentElement&&document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop||0,t.$viewport_position=Math.round(t.$viewport_position)||0,e?r.main(t,!0):this.inter=setTimeout(function(){r.main(t)},this.timeout))},r},i=r({timeout:1e3,func:function e(t,r){var i=document.documentElement&&document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop||0,n=new Date,a=n-this.current_time;(a>C.para.heatmap.scroll_delay_time&&i-t.$viewport_position!==0||r)&&(t.$url=k(),t.$title=document.title,t.$url_path=fe(),t.event_duration=Math.min(C.para.heatmap.scroll_event_duration,parseInt(a)/1e3),t.event_duration=t.event_duration<0?0:t.event_duration,C.track("$WebStay",t)),this.current_time=n}});i.current_time=new Date,at(window,"scroll",function(){return!!t&&void i.go()}),at(window,"unload",function(){return!!t&&void i.go("notime")})},initHeatmap:function e(){var a=this,s=!0;return!(!f(C.para.heatmap)||"default"!==C.para.heatmap.clickmap)&&(u(C.para.heatmap.collect_url)&&this.listenUrlChange(function(){s=!!C.para.heatmap.collect_url()}),"all"===C.para.heatmap.collect_elements?C.para.heatmap.collect_elements="all":C.para.heatmap.collect_elements="interact",void("all"===C.para.heatmap.collect_elements?at(document,"click",function(e){if(!s)return!1;var t=e||window.event;if(!t)return!1;var r=t.target||t.srcElement;if("object"!=_typeof(r))return!1;if("string"!=typeof r.tagName)return!1;var i=r.tagName.toLowerCase();if("body"===i||"html"===i)return!1;if(!r||!r.parentNode||!r.parentNode.children)return!1;var n=r.parentNode.tagName.toLowerCase();"a"===n||"button"===n?a.start(t,r.parentNode,n):a.start(t,r,i)}):at(document,"click",function(e){if(!s)return!1;var t=e||window.event;if(!t)return!1;var r=t.target||t.srcElement,i=C.heatmap.getTargetElement(r,e);i?a.start(t,i,i.tagName.toLowerCase()):d(r)&&"div"===r.tagName.toLowerCase()&&f(C.para.heatmap)&&C.para.heatmap.get_vtrack_config&&C.unlimitedDiv.events.length>0&&C.unlimitedDiv.isTargetEle(r)&&a.start(t,r,r.tagName.toLowerCase(),{$lib_method:"vtrack"})})))}},Yr={setOnlineState:function e(t){if(t===!0&&f(C.para.jsapp)&&"function"==typeof C.para.jsapp.getData){C.para.jsapp.isOnline=!0;var r=C.para.jsapp.getData();y(r)&&r.length>0&&w(r,function(e){Pe(e)&&C.sendState.realtimeSend(JSON.parse(e))})}else C.para.jsapp.isOnline=!1},autoTrackIsUsed:!1,isReady:function e(t){t()},getUtm:function e(){return x.campaignParams()},getStayTime:function e(){return(new Date-C._t)/1e3},setProfileLocal:function e(t){if(!A.isSupport())return C.setProfile(t),!1;if(!f(t)||D(t))return!1;var r=C.store.readObjectVal("sensorsdata_2015_jssdk_profile"),i=!1;if(f(r)&&!D(r)){for(var n in t)!(n in r&&r[n]!==t[n])&&n in r||(r[n]=t[n],i=!0);i&&(C.store.saveObjectVal("sensorsdata_2015_jssdk_profile",r),C.setProfile(t))}else C.store.saveObjectVal("sensorsdata_2015_jssdk_profile",t),C.setProfile(t)},setInitReferrer:function e(){var t=O();C.setOnceProfile({_init_referrer:t,_init_referrer_host:x.pageProp.referrer_host})},setSessionReferrer:function e(){var t=O();C.store.setSessionPropsOnce({_session_referrer:t,_session_referrer_host:x.pageProp.referrer_host})},setDefaultAttr:function e(){x.register({_current_url:location.href,_referrer:O(),_referring_host:x.pageProp.referrer_host})},trackHeatMap:function e(t,r,i){if("object"==_typeof(t)&&t.tagName){var n=t.tagName.toLowerCase(),a=t.parentNode.tagName.toLowerCase(),s=C.para.heatmap&&C.para.heatmap.track_attr?C.para.heatmap.track_attr:["data-sensors-click"];"button"===n||"a"===n||"a"===a||"button"===a||"input"===n||"textarea"===n||he(t,s)||H.start(null,t,n,r,i)}},trackAllHeatMap:function e(t,r,i){if("object"==_typeof(t)&&t.tagName){var n=t.tagName.toLowerCase();H.start(null,t,n,r,i)}},autoTrackSinglePage:function e(t,r){function i(){var e=x.campaignParams(),i={};return w(e,function(e,t,r){(" "+C.source_channel_standard+" ").indexOf(" "+t+" ")!==-1?i["$"+t]=r[t]:i[t]=r[t]}),i}function n(e,t){C.track("$pageview",S({$referrer:a,$url:k(),$url_path:fe(),$title:document.title},e,i()),t),a=k()}var a;a=this.autoTrackIsUsed?x.pageProp.url:x.pageProp.referrer,t=f(t)?t:{};var s=!t.not_set_profile;if(t.not_set_profile&&delete t.not_set_profile,n(t,r),this.autoTrackSinglePage=n,C.is_first_visitor&&s){var o={};C.para.preset_properties.search_keyword_baidu&&Ye(document.referrer)&&ze()&&(o.$search_keyword_id=Wr.id(),o.$search_keyword_id_type=Wr.type(),o.$search_keyword_id_hash=ve(o.$search_keyword_id)),C.setOnceProfile(S({$first_visit_time:new Date,$first_referrer:O(),$first_browser_language:v(navigator.language)?navigator.language.toLowerCase():"取值异常",$first_browser_charset:"string"==typeof document.charset?document.charset.toUpperCase():"取值异常",$first_traffic_source_type:tt(),$first_search_keyword:Qe()},i(),o)),C.is_first_visitor=!1}},autoTrackWithoutProfile:function e(t,r){t=f(t)?t:{},this.autoTrack(S(t,{not_set_profile:!0}),r)},autoTrack:function e(t,r){t=f(t)?t:{};var i=x.campaignParams(),n={};w(i,function(e,t,r){(" "+C.source_channel_standard+" ").indexOf(" "+t+" ")!==-1?n["$"+t]=r[t]:n[t]=r[t]});var a=!t.not_set_profile;t.not_set_profile&&delete t.not_set_profile;var s=location.href;if(C.para.is_single_page&&V(function(){var e=O(s,!0);C.track("$pageview",S({$referrer:e,$url:k(),$url_path:fe(),$title:document.title},n,t),r),s=k()}),C.track("$pageview",S({$referrer:O(null,!0),$url:k(),$url_path:fe(),$title:document.title},n,t),r),C.is_first_visitor&&a){var o={};C.para.preset_properties.search_keyword_baidu&&Ye(document.referrer)&&ze()&&(o.$search_keyword_id=Wr.id(),o.$search_keyword_id_type=Wr.type(),o.$search_keyword_id_hash=ve(o.$search_keyword_id)),C.setOnceProfile(S({$first_visit_time:new Date,$first_referrer:O(null,!0),$first_browser_language:v(navigator.language)?navigator.language.toLowerCase():"取值异常",$first_browser_charset:"string"==typeof document.charset?document.charset.toUpperCase():"取值异常",$first_traffic_source_type:tt(),$first_search_keyword:Qe()},n,o)),C.is_first_visitor=!1}this.autoTrackIsUsed=!0},getAnonymousID:function e(){return D(C.store._state)?"请先初始化SDK":C.store._state._first_id||C.store._state.first_id||C.store._state._distinct_id||C.store._state.distinct_id},setPlugin:function e(t){return!!f(t)&&void w(t,function(e,t){u(e)&&(f(window.SensorsDataWebJSSDKPlugin)&&window.SensorsDataWebJSSDKPlugin[t]?e(window.SensorsDataWebJSSDKPlugin[t]):C.log(t+"没有获取到,请查阅文档，调整"+t+"的引入顺序！"))})},useModulePlugin:function e(){C.use.apply(C,arguments)},useAppPlugin:function e(){this.setPlugin.apply(this,arguments)}},Gr={state:0,historyState:[],stateType:{1:"1-init未开始",2:"2-init开始",3:"3-store完成"},getState:function e(){return this.historyState.join("\n")},setState:function e(t){String(t)in this.stateType&&(this.state=t),this.historyState.push(this.stateType[t])}},Qr={__proto__:null,addReferrerHost:ct,addPropsHook:ut,initPara:dt,setInitVar:_t,enableLocalLog:ft,disableLocalLog:gt,quick:ht,use:mt,track:vt,bind:yt,unbind:wt,trackLink:St,trackLinks:bt,setItem:kt,deleteItem:Pt,setProfile:Dt,setOnceProfile:jt,appendProfile:Nt,incrementProfile:Ot,deleteProfile:Ct,unsetProfile:$t,identify:At,trackSignup:xt,registerPage:Lt,clearAllRegister:It,clearPageRegister:Et,register:Jt,registerOnce:Ht,registerSession:Ut,registerSessionOnce:Bt,login:Kt,loginWithKey:Mt,logout:Wt,getPresetProperties:Vt,iOSWebClickPolyfill:qt,readyState:Gr,para_default:Er,log:N,debug:Ur,IDENTITY_KEY:Mr},ei=function e(){this._events=[],this.pendingEvents=[]};ei.prototype={emit:function e(t){var r=[].slice.call(arguments,1);w(this._events,function(e){e.type===t&&e.callback.apply(e.context,r)}),this.pendingEvents.push({type:t,data:r}),this.pendingEvents.length>20?this.pendingEvents.shift():null},on:function e(t,r,i,n){"function"==typeof r&&(this._events.push({type:t,callback:r,context:i||this}),n=n!==!1,this.pendingEvents.length>0&&n&&w(this.pendingEvents,function(e){e.type===t&&r.apply(i,e.data)}))},tempAdd:function e(t,r){if(r&&t)return this.emit(t,r)},isReady:function e(){}};var ti={__proto__:null,parseSuperProperties:Me,searchConfigData:We,strip_empty_properties:Ve,getCurrentDomain:qe,getEleInfo:Fe,isBaiduTraffic:ze,getReferrerEqid:Xe,getReferrerEqidType:Ze,getBaiduKeyword:Wr,isReferralTraffic:Ye,getReferrer:O,getKeywordFromReferrer:Qe,getWxAdIdFromUrl:et,getReferSearchEngine:Ge,getSourceFromReferrer:tt,info:x,ajax:nt,getElementContent:it,cookie:L,addEvent:at,EventEmitterSa:ei,encrypt:Ke,decryptIfNeeded:Re},ri={};ri.buildData=function(e){var t={identities:{},distinct_id:C.store.getDistinctId(),lib:{$lib:"js",$lib_method:"code",$lib_version:String(C.lib_version)},properties:{}};return f(e)&&f(e.identities)&&!D(e.identities)?S(t.identities,e.identities):S(t.identities,I._state.identities),f(e)&&f(e.properties)&&!D(e.properties)&&(e.properties.$lib_detail&&(t.lib.$lib_detail=e.properties.$lib_detail,delete e.properties.$lib_detail),e.properties.$lib_method&&(t.lib.$lib_method=e.properties.$lib_method,delete e.properties.$lib_method)),S(t,C.store.getUnionId(),e),Xr.stage.process("addCustomProps",t),f(e.properties)&&!D(e.properties)&&S(t.properties,e.properties),e.type&&"profile"===e.type.slice(0,7)||(t.properties=S({},x.properties(),I.getProps(),I.getSessionProps(),x.currentProps,t.properties),C.para.preset_properties.latest_referrer&&!v(t.properties.$latest_referrer)&&(t.properties.$latest_referrer="取值异常"),C.para.preset_properties.latest_search_keyword&&!v(t.properties.$latest_search_keyword)&&(C.para.preset_properties.search_keyword_baidu&&v(t.properties.$search_keyword_id)&&j(t.properties.$search_keyword_id_hash)&&v(t.properties.$search_keyword_id_type)||(t.properties.$latest_search_keyword="取值异常")),C.para.preset_properties.latest_traffic_source_type&&!v(t.properties.$latest_traffic_source_type)&&(t.properties.$latest_traffic_source_type="取值异常"),C.para.preset_properties.latest_landing_page&&!v(t.properties.$latest_landing_page)&&(t.properties.$latest_landing_page="取值异常"),"not_collect"===C.para.preset_properties.latest_wx_ad_click_id?(delete t.properties._latest_wx_ad_click_id,delete t.properties._latest_wx_ad_hash_key,delete t.properties._latest_wx_ad_callbacks):C.para.preset_properties.latest_wx_ad_click_id&&!v(t.properties._latest_wx_ad_click_id)&&(t.properties._latest_wx_ad_click_id="取值异常",t.properties._latest_wx_ad_hash_key="取值异常",t.properties._latest_wx_ad_callbacks="取值异常"),v(t.properties._latest_wx_ad_click_id)&&(t.properties.$url=k())),t.properties.$time&&Q(t.properties.$time)?(t.time=1*t.properties.$time,delete t.properties.$time):t.time=1*new Date,C.vtrackBase.addCustomProps(t),Me(t),qr.checkIsAddSign(t),qr.checkIsFirstTime(t),C.addReferrerHost(t),C.addPropsHook(t),Xr.stage.process("formatData",t),t},ri.sendData=function(e,t){var r=We(e.properties);C.para.debug_mode===!0?(C.log(e),C.saEvent.debugPath(JSON.stringify(e),t)):C.sendState.getSendCall(e,r,t)},ri.encodeTrackData=function(e){var t=X(e),r="crc="+me(t);return"data="+encodeURIComponent(t)+"&ext="+encodeURIComponent(r)};var ii=function e(t){this.callback=t.callback,this.img=document.createElement("img"),this.img.width=1,this.img.height=1,C.para.img_use_crossorigin&&(this.img.crossOrigin="anonymous"),this.data=t.data,this.server_url=Ft(t.server_url,t.data)};ii.prototype.start=function(){var e=this;C.para.ignore_oom&&(this.img.onload=function(){this.onload=null,this.onerror=null,this.onabort=null,e.isEnd()},this.img.onerror=function(){this.onload=null,this.onerror=null,this.onabort=null,e.isEnd()},this.img.onabort=function(){this.onload=null,this.onerror=null,this.onabort=null,e.isEnd()}),this.img.src=this.server_url},ii.prototype.lastClear=function(){var e=_e();void 0!==e.ie?this.img.src="about:blank":this.img.src=""};var ni=function e(t){this.callback=t.callback,this.server_url=t.server_url,this.data=zt(t.data)};ni.prototype.start=function(){var t=this;nt({url:this.server_url,type:"POST",data:this.data,credentials:!1,timeout:C.para.datasend_timeout,cors:!0,success:function e(){t.isEnd()},error:function e(){t.isEnd()}})};var ai=function e(t){this.callback=t.callback,this.server_url=Ft(t.server_url,t.data),this.data=zt(t.data)};ai.prototype.start=function(){var e=this;"object"==(typeof navigator==="undefined"?"undefined":_typeof(navigator))&&"function"==typeof navigator.sendBeacon&&navigator.sendBeacon(this.server_url,this.data),setTimeout(function(){e.isEnd()},40)};var si={};si.getSendCall=function(e,t,r){if(C.is_heatmap_render_mode)return!1;if(C.readyState.state<3)return C.log("初始化没有完成"),!1;e._track_id=Number(String(l()).slice(2,5)+String(l()).slice(2,4)+String((new Date).getTime()).slice(-4)),e._flush_time=(new Date).getTime();var i=e;e=JSON.stringify(e);var n={data:i,config:t,callback:r};return C.events.tempAdd("send",i),!C.para.app_js_bridge&&C.para.batch_send&&A.isSupport()&&localStorage.length<100?(C.log(i),C.batchSend.add(n.data),!1):("item_set"===i.type||"item_delete"===i.type?this.prepareServerUrl(n):C.bridge.dataSend(n,this,r),void C.log(i))},si.prepareServerUrl=function(e){if("object"==_typeof(e.config)&&e.config.server_url)this.sendCall(e,e.config.server_url,e.callback);else if(y(C.para.server_url)&&C.para.server_url.length)for(var t=0;t<C.para.server_url.length;t++)this.sendCall(e,C.para.server_url[t]);else"string"==typeof C.para.server_url&&""!==C.para.server_url?this.sendCall(e,C.para.server_url,e.callback):C.log("当前 server_url 为空或不正确，只在控制台打印日志，network 中不会发数据，请配置正确的 server_url！")},si.sendCall=function(e,t,r){var i={server_url:t,data:JSON.stringify(e.data),callback:r,config:e.config};f(C.para.jsapp)&&!C.para.jsapp.isOnline&&"function"==typeof C.para.jsapp.setData?(delete i.callback,i=JSON.stringify(i),C.para.jsapp.setData(i)):this.realtimeSend(i)},si.realtimeSend=function(e){var t=Yt(e);t.start()};var oi="sawebjssdk-",li="tab-sawebjssdk-";Gt.prototype={batchInterval:function e(){""===this.serverUrl&&this.getServerUrl(),this.hasTabStorage||(this.generateTabStorage(),this.hasTabStorage=!0);var t=this;t.timer=setTimeout(function(){t.updateExpireTime(),t.recycle(),t.send(),clearTimeout(t.timer),t.batchInterval()},C.para.batch_send.send_interval)},getServerUrl:function e(){return v(C.para.server_url)&&""!==C.para.server_url||y(C.para.server_url)&&C.para.server_url.length?void(this.serverUrl=y(C.para.server_url)?C.para.server_url[0]:C.para.server_url):C.log("当前 server_url 为空或不正确，只在控制台打印日志，network 中不会发数据，请配置正确的 server_url！")},send:function e(){if(!(this.sendTimeStamp&&_()-this.sendTimeStamp<C.para.batch_send.datasend_timeout)){var t=A.get(this.tabKey);if(t&&(this.sendTimeStamp=_(),t=g(t)||this.generateTabStorageVal(),t.data.length)){for(var r=[],i=0;i<t.data.length;i++)r.push(C.store.readObjectVal(t.data[i]));this.request(r,t.data)}}},updateExpireTime:function e(){var t=A.get(this.tabKey);t&&(t=g(t)||this.generateTabStorageVal(),t.expireTime=_()+2*C.para.batch_send.send_interval,t.serverUrl=this.serverUrl,A.set(this.tabKey,JSON.stringify(t)))},request:function e(t,r){var i=this;F({url:this.serverUrl,type:"POST",data:"data_list="+encodeURIComponent(X(JSON.stringify(t))),credentials:!1,timeout:C.para.batch_send.datasend_timeout,cors:!0,success:function e(){i.remove(r),i.sendTimeStamp=0},error:function e(){i.sendTimeStamp=0}})},remove:function e(t){var r=A.get(this.tabKey);if(r){for(var i=(g(r)||this.generateTabStorageVal()).data,n=0;n<t.length;n++){var a=P(i,t[n]);a>-1&&i.splice(a,1),A.remove(t[n])}A.set(this.tabKey,JSON.stringify(this.generateTabStorageVal(i)))}},add:function e(t){var r=oi+String(l()),i=A.get(this.tabKey);null===i?(this.tabKey=li+String(l()),i=this.generateTabStorageVal()):i=g(i)||this.generateTabStorageVal(),i.data.push(r),i.expireTime=_()+2*C.para.batch_send.send_interval,A.set(this.tabKey,JSON.stringify(i)),C.store.saveObjectVal(r,t),"track_signup"!==t.type&&"$pageview"!==t.event||this.sendImmediately()},generateTabStorage:function e(){this.tabKey=li+String(l()),A.set(this.tabKey,JSON.stringify(this.generateTabStorageVal()))},generateTabStorageVal:function e(t){return t=t||[],{data:t,expireTime:_()+2*C.para.batch_send.send_interval,serverUrl:this.serverUrl}},sendImmediately:function e(){this.send()},recycle:function e(){for(var t={},r=1e4,i="sajssdk-lock-get-",n=0;n<localStorage.length;n++){var a=localStorage.key(n),s=this;if(0===a.indexOf(li)){for(var o=g(A.get(a))||this.generateTabStorageVal(),l=0;l<o.data.length;l++)t[o.data[l]]=!0;if(_()>o.expireTime&&this.serverUrl===o.serverUrl){var c=new R(i);c.get(a,r,1e3,function(e){if(e){null===A.get(s.tabKey)&&s.generateTabStorage();var t=g(e)||s.generateTabStorageVal();A.set(s.tabKey,JSON.stringify(s.generateTabStorageVal((g(A.get(s.tabKey))||this.generateTabStorageVal()).data.concat(t.data))))}})}}else if(0===a.indexOf(i)){var u=g(A.get(a))||{expireTime:0};_()-u.expireTime>r&&A.remove(a)}}for(var d=0;d<localStorage.length;d++){var p=localStorage.key(d);0!==p.indexOf(oi)||t[p]||A.remove(p)}}};var ci=new Gt,ui={bridge_info:{touch_app_bridge:!1,verify_success:!1,platform:""},is_verify_success:!1,initPara:function e(){var t={is_send:!0,white_list:[],is_mui:!1};"object"==_typeof(C.para.app_js_bridge)?C.para.app_js_bridge=S({},t,C.para.app_js_bridge):C.para.use_app_track===!0||C.para.app_js_bridge===!0||"only"===C.para.use_app_track?(C.para.use_app_track_is_send!==!1&&"only"!==C.para.use_app_track||(t.is_send=!1),C.para.app_js_bridge=S({},t)):"mui"===C.para.use_app_track&&(t.is_mui=!0,C.para.app_js_bridge=S({},t)),C.para.app_js_bridge.is_send===!1&&C.log("设置了 is_send:false,如果打通失败，数据将被丢弃！")},initState:function e(){function t(e){function t(e){var t={hostname:"",project:""};try{t.hostname=s(e).hostname,t.project=s(e).searchParams.get("project")||"default"}catch(e){C.log(e)}return t}var r=t(e),i=t(C.para.server_url);if(r.hostname===i.hostname&&r.project===i.project)return!0;if(C.para.app_js_bridge.white_list.length>0)for(var n=0;n<C.para.app_js_bridge.white_list.length;n++){var a=t(C.para.app_js_bridge.white_list[n]);if(a.hostname===r.hostname&&a.project===r.project)return!0}return!1}if(f(C.para.app_js_bridge)&&!C.para.app_js_bridge.is_mui)if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&f(window.SensorsData_iOS_JS_Bridge)&&window.SensorsData_iOS_JS_Bridge.sensorsdata_app_server_url)t(window.SensorsData_iOS_JS_Bridge.sensorsdata_app_server_url)&&(C.bridge.is_verify_success=!0);else if(f(window.SensorsData_APP_New_H5_Bridge)&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_get_server_url&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_track){var r=window.SensorsData_APP_New_H5_Bridge.sensorsdata_get_server_url();r&&t(r)&&(C.bridge.is_verify_success=!0)}this.bridge_info=this.initDefineBridgeInfo()},initDefineBridgeInfo:function e(){var t={touch_app_bridge:!0,verify_success:!1,platform:""};return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage&&f(window.SensorsData_iOS_JS_Bridge)&&window.SensorsData_iOS_JS_Bridge.sensorsdata_app_server_url?(t.platform="ios",C.bridge.is_verify_success?t.verify_success="success":t.verify_success="fail"):f(window.SensorsData_APP_New_H5_Bridge)&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_get_server_url&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_track?(t.platform="android",C.bridge.is_verify_success?t.verify_success="success":t.verify_success="fail"):"object"==(typeof SensorsData_APP_JS_Bridge==="undefined"?"undefined":_typeof(SensorsData_APP_JS_Bridge))&&(SensorsData_APP_JS_Bridge.sensorsdata_verify&&SensorsData_APP_JS_Bridge.sensorsdata_visual_verify||SensorsData_APP_JS_Bridge.sensorsdata_track)?(t.platform="android",SensorsData_APP_JS_Bridge.sensorsdata_verify&&SensorsData_APP_JS_Bridge.sensorsdata_visual_verify?SensorsData_APP_JS_Bridge.sensorsdata_visual_verify(JSON.stringify({server_url:C.para.server_url}))?t.verify_success="success":t.verify_success="fail":t.verify_success="success"):!/sensors-verify/.test(navigator.userAgent)&&!/sa-sdk-ios/.test(navigator.userAgent)||window.MSStream?t.touch_app_bridge=!1:(t.platform="ios",C.bridge.iOS_UA_bridge()?t.verify_success="success":t.verify_success="fail"),t},iOS_UA_bridge:function e(){if(/sensors-verify/.test(navigator.userAgent)){var t=navigator.userAgent.match(/sensors-verify\/([^\s]+)/);if(t&&t[0]&&"string"==typeof t[1]&&2===t[1].split("?").length){t=t[1].split("?");var r=null,i=null;try{r=s(C.para.server_url).hostname,i=s(C.para.server_url).searchParams.get("project")||"default"}catch(e){C.log(e)}return!(!r||r!==t[0]||!i||i!==t[1])}return!1}return!!/sa-sdk-ios/.test(navigator.userAgent)},dataSend:function e(t,r,i){function n(e){var t=JSON.stringify(S({server_url:C.para.server_url},e));return t=t.replaceAll(/\r\n/g,""),t=encodeURIComponent(t),"sensorsanalytics://trackEvent?event="+t}var a=t.data;if(f(C.para.app_js_bridge)&&!C.para.app_js_bridge.is_mui){if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage&&f(window.SensorsData_iOS_JS_Bridge)&&window.SensorsData_iOS_JS_Bridge.sensorsdata_app_server_url)C.bridge.is_verify_success?(window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage(JSON.stringify({callType:"app_h5_track",data:S({server_url:C.para.server_url},a)})),"function"==typeof i&&i()):C.para.app_js_bridge.is_send?(C.debug.apph5({data:a,step:"4.1",output:"all"}),r.prepareServerUrl(t)):"function"==typeof i&&i();else if(f(window.SensorsData_APP_New_H5_Bridge)&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_get_server_url&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_track)C.bridge.is_verify_success?(SensorsData_APP_New_H5_Bridge.sensorsdata_track(JSON.stringify(S({server_url:C.para.server_url},a))),"function"==typeof i&&i()):C.para.app_js_bridge.is_send?(C.debug.apph5({data:a,step:"4.2",output:"all"}),r.prepareServerUrl(t)):"function"==typeof i&&i();else if("object"==(typeof SensorsData_APP_JS_Bridge==="undefined"?"undefined":_typeof(SensorsData_APP_JS_Bridge))&&(SensorsData_APP_JS_Bridge.sensorsdata_verify||SensorsData_APP_JS_Bridge.sensorsdata_track))SensorsData_APP_JS_Bridge.sensorsdata_verify?SensorsData_APP_JS_Bridge.sensorsdata_verify(JSON.stringify(S({server_url:C.para.server_url},a)))?"function"==typeof i&&i():C.para.app_js_bridge.is_send?(C.debug.apph5({data:a,step:"3.1",output:"all"}),r.prepareServerUrl(t)):"function"==typeof i&&i():(SensorsData_APP_JS_Bridge.sensorsdata_track(JSON.stringify(S({server_url:C.para.server_url},a))),"function"==typeof i&&i());else if(!/sensors-verify/.test(navigator.userAgent)&&!/sa-sdk-ios/.test(navigator.userAgent)||window.MSStream)f(C.para.app_js_bridge)&&C.para.app_js_bridge.is_send===!0?(C.debug.apph5({data:a,step:"2",output:"all"}),r.prepareServerUrl(t)):"function"==typeof i&&i();else{var s=null;if(C.bridge.iOS_UA_bridge()){s=document.createElement("iframe");var o=n(a);s.setAttribute("src",o),document.documentElement.appendChild(s),s.parentNode.removeChild(s),s=null,"function"==typeof i&&i()}else C.para.app_js_bridge.is_send?(C.debug.apph5({data:a,step:"3.2",output:"all"}),r.prepareServerUrl(t)):"function"==typeof i&&i()}}else f(C.para.app_js_bridge)&&C.para.app_js_bridge.is_mui?f(window.plus)&&window.plus.SDAnalytics&&window.plus.SDAnalytics.trackH5Event?(window.plus.SDAnalytics.trackH5Event(t),"function"==typeof i&&i()):f(C.para.app_js_bridge)&&C.para.app_js_bridge.is_send===!0?r.prepareServerUrl(t):"function"==typeof i&&i():(C.debug.apph5({data:a,step:"1",output:"code"}),r.prepareServerUrl(t))},app_js_bridge_v1:function e(){function t(e){n=e,Pe(n)&&(n=JSON.parse(n)),a&&(a(n),a=null,n=null)}function r(){"object"==_typeof(window.SensorsData_APP_JS_Bridge)&&window.SensorsData_APP_JS_Bridge.sensorsdata_call_app&&(n=SensorsData_APP_JS_Bridge.sensorsdata_call_app(),Pe(n)&&(n=JSON.parse(n)))}function i(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var e=document.createElement("iframe");e.setAttribute("src","sensorsanalytics://getAppInfo"),document.documentElement.appendChild(e),e.parentNode.removeChild(e),e=null}}var n=null,a=null;window.sensorsdata_app_js_bridge_call_js=function(e){t(e)},C.getAppStatus=function(e){return i(),r(),e?void(null===n?a=e:(e(n),n=null)):n}},supportAppCallJs:function e(){window.sensorsdata_app_call_js=function(e,t){if(e in window.sensorsdata_app_call_js.modules)return window.sensorsdata_app_call_js.modules[e](t)},window.sensorsdata_app_call_js.modules={}}},di=function e(t){this.list={},this.type=t.type,this.app_call_js=u(t.app_call_js)?t.app_call_js:function(){},this.init()};di.prototype.init=function(){var t=this;window.sensorsdata_app_call_js.modules[this.type]||(window.sensorsdata_app_call_js.modules[this.type]=function(e){return t.app_call_js(e)})},di.prototype.jsCallApp=function(e){var t={callType:this.type,data:e};if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage)window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage(JSON.stringify(t));else{if(!f(window.SensorsData_APP_New_H5_Bridge)||!window.SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app)return C.log("数据发往App失败，App没有暴露bridge"),!1;window.SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app(JSON.stringify(t))}},di.prototype.getAppData=function(){return f(window.SensorsData_APP_New_H5_Bridge)?u(window.SensorsData_APP_New_H5_Bridge[this.type])?window.SensorsData_APP_New_H5_Bridge[this.type]():window.SensorsData_APP_New_H5_Bridge[this.type]:f(window.SensorsData_APP_JS_Bridge)&&u(window.SensorsData_APP_JS_Bridge[this.type])?window.SensorsData_APP_JS_Bridge[this.type]():void 0},di.prototype.hasAppBridge=function(){return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage?"ios":f(window.SensorsData_APP_New_H5_Bridge)&&window.SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app?"android":(C.log("App端bridge未暴露"),!1)},di.prototype.requestToApp=function(e){function t(){var e=(new Date).getTime().toString(16),t=String(l()).replace(".","").slice(1,8);return e+"-"+t}var r=this,i=f(e.data)?e.data:{};u(e.callback)||(e.callback=function(){}),f(e.timeout)&&j(e.timeout.time)&&(u(e.timeout.callback)||(e.timeout.callback=function(){}),e.timer=setTimeout(function(){e.timeout.callback(),delete r.list[n]},e.timeout.time));var n=t();this.list[n]=e;var a={callType:this.type,data:i};if(a.data.message_id=n,window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.sensorsdataNativeTracker&&window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage)window.webkit.messageHandlers.sensorsdataNativeTracker.postMessage(JSON.stringify(a));else{if(!f(window.SensorsData_APP_New_H5_Bridge)||!window.SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app)return C.log("数据发往App失败，App没有暴露bridge"),!1;window.SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app(JSON.stringify(a))}},di.prototype["double"]=function(e){if(e.message_id){var t=this.list[e.message_id];t&&(t.timer&&clearTimeout(t.timer),t.callback(e),delete this.list[e.message_id])}};var U={};U.initUrl=function(){var e,t={server_url:{project:"",host:""},page_url:{host:"",pathname:""}};if(!v(C.para.server_url))return C.log("----vcollect---server_url必须为字符串"),!1;try{e=s(C.para.server_url),t.server_url.project=e.searchParams.get("project")||"default",t.server_url.host=e.host}catch(e){return C.log("----vcollect---server_url解析异常",e),!1}var r;try{r=s(location.href),t.page_url.host=r.hostname,t.page_url.pathname=r.pathname}catch(e){return C.log("----vcollect---页面地址解析异常",e),!1}return t},U.isDiv=function(e){if(e.element_path){var t=e.element_path.split(">"),r=h(t.pop());if("div"!==r.slice(0,3))return!1}return!0},U.configIsMatchNew=function(e,t){if(v(e.$element_selector)&&v(t.element_selector)){if("element_selector"===t.element_field&&"equal"===t["function"])return e.$element_selector===t.element_selector;if("element_selector"===t.element_field&&"contain"===t["function"])return e.$element_selector.indexOf(t.element_selector)>-1}if(v(e.$element_path)&&v(t.element_path)){if("element_path"===t.element_field&&"equal"===t["function"])return e.$element_path===t.element_path;if("element_path"===t.element_field&&"contain"===t["function"])return e.$element_path.indexOf(t.element_path)>-1}return!1},U.configIsMatch=function(e,t){return(!t.limit_element_content||t.element_content===e.$element_content)&&(!t.limit_element_position||t.element_position===String(e.$element_position))&&(t.element_field&&t["function"]?U.configIsMatchNew(e,t):U.configIsMatchOldVersion(e,t))},U.configIsMatchOldVersion=function(e,t){if(!t.element_path)return!1;if(void 0!==e.$element_position){if(t.element_path!==e.$element_path)return!1}else if(C.vtrackBase.isDiv({element_path:t.element_path})){if(e.$element_path.indexOf(t.element_path)<0)return!1}else if(t.element_path!==e.$element_path)return!1;return!0},U.filterConfig=function(t,e,r){var i=[];if(!r){var n=U.initUrl();if(!n)return[];r=n.page_url}return"$WebClick"===t.event&&w(e,function(e){f(e)&&("webclick"===e.event_type||"appclick"===e.event_type)&&f(e.event)&&e.event.url_host===r.host&&e.event.url_path===r.pathname&&U.configIsMatch(t.properties,e.event)&&i.push(e)}),i},U.getPropElInLi=function(e,t){if(!(e&&d(e)&&v(t)))return null;if("li"!==e.tagName.toLowerCase())return null;var r,i=C.heatmap.getDomSelector(e);if(i){r=i+t;var n=se(r);return n?n:null}return C.log("----custom---获取同级属性元素失败，selector信息异常",i,t),null},U.getProp=function(t,e){if(!f(t))return!1;if(!(v(t.name)&&t.name.length>0))return C.log("----vcustom----属性名不合法,属性抛弃",t.name),!1;var r,i,n={};if("content"===t.method){var a;if(v(t.element_selector)&&t.element_selector.length>0)a=se(t.element_selector);else{if(!e||!v(t.list_selector))return C.log("----vcustom----属性配置异常，属性抛弃",t.name),!1;var s=se(e.properties.$element_selector);if(!s)return C.log("----vcustom----点击元素获取异常，属性抛弃",t.name),!1;var o=C.heatmap.getClosestLi(s);a=U.getPropElInLi(o,t.list_selector)}if(!a||!d(a))return C.log("----vcustom----属性元素获取失败，属性抛弃",t.name),!1;if("input"===a.tagName.toLowerCase())r=a.value||"";else if("select"===a.tagName.toLowerCase()){var l=a.selectedIndex;j(l)&&d(a[l])&&(r=it(a[l],"select"))}else r=it(a,a.tagName.toLowerCase());if(t.regular){try{i=new RegExp(t.regular).exec(r)}catch(e){return C.log("----vcustom----正则处理失败，属性抛弃",t.name),!1}if(null===i)return C.log("----vcustom----属性规则处理，未匹配到结果,属性抛弃",t.name),!1;if(!y(i)||!v(i[0]))return C.log("----vcustom----正则处理异常，属性抛弃",t.name,i),!1;r=i[0]}if("STRING"===t.type)n[t.name]=r;else if("NUMBER"===t.type){if(r.length<1)return C.log("----vcustom----未获取到数字内容，属性抛弃",t.name,r),!1;if(isNaN(Number(r)))return C.log("----vcustom----数字类型属性转换失败，属性抛弃",t.name,r),!1;n[t.name]=Number(r)}return n}return C.log("----vcustom----属性不支持此获取方式",t.name,t.method),!1},U.getAssignConfigs=function(t,e){var r=U.initUrl();if(!r||!r.page_url)return[];if(!f(e))return[];var i=[];return e.events=e.events||e.eventList,y(e.events)&&e.events.length>0?(w(e.events,function(e){f(e)&&f(e.event)&&e.event.url_host===r.page_url.host&&e.event.url_path===r.page_url.pathname&&t(e)&&i.push(e)}),i):[]},U.addCustomProps=function(e){if("success"===C.bridge.bridge_info.verify_success){var t=C.vapph5collect.customProp.geth5Props(JSON.parse(JSON.stringify(e)));f(t)&&!D(t)&&(e.properties=S(e.properties,t))}var r=C.vtrackcollect.customProp.getVtrackProps(JSON.parse(JSON.stringify(e)));return f(r)&&!D(r)&&(e.properties=S(e.properties,r)),e},U.init=function(){C.vtrackcollect.init(),"success"===C.bridge.bridge_info.verify_success&&C.vapph5collect.init()};var pi={events:[],init:function e(t){this.filterWebClickEvents(t)},filterWebClickEvents:function e(t){this.events=C.vtrackcollect.getAssignConfigs(function(e){return!(!f(e)||e.event.unlimited_div!==!0||"webclick"!==e.event_type)},t)},isTargetEle:function e(t){var r=C.heatmap.getEleDetail(t);if(!f(r)||!v(r.$element_path))return!1;for(var i=0;i<this.events.length;i++)if(f(this.events[i])&&f(this.events[i].event)&&C.vtrackcollect.configIsMatch(r,this.events[i].event))return!0;return!1}},_i={events:[],configSwitch:!1,collectAble:function e(){return this.configSwitch&&f(C.para.heatmap)&&C.para.heatmap.get_vtrack_config},updateEvents:function e(t){this.events=C.vtrackcollect.getAssignConfigs(function(e){return!!(f(e)&&y(e.properties)&&e.properties.length>0)},t),this.events.length?this.configSwitch=!0:this.configSwitch=!1},getVtrackProps:function e(t){var r={};return this.collectAble()?("$WebClick"===t.event&&(r=this.clickCustomPropMaker(t,this.events)),r):{}},clickCustomPropMaker:function e(r,t,i){var n=this;i=i||this.filterConfig(r,t,C.vtrackcollect.url_info.page_url);var a={};return i.length?(w(i,function(e){y(e.properties)&&e.properties.length>0&&w(e.properties,function(e){var t=n.getProp(e,r);f(t)&&S(a,t)})}),a):{}},getProp:U.getProp,getPropElInLi:U.getPropElInLi,filterConfig:U.filterConfig},fi={unlimitedDiv:pi,config:{},storageEnable:!0,storage_name:"webjssdkvtrackcollect",para:{session_time:18e5,timeout:5e3,update_interval:18e5},url_info:{},timer:null,update_time:null,customProp:_i,initUrl:function e(){var t=U.initUrl();if(t){var r;try{r=new M(C.para.server_url),r._values.Path="/config/visualized/Web.conf",t.api_url=r.getUrl()}catch(e){return C.log("----vtrackcollect---API地址解析异常",e),!1}this.url_info=t}return t},init:function e(){if(!f(C.para.heatmap)||!C.para.heatmap.get_vtrack_config)return!1;if(A.isSupport()||(this.storageEnable=!1),!this.initUrl())return C.log("----vtrackcustom----初始化失败，url信息解析失败"),!1;if(this.storageEnable){var t=C.store.readObjectVal(this.storage_name);if(f(t)&&f(t.data)){if(this.serverUrlIsSame(t.serverUrl)){this.config=t.data,this.update_time=t.updateTime,this.updateConfig(t.data);var r=(new Date).getTime(),i=r-this.update_time;if(j(i)&&i>0&&i<this.para.session_time){var n=this.para.update_interval-i;this.setNextFetch(n)}else this.getConfigFromServer()}else this.getConfigFromServer()}else this.getConfigFromServer()}else this.getConfigFromServer();this.pageStateListenner()},serverUrlIsSame:function e(t){return!!f(t)&&t.host===this.url_info.server_url.host&&t.project===this.url_info.server_url.project},getConfigFromServer:function e(){var n=this,t=function e(t,r){n.update_time=(new Date).getTime();var i={};200===t?r&&f(r)&&"Web"===r.os&&(i=r,n.updateConfig(i)):205===t?n.updateConfig(i):304===t?i=n.config:(C.log("----vtrackcustom----数据异常",t),n.updateConfig(i)),n.updateStorage(i),n.setNextFetch()},r=function e(t){n.update_time=(new Date).getTime(),C.log("----vtrackcustom----配置拉取失败",t),n.setNextFetch()};this.sendRequest(t,r)},setNextFetch:function e(t){var r=this;this.timer&&(clearTimeout(this.timer),this.timer=null),t=t||this.para.update_interval,this.timer=setTimeout(function(){r.getConfigFromServer()},t)},pageStateListenner:function e(){var n=this;Oe({visible:function e(){var t=(new Date).getTime(),r=t-n.update_time;if(j(r)&&r>0&&r<n.para.update_interval){var i=n.para.update_interval-r;n.setNextFetch(i)}else n.getConfigFromServer()},hidden:function e(){n.timer&&(clearTimeout(n.timer),n.timer=null)}})},updateConfig:function e(t){return!!f(t)&&(this.config=t,this.customProp.updateEvents(t),void this.unlimitedDiv.init(t))},updateStorage:function e(t){if(!this.storageEnable)return!1;if(!f(t))return!1;var r;if(this.url_info.server_url)r=this.url_info.server_url;else{var i=C.vtrackcollect.initUrl();if(!i)return!1;r=i.server_url}var n={updateTime:(new Date).getTime(),data:t,serverUrl:r};C.store.saveObjectVal(this.storage_name,n)},sendRequest:function e(i,r){var t=this,n={app_id:this.url_info.page_url.host};this.config.version&&(n.v=this.config.version),Ne({url:t.url_info.api_url,callbackName:"saJSSDKVtrackCollectConfig",data:n,timeout:t.para.timeout,success:function e(t,r){i(t,r)},error:function e(t){r(t)}})},getAssignConfigs:U.getAssignConfigs,configIsMatch:U.configIsMatch},gi={events:[],getAssignConfigs:U.getAssignConfigs,filterConfig:U.filterConfig,getProp:U.getProp,initUrl:U.initUrl,updateEvents:function e(t){y(t)&&(this.events=t)},init:function e(){this.initAppGetPropsBridge()},geth5Props:function e(r){var i={},t=[],n=this;if(!this.events.length)return{};if("$WebClick"===r.event){var a=this.filterConfig(r,this.events);if(!a.length)return{};w(a,function(e){f(e)&&(y(e.properties)&&e.properties.length>0&&w(e.properties,function(e){if(f(e))if(e.h5===!1)y(i.sensorsdata_app_visual_properties)||(i.sensorsdata_app_visual_properties=[]),i.sensorsdata_app_visual_properties.push(e);else{var t=n.getProp(e,r);f(t)&&(i=S(i,t))}}),v(e.event_name)&&t.push(e.event_name))}),f(window.SensorsData_App_Visual_Bridge)&&window.SensorsData_App_Visual_Bridge.sensorsdata_visualized_mode&&(window.SensorsData_App_Visual_Bridge.sensorsdata_visualized_mode===!0||window.SensorsData_App_Visual_Bridge.sensorsdata_visualized_mode())&&(i.sensorsdata_web_visual_eventName=t)}return i.sensorsdata_app_visual_properties&&(i.sensorsdata_app_visual_properties=X(JSON.stringify(i.sensorsdata_app_visual_properties))),i},initAppGetPropsBridge:function e(){var o=this;return new C.JSBridge({type:"getJSVisualProperties",app_call_js:function e(t){var r={};try{t=JSON.parse(z(t))}catch(e){C.log("getJSVisualProperties data parse error!")}if(f(t)){var i=t.sensorsdata_js_visual_properties,n=o.initUrl();n&&(n=n.page_url,y(i)&&i.length>0&&w(i,function(e){if(f(e)&&e.url_host===n.host&&e.url_path===n.pathname&&e.h5){var t=o.getProp(e);f(t)&&(r=S(r,t))}}))}var a=C.bridge.bridge_info.platform;if("android"===a){var s={callType:"getJSVisualProperties",data:r};f(t)&&t.message_id&&(s.message_id=t.message_id),f(window.SensorsData_APP_New_H5_Bridge)&&u(SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app)?SensorsData_APP_New_H5_Bridge.sensorsdata_js_call_app(JSON.stringify(s)):f(window.SensorsData_APP_JS_Bridge)&&u(SensorsData_APP_JS_Bridge.sensorsdata_js_call_app)&&SensorsData_APP_JS_Bridge.sensorsdata_js_call_app(JSON.stringify(s))}return r}})}},hi={events:[],customProp:gi,getAssignConfigs:U.getAssignConfigs,initUrl:U.initUrl,init:function e(){if(this.initUrl()){var t=this.getConfigFromApp();t&&this.updateConfigs(t),this.customProp.init(),this.initAppUpdateConfigBridge()}},initAppUpdateConfigBridge:function e(){var r=this;return new C.JSBridge({type:"updateH5VisualConfig",app_call_js:function e(t){if(t){try{t=JSON.parse(z(t))}catch(e){return void C.log("updateH5VisualConfig result parse error！")}r.updateConfigs(t)}}})},getConfigFromApp:function e(){var t=new C.JSBridge({type:"sensorsdata_get_app_visual_config"}),r=t.getAppData();if(r)try{r=JSON.parse(z(r))}catch(e){r=null,C.log("getAppVisualConfig result parse error！")}return r},updateConfigs:function e(t){this.events=this.filterConfigs(t),this.customProp.updateEvents(this.events)},filterConfigs:function e(t){return this.getAssignConfigs(function(e){return!(!f(e)||e.h5===!1)},t)}},mi=new e,vi={};vi.spa=mi,vi.initSystemEvent=function(){Qt(function(e){mi.emit("switch",e)})};var yi={getOriginalUrl:function e(){function t(e){var t=e.split("&"),r=["sa-request-id","sa-request-type","sa-request-url"],i=[];return w(t,function(e){r.indexOf(e.split("=")[0])<0&&i.push(e)}),i.join("&")}var r=location.protocol+"//"+location.host+location.pathname,i="",n="";if(location.search){var a=t(location.search.slice(1));a&&(i="?"+a)}if(location.hash&&(n=location.hash,location.hash.indexOf("?")>-1)){var s=location.hash.split("?"),o=t(s[1]);o&&(n=s[0]+"?"+o)}return decodeURI(r+i+n)},isSeachHasKeyword:function e(){return null!==er("sa-request-id")&&("string"==typeof sessionStorage.getItem("sensors-visual-mode")&&sessionStorage.removeItem("sensors-visual-mode"),!0)},hasKeywordHandle:function e(){var t=er("sa-request-id"),r=er("sa-request-type"),i=er("sa-request-url");H.setNotice(i),n.isSupport()&&(null!==i&&sessionStorage.setItem("sensors_heatmap_url",i),sessionStorage.setItem("sensors_heatmap_id",t),null!==r?"1"===r||"2"===r||"3"===r?sessionStorage.setItem("sensors_heatmap_type",r):r=null:r=null!==sessionStorage.getItem("sensors_heatmap_type")?sessionStorage.getItem("sensors_heatmap_type"):null),this.isReady(t,r,this.getOriginalUrl())},isReady:function e(t,r,i){C.para.heatmap_url?Ce({success:function e(){setTimeout(function(){"undefined"!=typeof sa_jssdk_heatmap_render&&(sa_jssdk_heatmap_render(C,t,r,i),"object"==(typeof console==="undefined"?"undefined":_typeof(console))&&"function"==typeof console.log&&(C.heatmap_version&&C.heatmap_version===C.lib_version||console.log("heatmap.js与sensorsdata.js版本号不一致，可能存在风险!")))},0)},error:function e(){},type:"js",url:C.para.heatmap_url}):C.log("没有指定heatmap_url的路径")},isStorageHasKeyword:function e(){return n.isSupport()&&"string"==typeof sessionStorage.getItem("sensors_heatmap_id")},storageHasKeywordHandle:function e(){H.setNotice(),yi.isReady(sessionStorage.getItem("sensors_heatmap_id"),sessionStorage.getItem("sensors_heatmap_type"),this.getOriginalUrl())}},B={isStorageHasKeyword:function e(){return n.isSupport()&&"string"==typeof sessionStorage.getItem("sensors-visual-mode")},isSearchHasKeyword:function e(){return(er("sa-visual-mode")===!0||"true"===er("sa-visual-mode"))&&("string"==typeof sessionStorage.getItem("sensors_heatmap_id")&&sessionStorage.removeItem("sensors_heatmap_id"),!0)},loadVtrack:function e(){Ce({success:function e(){},error:function e(){},type:"js",url:C.para.vtrack_url?C.para.vtrack_url:location.protocol+"//static.sensorsdata.cn/sdk/"+C.lib_version+"/vtrack.min.js"})},messageListener:function e(t){function r(e){return be(e)?$e(e):(C.log("可视化模式检测 URL 失败"),!1)}if("sa-fe"!==t.data.source)return!1;if("v-track-mode"===t.data.type){if(t.data.data&&t.data.data.isVtrack)if(n.isSupport()&&sessionStorage.setItem("sensors-visual-mode","true"),t.data.data.userURL&&location.href.match(/sa-visual-mode=true/)){var i=r(t.data.data.userURL);i&&(window.location.href=i)}else B.loadVtrack();window.removeEventListener("message",B.messageListener,!1)}},removeMessageHandle:function e(){window.removeEventListener&&window.removeEventListener("message",B.messageListener,!1)},verifyVtrackMode:function e(){window.addEventListener&&window.addEventListener("message",B.messageListener,!1),B.postMessage()},postMessage:function e(){window.parent&&window.parent.postMessage&&window.parent.postMessage({source:"sa-web-sdk",type:"v-is-vtrack",data:{sdkversion:"1.22.7"}},"*")},notifyUser:function e(){var t=function e(t){return"sa-fe"===t.data.source&&void("v-track-mode"===t.data.type&&(t.data.data&&t.data.data.isVtrack&&alert("当前版本不支持，请升级部署神策数据治理"),window.removeEventListener("message",e,!1)))};window.addEventListener&&window.addEventListener("message",t,!1),B.postMessage()}},wi=["setItem","deleteItem","getAppStatus","track","quick","register","registerPage","registerOnce","trackSignup","setProfile","setOnceProfile","appendProfile","incrementProfile","deleteProfile","unsetProfile","identify","login","logout","trackLink","clearAllRegister","clearPageRegister"],Si={track:function e(t,r,i){},quick:function e(t,r,i,n){},register:function e(t){},registerPage:function e(t){},registerOnce:function e(t){},clearAllRegister:function e(t){},trackSignup:function e(t,r,i,n){},setProfile:function e(t,r){},setOnceProfile:function e(t,r){},appendProfile:function e(t,r){},incrementProfile:function e(t,r){},deleteProfile:function e(t){},unsetProfile:function e(t,r){},identify:function e(t,r){},login:function e(t,r){},logout:function e(t){},trackLink:function e(t,r,i){},deleteItem:function e(t,r){},setItem:function e(t,r,i){},getAppStatus:function e(t){},clearPageRegister:function e(t){}};cr.prototype.process=function(e,t){if(!(e&&e in this.processDef))return void N("process ["+e+"] is not supported");var r=this.registeredInterceptors[e];if(r&&y(r)&&r.length>0)for(var i={current:0,total:r.length},n=new lr(t,i,C),a=0;a<r.length;a++)try{if(i.current=a+1,t=r[a].call(null,t,n)||t,n.cancelationToken.getCanceled()){N("process ["+e+"] has been canceled.");break}}catch(e){N("interceptor error:"+e)}return this.processDef[e]&&this.processDef[e]in this.processDef&&(t=this.process(this.processDef[e],t)),t},cr.prototype.registerStageImplementation=function(e){e&&e.init&&u(e.init)&&(e.init(this),e.interceptor&&this.registerInterceptor(e.interceptor))},cr.prototype.registerInterceptor=function(e){if(e)for(var t in e){var r=e[t];if(r&&f(r)&&u(r.entry)){j(r.priority)||(r.priority=1e7),this.registeredInterceptors[t]||(this.registeredInterceptors[t]=[]);var i=this.registeredInterceptors[t],n=r.priority,a=r.entry;switch(!0){case n<=0:i.unshift(a);break;case n>=i.length:i.push(a);break;default:i.splice(n,0,a)}}}};var bi={addCustomProps:null,formatData:null},ki=new cr(bi),Pi={init:function e(){},interceptor:{formatData:{priority:0,entry:function e(t){return yr(t),t}}}},Di=window.sensors_data_pre_config,ji=!!f(Di)&&Di.is_compliance_enabled;C.init=function(e){return!(C.readyState&&C.readyState.state&&C.readyState.state>=2)&&(ji&&Sr(!0),C.ee.initSystemEvent(),C.setInitVar(),C.readyState.setState(2),C.initPara(e),C.bridge.supportAppCallJs(),C.detectMode(),void C.iOSWebClickPolyfill())},ji?Sr(!1):(Sr(!0),sr());var Ni=C;try{C.modules={},C.modules.Amp=function(){"use strict";var e={sd:null,init:function e(t){if(this.sd)return!1;if(this.sd=t,!this.sd||!this.sd._)return!1;var r=this.sd._.cookie.get("sensors_amp_id"),i=this.sd.store._state.distinct_id;if(r&&r.length>0){var n="amp-"===r.slice(0,4);if(r!==i){if(!n)return!1;this.sd.store._state.first_id?(this.sd.identify(r,!0),this.sd.saEvent.send({original_id:r,distinct_id:i,type:"track_signup",event:"$SignUp",properties:{}},null),this.setAmpId(i)):this.sd.identify(r,!0)}}else this.setAmpId(i);this.addListener()},addListener:function e(){var t=this;this.sd.events.on("changeDistinctId",function(e){t.setAmpId(e)}),this.sd.events.isReady()},setAmpId:function e(t){this.sd._.cookie.set("sensors_amp_id",t)}};return window.SensorsDataWebJSSDKPlugin&&"[object Object]"===Object.prototype.toString.call(window.SensorsDataWebJSSDKPlugin)?window.SensorsDataWebJSSDKPlugin.Amp=window.SensorsDataWebJSSDKPlugin.Amp||e:window.SensorsDataWebJSSDKPlugin={Amp:e},e}(),C.modules.Channel=function(){"use strict";var n,a,r,s={event_list:[],latest_event_initial_time:null,max_save_time:2592e6,init:function e(t){return!a&&!!(a=t)&&(n=a._,r=a.store,!!n.localStorage.isSupport()&&(a.para.max_string_length=1024,this.eventList.init(),this.addLatestChannelUrl(),void this.addIsChannelCallbackEvent()))},addIsChannelCallbackEvent:function e(){a.registerPage({$is_channel_callback_event:function e(t){if(t.event&&"$WebClick"!==t.event&&"$pageview"!==t.event&&"$WebStay"!==t.event&&"$SignUp"!==t.event)return!s.eventList.hasEvent(t.event)&&(s.eventList.add(t.event),!0)}})},addLatestChannelUrl:function e(){var t=this.getUrlDomain(),r=this.cookie.getChannel();if("url解析失败"===t)this.registerAndSave({_sa_channel_landing_url:"",_sa_channel_landing_url_error:"url的domain解析失败"});else if(n.isReferralTraffic(document.referrer)){var i=n.getQueryParam(location.href,"sat_cf");n.isString(i)&&i.length>0?(this.registerAndSave({_sa_channel_landing_url:location.href}),s.channelLinkHandler()):this.registerAndSave({_sa_channel_landing_url:""})}else r?a.registerPage(r):a.registerPage({_sa_channel_landing_url:"",_sa_channel_landing_url_error:"取值异常"})},registerAndSave:function e(t){a.registerPage(t),this.cookie.saveChannel(t)},cookie:{getChannel:function e(){var t=n.decryptIfNeeded(n.cookie.get("sensorsdata2015jssdkchannel"));return t=n.safeJSONParse(t),!(!n.isObject(t)||!t.prop)&&t.prop},saveChannel:function e(t){var r={prop:t},i=JSON.stringify(r);a.para.encrypt_cookie&&(i=n.encrypt(i)),n.cookie.set("sensorsdata2015jssdkchannel",i)}},channelLinkHandler:function e(){this.eventList.reset(),a.track("$ChannelLinkReaching")},getUrlDomain:function e(){var t=n.info.pageProp.url_domain;return""===t&&(t="url解析失败"),t},eventList:{init:function e(){var t=this.get(),r=(new Date).getTime();if(t&&n.isNumber(t.latest_event_initial_time)&&n.isArray(t.eventList)){var i=r-t.latest_event_initial_time;i>0&&i<s.max_save_time?(s.event_list=t.eventList,s.latest_event_initial_time=t.latest_event_initial_time):this.reset()}else this.reset()},get:function e(){var t={};try{t=r.readObjectVal("sawebjssdkchannel")}catch(e){a.log(e)}return t},add:function e(t){s.event_list.push(t),this.save()},save:function e(){var t={latest_event_initial_time:s.latest_event_initial_time,eventList:s.event_list};r.saveObjectVal("sawebjssdkchannel",t)},reset:function e(){s.event_list=[],s.latest_event_initial_time=(new Date).getTime(),this.save()},hasEvent:function e(t){var r=!1;return n.each(s.event_list,function(e){e===t&&(r=!0)}),r}}};return window.SensorsDataWebJSSDKPlugin&&"[object Object]"===Object.prototype.toString.call(window.SensorsDataWebJSSDKPlugin)?window.SensorsDataWebJSSDKPlugin.SensorsChannel=window.SensorsDataWebJSSDKPlugin.SensorsChannel||s:window.SensorsDataWebJSSDKPlugin={SensorsChannel:s},s}(),C.modules.Deeplink=function(){"use strict";function a(){return"undefined"!=typeof s&&document[s]}var s,r=(/micromessenger\/([\d.]+)/i.test(navigator.userAgent||""),function(){var e={};return"undefined"!=typeof document.hidden?(e.hidden="hidden",e.visibilityChange="visibilitychange"):"undefined"!=typeof document.msHidden?(e.hidden="msHidden",e.visibilityChange="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(e.hidden="webkitHidden",e.visibilityChange="webkitvisibilitychange"),e});s=r().hidden;var i={android:/Android/i,iOS:/iPhone|iPad|iPod/i},e=function e(){for(var t in i)if(navigator.userAgent.match(i[t]))return t;return""},n=e(),o=function e(){return i.hasOwnProperty(n)},l=function e(t){return null!=t&&"[object Object]"==Object.prototype.toString.call(t)},c=function e(t){var r=/\/sd\/(\w+)\/(\w+)$/;return t.match(r)},u=function e(t){var r=t._.URL(t.para.server_url);return{origin:r.origin,project:r.searchParams.get("project")||"default"}},d=function e(t,r,i){t.log("尝试唤起 android app");var n=r;t.log("唤起APP的地址："+n),window.location=n,t.timer=setTimeout(function(){var e=a();return t.log("hide:"+s+":"+document[s]),e?(t.log("The page is hidden, stop navigating to download page"),!1):(t.log("App可能未安装，跳转到下载地址"),void(window.location=i))},t.timeout)},p=function e(t,r,i){t.log("尝试唤起 iOS app:"+r),window.location.href=r,t.timer=setTimeout(function(){var e=a();return e?(t.log("The page is hidden, stop navigating to download page"),!1):(t.log("App可能未安装，跳转到下载地址"),void(window.location.href=i))},t.timeout),t.log("new timer:"+t.timer)},_={key:null,timer:null,sd:null,data:null,timeout:2500,apiURL:"{origin}/sdk/deeplink/param?key={key}&system_type=JS&project={project}",init:function e(){if(this.sd)return this.log("deeplink已经初始化"),!1;if(l(sensorsDataAnalytic201505)&&(this.sd=sensorsDataAnalytic201505),this.log("init()"),null===this.sd)return this.log("神策JS SDK未成功引入"),!1;var t={};if(arguments.length>0&&(1===arguments.length&&l(arguments[0])?t=arguments[0]:arguments.length>=2&&l(arguments[1])&&(t=arguments[1])),!o())return this.log("不支持当前系统，目前只支持Android和iOS"),!1;if(l(t)&&this.sd._.isNumber(t.timeout)&&t.timeout>=2500&&(this.timeout=t.timeout),!this.sd.para.server_url)return this.log("神策JS SDK配置项server_url未正确配置"),!1;var r=u(this.sd);this.apiURL=this.apiURL.replace("{origin}",r.origin).replace("{project}",r.project);var i=this.sd._.getQueryParam(window.location.href,"deeplink");if(!i)return this.log("当前页面缺少deeplink参数"),!1;i=window.decodeURIComponent(i);var n=c(i);return n?(this.key=n[2],this.apiURL=this.apiURL.replace("{key}",window.encodeURIComponent(n[2])),this.sd._.ajax({url:this.apiURL,type:"GET",cors:!0,credentials:!1,success:function(e){return e.errorMsg?(_.log("API报错："+e.errorMsg),!1):(_.data=e,_.log("API查询成功，数据："+JSON.stringify(e,null,"  ")),void(this.data.app_key&&(this.data.android_info&&this.data.android_info.url_schemes&&(this.data.android_info.url_schemes+="://sensorsdata/sd/"+this.data.app_key+"/"+this.key),this.data.ios_info&&this.data.ios_info.url_schemes&&(this.data.ios_info.url_schemes+="://sensorsdata/sd/"+this.data.app_key+"/"+this.key))))}.bind(this),error:function e(){_.log("API查询出错")}}),void this.addListeners()):(this.log("当前页面的deeplink参数无效"),!1)},openDeepLink:function e(){if(this.log("openDeeplink()"),!this.data)return this.log("没有Deep link数据!"),!1;if("iOS"===n){this.log("当前系统是iOS");var t=this.sd&&this.sd._&&this.sd._.getIOSVersion()>=9&&this.data.ios_info.ios_wake_url?this.data.ios_info.ios_wake_url:this.data.ios_info.url_schemes;this.log("唤起APP的地址："+t),p(this,t,this.data.ios_info.download_url)}else this.log("当前系统是 android"),d(this,this.data.android_info.url_schemes,this.data.android_info.download_url)},log:function e(t){this.sd&&this.sd.log(t)},addListeners:function e(){var t=r().visibilityChange;t&&document.addEventListener(t,function(){clearTimeout(this.timer),this.log("visibilitychange, clear timeout:"+this.timer)}.bind(this),!1),window.addEventListener("pagehide",function(){this.log("page hide, clear timeout:"+this.timer),clearTimeout(this.timer)}.bind(this),!1)}};return l(window.SensorsDataWebJSSDKPlugin)?(window.SensorsDataWebJSSDKPlugin.Deeplink=window.SensorsDataWebJSSDKPlugin.Deeplink||_,window.SensorsDataWebJSSDKPlugin.deeplink=window.SensorsDataWebJSSDKPlugin.deeplink||_):window.SensorsDataWebJSSDKPlugin={Deeplink:_,deeplink:_},_}(),C.modules.Pageleave=function(){"use strict";function e(){this.sd=null,this.start_time=+new Date,this.page_show_status=!0,this.page_hidden_status=!1,this._={},this.timer=null,this.current_page_url=document.referrer,this.url=location.href,this.option={},this.heartbeat_interval_time=5e3,this.heartbeat_interval_timer=null,this.page_id=null,this.storage_name="sawebjssdkpageleave"}var t=5e3;e.prototype.init=function(e,t){if(e){this.sd=e,this._=this.sd._;var r=this;if(t){this.option=t;var i=t.heartbeat_interval_time;i&&(this._.isNumber(i)||this._.isNumber(1*i))&&1*i>0&&(this.heartbeat_interval_time=1e3*i)}this.page_id=Number(String(this._.getRandom()).slice(2,5)+String(this._.getRandom()).slice(2,4)+String((new Date).getTime()).slice(-4)),r.addEventListener(),document.hidden===!0?this.page_show_status=!1:r.addHeartBeatInterval(),this.log("PageLeave初始化完毕")}else this.log("神策JS SDK未成功引入")},e.prototype.log=function(e){this.sd&&this.sd.log(e)},e.prototype.refreshPageEndTimer=function(){var e=this;this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(function(){e.page_hidden_status=!1},t)},e.prototype.hiddenStatusHandler=function(){clearTimeout(this.timer),this.timer=null,this.page_hidden_status=!1},e.prototype.pageStartHandler=function(){this.start_time=+new Date,!document.hidden==!0?this.page_show_status=!0:this.page_show_status=!1,this.url=location.href},e.prototype.pageEndHandler=function(){if(this.page_hidden_status!==!0){var e=this.getPageLeaveProperties();this.page_show_status===!1&&delete e.event_duration,this.page_show_status=!1,this.page_hidden_status=!0,this.isCollectUrl(this.url)&&this.sd.track("$WebPageLeave",e),this.refreshPageEndTimer(),this.delHeartBeatData()}},e.prototype.addEventListener=function(){this.addPageStartListener(),this.addPageSwitchListener(),this.addSinglePageListener(),this.addPageEndListener()},e.prototype.addPageStartListener=function(){var e=this;"onpageshow"in window&&this._.addEvent(window,"pageshow",function(){e.pageStartHandler(),e.hiddenStatusHandler()})},e.prototype.isCollectUrl=function(e){return"function"!=typeof this.option.isCollectUrl||"string"!=typeof e||""===e||this.option.isCollectUrl(e)},e.prototype.addSinglePageListener=function(){var t=this;this.sd.ee&&this.sd.ee.spa.prepend("switch",function(e){e!==location.href&&(t.url=e,t.pageEndHandler(),t.stopHeartBeatInterval(),t.current_page_url=t.url,t.pageStartHandler(),t.hiddenStatusHandler(),t.startHeartBeatInterval())})},e.prototype.addPageEndListener=function(){var t=this;this._.each(["pagehide","beforeunload","unload"],function(e){"on"+e in window&&t._.addEvent(window,e,function(){t.pageEndHandler(),t.stopHeartBeatInterval()})})},e.prototype.addPageSwitchListener=function(){var t=this;this._.listenPageState({visible:function e(){t.pageStartHandler(),t.hiddenStatusHandler(),t.startHeartBeatInterval()},hidden:function e(){t.url=location.href,t.pageEndHandler(),t.stopHeartBeatInterval()}})},e.prototype.addHeartBeatInterval=function(){this._.localStorage.isSupport()&&this.startHeartBeatInterval()},e.prototype.startHeartBeatInterval=function(){var e=this;this.heartbeat_interval_timer&&this.stopHeartBeatInterval();var t=!0;this.isCollectUrl(this.url)||(t=!1),this.heartbeat_interval_timer=setInterval(function(){t&&e.saveHeartBeatData()},this.heartbeat_interval_time),t&&this.saveHeartBeatData("is_first_heartbeat"),this.reissueHeartBeatData()},e.prototype.stopHeartBeatInterval=function(){clearInterval(this.heartbeat_interval_timer),this.heartbeat_interval_timer=null},e.prototype.saveHeartBeatData=function(e){var t=this.getPageLeaveProperties(),r=new Date;t.$time=r,"is_first_heartbeat"===e&&(t.event_duration=3.14);var i=this.sd.kit.buildData({type:"track",event:"$WebPageLeave",properties:t});try{"success"===this.sd.bridge.bridge_info.verify_success&&(i.properties.$time=1*r)}catch(e){this.log(e.message)}i.heartbeat_interval_time=this.heartbeat_interval_time,this.sd.store.saveObjectVal(this.storage_name+"-"+this.page_id,i)},e.prototype.delHeartBeatData=function(e){this._.localStorage.remove(e||this.storage_name+"-"+this.page_id)},e.prototype.reissueHeartBeatData=function(){for(var e=window.localStorage.length,t=e-1;t>=0;t--){var r=window.localStorage.key(t);if(r&&r!==this.storage_name+"-"+this.page_id&&0===r.indexOf(this.storage_name+"-")){var i=this.sd.store.readObjectVal(r);this._.isObject(i)&&1*new Date-i.time>i.heartbeat_interval_time+5e3&&(delete i.heartbeat_interval_time,this.sd.kit.sendData(i),this.delHeartBeatData(r))}}},e.prototype.getPageLeaveProperties=function(){var e=(+new Date-this.start_time)/1e3;(isNaN(e)||e<0)&&(e=0),e=Number(e.toFixed(3));var t=this._.getReferrer(this.current_page_url),r=document.documentElement&&document.documentElement.scrollTop||window.pageYOffset||document.body&&document.body.scrollTop||0;r=Math.round(r)||0;var i={$title:document.title,$url:this._.getURL(this.url),$url_path:this._.getURLPath(),$referrer_host:t?this._.getHostname(t):"",$referrer:t,$viewport_position:r};return 0!==e&&(i.event_duration=e),i=this._.extend(i,this.option.custom_props)};var r=new e;return window.SensorsDataWebJSSDKPlugin&&"[object Object]"===Object.prototype.toString.call(window.SensorsDataWebJSSDKPlugin)?window.SensorsDataWebJSSDKPlugin.PageLeave=window.SensorsDataWebJSSDKPlugin.PageLeave||r:window.SensorsDataWebJSSDKPlugin={PageLeave:r},r}(),C.modules.Pageload=function(){"use strict";var e={init:function e(a){function n(e,t){if(e.getEntries&&"function"==typeof e.getEntries){for(var r=e.getEntries(),i=null,n=0;n<r.length;n++)"transferSize"in r[n]&&(i+=r[n].transferSize);a._.isNumber(i)&&i>=0&&i<10737418240&&(t.$page_resource_size=Number((i/1024).toFixed(3)))}}function s(){var e=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance,t=0,r={$url:a._.getURL(),$title:document.title,$url_path:a._.getURLPath(),$referrer:a._.getReferrer(null,!0)};if(e&&e.timing){var i=e.timing;0===i.fetchStart||0===i.domContentLoadedEventEnd?a.log("performance 数据获取异常"):t=i.domContentLoadedEventEnd-i.fetchStart,n(e,r)}else a.log("浏览器未支持 performance API.");t>0&&(r.event_duration=Number((t/1e3).toFixed(3))),a.track("$WebPageLoad",r),window.removeEventListener?window.removeEventListener("load",s):window.detachEvent&&window.detachEvent("onload",s)}"complete"==document.readyState?s():window.addEventListener?window.addEventListener("load",s):window.attachEvent&&window.attachEvent("onload",s)}};return window.SensorsDataWebJSSDKPlugin&&"[object Object]"===Object.prototype.toString.call(window.SensorsDataWebJSSDKPlugin)?window.SensorsDataWebJSSDKPlugin.PageLoad=window.SensorsDataWebJSSDKPlugin.PageLoad||e:window.SensorsDataWebJSSDKPlugin={PageLoad:e},e}(),C.modules.RegisterProperties=function(){"use strict";function i(e,t){if("track"!==e.type)return e;var r=t.sd,i=r._,n=r.saEvent.check,a=i.extend2Lev({properties:{}},e),s=t.currentProps,o=a.properties,l=a.event,c={};return i.each(s,function(e){if(i.isObject(e))e.events.indexOf(l)>-1&&n({properties:e.properties})&&(c=i.extend(c,e.properties));else if(i.isFunction(e)){var t=e({event:l,properties:o,data:a});i.isObject(t)&&!i.isEmptyObject(t)&&n({properties:t})&&(c=i.extend(c,t))}}),e.properties=i.extend(o,c),e}function t(e){var r=this;this.sd=e.sd,this.currentProps=e.customRegister,this.interceptor={addCustomProps:{priority:0,entry:function e(t){return i(t,r),t}}}}function r(e){this.dataStage=new t(e)}function e(){this.sd=null,this.log=window.console&&window.console.log||function(){},this.customRegister=[]}t.prototype.init=function(){},e.prototype.init=function(e){e?(this.sd=e,this._=e._,this.log=e.log,e.registerFeature(new r(this))):this.log("神策JS SDK未成功引入")},e.prototype.register=function(e){return this.sd?void(this._.isObject(e)&&this._.isArray(e.events)&&e.events.length>0&&this._.isObject(e.properties)&&!this._.isEmptyObject(e.properties)?this.customRegister.push(e):this.log("RegisterProperties: register 参数错误")):void this.log("神策JS SDK未成功引入")},e.prototype.hookRegister=function(e){return this.sd?void(this._.isFunction(e)?this.customRegister.push(e):this.log("RegisterProperties: hookRegister 参数错误")):void this.log("神策JS SDK未成功引入")};var n=new e;return n.__constructor__=e,window.SensorsDataWebJSSDKPlugin&&"[object Object]"===Object.prototype.toString.call(window.SensorsDataWebJSSDKPlugin)?window.SensorsDataWebJSSDKPlugin.RegisterProperties=window.SensorsDataWebJSSDKPlugin.RegisterProperties||n:window.SensorsDataWebJSSDKPlugin={RegisterProperties:n},n}(),C.modules.RegisterPropertyPageHeight=function(){"use strict";function r(e){try{if("$pageview"!==e.event&&(!e.type||"profile"!==e.type.slice(0,7))){var t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,r=document.documentElement.scrollHeight||0,i={$page_height:Math.max(t,r)||0};e.properties=n._.extend(e.properties||{},i)}}catch(e){s("页面高度获取异常。")}return a.call(n.kit,e)}var n,a,s=window.console&&window.console.log||function(){},e={init:function e(t){return n=t,s=n&&n.log||s,t&&t.kit&&t.kit.buildData?(a=n.kit.buildData,n.kit.buildData=r,void s("RegisterPropertyPageHeight 插件初始化完成")):void s("RegisterPropertyPageHeight 插件初始化失败,当前主sdk不支持 RegisterPropertyPageHeight 插件，请升级主sdk")}};return window.SensorsDataWebJSSDKPlugin&&"[object Object]"===Object.prototype.toString.call(window.SensorsDataWebJSSDKPlugin)?window.SensorsDataWebJSSDKPlugin.RegisterPropertyPageHeight=window.SensorsDataWebJSSDKPlugin.RegisterPropertyPageHeight||e:window.SensorsDataWebJSSDKPlugin={RegisterPropertyPageHeight:e},e}(),function(){"use strict";var e={};e.getPart=function(e){var t=!1,r=this.option.length;if(r)for(var i=0;i<r;i++)if(e.indexOf(this.option[i].part_url)>-1)return!0;return t},e.getPartHash=function(e){var t=this.option.length,r=!1;if(t)for(var i=0;i<t;i++)if(e.indexOf(this.option[i].part_url)>-1)return this.option[i].after_hash;return!!r},e.getCurrenId=function(){var e=this.store.getDistinctId()||"",t=this.store.getFirstId()||"";this._.urlSafeBase64&&this._.urlSafeBase64.encode?e=e?this._.urlSafeBase64.trim(this._.urlSafeBase64.encode(this._.base64Encode(e))):"":this._.rot13obfs&&(e=e?this._.rot13obfs(e):"");var r=t?"f"+e:"d"+e;return encodeURIComponent(r)},e.rewriteUrl=function(e,t){var r=/([^?#]+)(\?[^#]*)?(#.*)?/,i=r.exec(e),n="";if(i){var a,s=i[1]||"",o=i[2]||"",l=i[3]||"";if(this.getPartHash(e)){a=l.indexOf("_sasdk");var c=l.indexOf("?");n=c>-1?a>-1?s+o+"#"+l.substring(1,a)+"_sasdk="+this.getCurrenId():s+o+"#"+l.substring(1)+"&_sasdk="+this.getCurrenId():s+o+"#"+l.substring(1)+"?_sasdk="+this.getCurrenId()}else{a=o.indexOf("_sasdk");var u=/^\?(\w)+/.test(o);n=u?a>-1?s+"?"+o.substring(1,a)+"_sasdk="+this.getCurrenId()+l:s+"?"+o.substring(1)+"&_sasdk="+this.getCurrenId()+l:s+"?"+o.substring(1)+"_sasdk="+this.getCurrenId()+l}return t&&(t.href=n),n}},e.getUrlId=function(){var e=location.href.match(/_sasdk=([aufd][^\?\#\&\=]+)/);if(this._.isArray(e)&&e[1]){var t=decodeURIComponent(e[1]);return!t||"f"!==t.substring(0,1)&&"d"!==t.substring(0,1)||(this._.urlSafeBase64&&this._.urlSafeBase64.isUrlSafeBase64&&this._.urlSafeBase64.isUrlSafeBase64(t)?t=t.substring(0,1)+this._.base64Decode(this._.urlSafeBase64.decode(t.substring(1))):this._.rot13defs&&(t=t.substring(0,1)+this._.rot13defs(t.substring(1)))),t}return""},e.setRefferId=function(){var e=this.store.getDistinctId(),t=this.getUrlId();if(""===t)return!1;var r="a"===t.substring(0,1)||"d"===t.substring(0,1);return t=t.substring(1),t!==e&&(t&&r&&this.store.getFirstId()&&(this.sd.identify(t,!0),this.sd.saEvent.send({original_id:t,distinct_id:e,type:"track_signup",event:"$SignUp",properties:{}},null)),t&&r&&!this.store.getFirstId()&&this.sd.identify(t,!0),void(!t||r||this.store.getFirstId()||this.sd.login(t)))},e.addListen=function(){var c=this,e=function e(t){var r,i,n=t.target,a=n.tagName.toLowerCase(),s=n.parentNode;if("a"===a&&n.href||s&&s.tagName&&"a"===s.tagName.toLowerCase()&&s.href){"a"===a&&n.href?(r=n.href,i=n):(r=s.href,i=s);var o=c._.URL(r),l=o.protocol;"http:"!==l&&"https:"!==l||c.getPart(r)&&c.rewriteUrl(r,i)}};c._.addEvent(document,"mousedown",e),window.PointerEvent&&"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>=0&&c._.addEvent(document,"pointerdown",e)},e.init=function(n,e){function t(e){for(var t=e.length,r=[],i=0;i<t;i++)/[A-Za-z0-9]+\./.test(e[i].part_url)&&"[object Boolean]"==Object.prototype.toString.call(e[i].after_hash)?r.push(e[i]):n.log("linker 配置的第 "+(i+1)+" 项格式不正确，请检查参数格式！");return r}return this.sd=n,this._=n._,this.store=n.store,this.para=n.para,this._.isObject(e)&&this._.isArray(e.linker)&&e.linker.length>0?(this.setRefferId(),this.addListen(),this.option=e.linker,void(this.option=t(this.option))):void n.log("请配置打通域名参数！")},window.SensorsDataWebJSSDKPlugin&&"[object Object]"===Object.prototype.toString.call(window.SensorsDataWebJSSDKPlugin)?window.SensorsDataWebJSSDKPlugin.SiteLinker=window.SensorsDataWebJSSDKPlugin.SiteLinker||e:window.SensorsDataWebJSSDKPlugin={SiteLinker:e}}(),"string"==typeof window.sensorsDataAnalytic201505?(C.para=window[sensorsDataAnalytic201505].para,C._q=window[sensorsDataAnalytic201505]._q,window[sensorsDataAnalytic201505]=C,window.sensorsDataAnalytic201505=C):"undefined"==typeof window.sensorsDataAnalytic201505?window.sensorsDataAnalytic201505=C:Ni=window.sensorsDataAnalytic201505}catch(e){if("object"==(typeof console==="undefined"?"undefined":_typeof(console))&&console.log)try{console.log(e)}catch(e){C.log(e)}}var Oi=Ni;return Oi});
//# sourceMappingURL=../../../../__sources__/common/js/libs/sensors/sfaw_1.22.7_b90b673c.js.map
