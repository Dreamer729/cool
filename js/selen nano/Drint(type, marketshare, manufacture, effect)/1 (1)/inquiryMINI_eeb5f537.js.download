jQuery.extend(jQuery.easing,{easeInQuart:function t(e,i,n,a,r){return a*(i/=r)*i*i*i+n}});(function(r){r.path={};var o={rotate:function t(e,i){var n=i*Math.PI/180,a=Math.cos(n),r=Math.sin(n);return[a*e[0]-r*e[1],r*e[0]+a*e[1]]},scale:function t(e,i){return[i*e[0],i*e[1]]},add:function t(e,i){return[e[0]+i[0],e[1]+i[1]]},minus:function t(e,i){return[e[0]-i[0],e[1]-i[1]]}};r.path.bezier=function(t,s){t.start=r.extend({angle:0,length:.3333},t.start);t.end=r.extend({angle:0,length:.3333},t.end);this.p1=[t.start.x,t.start.y];this.p4=[t.end.x,t.end.y];var e=o.minus(this.p4,this.p1),i=o.scale(e,t.start.length),n=o.scale(e,-1),a=o.scale(n,t.end.length);i=o.rotate(i,t.start.angle);this.p2=o.add(this.p1,i);a=o.rotate(a,t.end.angle);this.p3=o.add(this.p4,a);this.f1=function(t){return t*t*t};this.f2=function(t){return 3*t*t*(1-t)};this.f3=function(t){return 3*t*(1-t)*(1-t)};this.f4=function(t){return(1-t)*(1-t)*(1-t)};this.css=function(t){var e=this.f1(t),i=this.f2(t),n=this.f3(t),a=this.f4(t),r={};if(s){r.prevX=this.x;r.prevY=this.y}r.x=this.x=this.p1[0]*e+this.p2[0]*i+this.p3[0]*n+this.p4[0]*a+.5|0;r.y=this.y=this.p1[1]*e+this.p2[1]*i+this.p3[1]*n+this.p4[1]*a+.5|0;r.left=r.x+"px";r.top=r.y+"px";return r}};r.path.arc=function(t,n){for(var e in t){this[e]=t[e]}this.dir=this.dir||1;while(this.start>this.end&&this.dir>0){this.start-=360}while(this.start<this.end&&this.dir<0){this.start+=360}this.css=function(t){var e=(this.start*t+this.end*(1-t))*Math.PI/180,i={};if(n){i.prevX=this.x;i.prevY=this.y}i.x=this.x=Math.sin(e)*this.radius+this.center[0]+.5|0;i.y=this.y=Math.cos(e)*this.radius+this.center[1]+.5|0;i.left=i.x+"px";i.top=i.y+"px";return i}};r.fx.step.path=function(t){var e=t.end.css(1-t.pos);if(e.prevX!=null){r.cssHooks.transform.set(t.elem,"rotate("+Math.atan2(e.prevY-e.y,e.prevX-e.x)+")")}t.elem.style.top=e.top;t.elem.style.left=e.left}})(jQuery);(function(k){function q(){}function x(t){X=[t]}function M(t,e,i){return t&&t.apply&&t.apply(e.context||e,i)}function $(t){return/\?/.test(t)?"&":"?"}var T="async",S="charset",D="",P="error",E="insertBefore",L="_jqjsp",t="on",O=t+"click",A=t+P,j=t+"load",B=t+"readystatechange",J="readyState",R="removeChild",N="<script>",H="success",U="timeout",K=window,W=k.Deferred,z=k("head")[0]||document.documentElement,Y={},Q=0,X,F={callback:L,url:location.href},V=K.opera,G=!!k("<div>").html("\x3c!--[if IE]><i><![endif]--\x3e").find("i").length;function e(e){e=k.extend({},F,e);var i=e.success,n=e.error,a=e.complete,r=e.dataFilter,t=e.callbackParameter,s=e.callback,o=e.cache,c=e.pageCache,l=e.charset,h=e.url,u=e.data,d=e.timeout,p,f=0,m=q,y,v,g,_,b,w;W&&W(function(t){t.done(i).fail(n);i=t.resolve;n=t.reject}).promise(e);e.abort=function(){!f++&&m()};if(M(e.beforeSend,e,[e])===!1||f){return e}h=h||D;u=u?typeof u=="string"?u:k.param(u,e.traditional):D;h+=u?$(h)+u:D;t&&(h+=$(h)+encodeURIComponent(t)+"=?");!o&&!c&&(h+=$(h)+"_"+(new Date).getTime()+"=");h=h.replace(/=\?(&|$)/,"="+s+"$1");function I(t){if(!f++){m();c&&(Y[h]={s:[t]});r&&(t=r.apply(e,[t]));M(i,e,[t,H,e]);M(a,e,[e,H])}}function C(t){if(!f++){m();c&&t!=U&&(Y[h]=t);M(n,e,[e,t]);M(a,e,[e,t])}}if(c&&(p=Y[h])){p.s?I(p.s[0]):C(p)}else{K[s]=x;_=k(N)[0];_.id=L+Q++;if(l){_[S]=l}V&&V.version()<11.6?(b=k(N)[0]).text="document.getElementById('"+_.id+"')."+A+"()":_[T]=T;if(G){_.htmlFor=_.id;_.event=O}_[j]=_[A]=_[B]=function(t){if(!_[J]||!/i/.test(_[J])){try{_[O]&&_[O]()}catch(t){}t=X;X=0;t?I(t[0]):C(P)}};_.src=h;m=function t(e){w&&clearTimeout(w);_[B]=_[j]=_[A]=null;z[R](_);b&&z[R](b)};z[E](_,g=z.firstChild);b&&z[E](b,g);w=d>0&&setTimeout(function(){C(U)},d)}return e}e.setup=function(t){k.extend(F,t)};k.jsonp=e})(jQuery);(function(t,e){if(typeof module!=="undefined"&&module.exports){module.exports=e()}else if(typeof define==="function"&&define.amd){define(e)}else{t.InquiryMINI=e.call(t)}})(this,function(){"use strict";var t=null,e="&#xe007;",i="&#xe006;",n="//www.made-in-china.com/inquirybasket.do?action=inquiryList",d="//www.made-in-china.com/inquirybasket.do?action=addInquiry&type={type}&sourceId={id}&referrer="+encodeURIComponent(window.location.href),p="//www.made-in-china.com/inquirybasket.do?action=addInquiryList",s="//www.made-in-china.com/inquirybasket.do?action=deleteInquiry&type={type}&recordId={id}",a="//www.made-in-china.com/inquiry-basket/",m="//www.made-in-china.com/sendInquiry/{type}s_{ids}.html",y="//www.made-in-china.com/compare/{type}_{ids}.html?from=1&page=",v="//membercenter.made-in-china.com/newtrade/order/page/buyer-start-order.html?from=2&prodId=",r=window.navigator.userAgent.match(/iPhone|iPad|iPod/i)?true:false;var o=function t(e,i,n){var a=(e||[]).slice();i=i||[];n=n||this;for(var r=0;r<a.length;r++){a[r].apply(n,i)}};function c(){if(!(this instanceof c))return new c;if(t)return t;t=this;this._={};this._.type=null;this._.typeMap={prod:"product",com:"supplier",o2o:"o2oProduct"};this._.typeInvertMap={product:"prod",supplier:"com",o2oProduct:"o2o"};this._.expand=false;this._.selected={};this._.isIE6=!+"/v1"&&!window.XMLHttpRequest;this._.animateOpts={speed:1e3,carrier:null,width:"auto",height:"auto"};this._.inquiryOpts={max:10,min:1,OVER_LIMIT:"Send inquiries on 10 items at most.",LESS_LIMIT:"Select at least 1 item to send inquiry."};this._.compareOpts={max:5,min:2,OVER_LIMIT:"Each time compare 5 items at most.",LESS_LIMIT:"Select at least 2 items to compare."};this._.orderOpts={min:1,max:100,OVER_LIMIT:"Start Order on 100 items at most.",LESS_LIMIT:"Select at least 1 item to start order."};this._.beforeInquiry=null;this._.beforeCompare=null;this._.afterRender=[];this.carrier=null;this.currentData=null;this.showItem=null;this.cacheData=null;this.style={};this.style.selected="ibselected";this.sendStatus=false;this.queue=[];this.template={tab:function t(e){var i=e.o2oProduct&&e.o2oProduct.data;var n=i?i.reduce(function(t,e){return t+e.items.length},0):0;var a=n>0;var r=a?"in-basket-tab-3":"in-basket-tab-2";var s="";if(!a){s='style="display: none;"'}return['<ul class="in-basket-tab">','    <li class="in-basket-tab-item '+r+' J-productCount" data-Type="product">Products<span class="tab-count" style="margin-left:5px;">(<em>0</em>)</span></li>','    <li class="in-basket-tab-item '+r+' J-supplierCount" data-Type="supplier">Suppliers<span class="tab-count" style="margin-left:5px;">(<em>0</em>)</span></li>','    <li class="in-basket-tab-item '+r+' J-o2oProductCount" data-Type="o2oProduct" '+s+'>Exhibition<span class="tab-count" style="margin-left:5px;">(<em>0</em>)</span></li>',"</ul>"].join("")},nothing:'<div class="in-basket-nomsg">There are no {TYPE}s in your Inquiry Basket.</div>',list:['<div class="in-basket-wrap obelisk-form">','    <div class="in-basket-con J-productContent" style="display:none;">{PRODUCT}</div>','    <div class="in-basket-con in-basket-con-supplier J-supplierContent" style="display:none;">{SUPPLIER}</div>','    <div class="in-basket-con J-o2oProductContent" style="display:none;">{O2OPRODUCT}</div>',"</div>"].join(""),container:['<div id="in-basket">','    <div class="in-basket-main-info" id="J-inquiryControl">','        <i class="micon">&#xe020;</i>','        <span class="in-basket-main-info-txt">Inquiry Basket </span><span class="in-basket-main-info-txt J-inquiryTotal">(<em>0</em>/0)</span> ','        <i class="micon J-arr">&#xe007;</i>',"    </div>","</div>"].join(""),items:function t(e){return['{LIST}<div class="in-basket-tips J-inquiryError" style="display:none;"></div>',e.hasTrading?'<div class="in-basket-fun has-trading">':'<div class="in-basket-fun">','    <div class="input-checkbox">','       <label class="input-wrap">','           <input type="checkbox" class="J-inquiryCheckedAll">','           <span class="input-ctnr"></span> Select All',"       </label>","    </div>",'    <div class="in-basket-btn-group">',e.hasTrading?'        <a href="javascript:void(0);" rel="nofollow" class="btn btn-main-light btn-send J-sendInquiry" target="_blank">Send Inquiry</a>':'        <a href="javascript:void(0);" rel="nofollow" class="btn btn-main btn-send J-sendInquiry" target="_blank">Send Inquiry</a>','        <a href="javascript:void(0);" rel="nofollow" class="btn btn-compare J-compare" target="_blank">Compare</a>',"    </div>","</div>"].join("")},item:function t(e){var i="";var n="";if(e.shows&&e.shows.length){n+=$.map(e.shows,function(t){var e="";if(t.boothNo){e='<span class="tag tag-color tag-main" title="'+(t.name||"")+'">Booth No. '+t.boothNo+"</span>"}return e}).join("")}if(e.isOnlineTrading){n+=' <span class="tag tag-color tag-main sts-tag" title="Secured Trading Service">Secured Trading Service</span>'}if(n){i='<div class="in-basket-tags">{TAGS}</div>'.replace("{TAGS}",n)}var a="";if(e.type!=="supplier"){a=['<div class="in-basket-pic-wrap">','    <div class="in-basket-pic">','        <a href="'+e.link+'">','            <img data-src="'+e.imgLink+'" />',"        </a>","    </div>","</div>"].join("")}return['<div class="in-basket-checker input-checkbox">','    <label class="input-wrap">','        <input type="checkbox" class="J-item-checkbox"'+(e.checked?"checked":"")+">",'        <span class="input-ctnr"></span>',"    </label>","</div>",a,'<div class="in-basket-text">','    <div class="in-basket-title">','        <a href="'+e.link+'" title="'+e.name+'" alt="'+e.name+'" target="_blank">'+e.name+"</a>","    </div>",i,"</div>",'<div class="in-basket-delete-wrap">','    <a href="javascript:void(0);" class="in-basket-delete"'+(r?'style="display:inline;"':"")+'><i class="micon">&#xe00c;</i></a>',"</div>"].join("")},companyItem:'<li class="in-basket-supplier J-companyName">'+'<div class="in-basket-name" title="{COMPANYNAME}">{COMPANYNAME}</div>'+"</li>"};this.config={add2basketTpl4Supplier:'<a title="Add to inquiry basket to compare." href="javascript:$fn" rel="nofollow"><i class="micon">&#xe05e;</i>Inquiry Basket</a>',alreadyTpl4Supplier:'<a style="text-decoration:none;" href="javascript:;" onclick="showMiniInquiry(\'supplier\');"><i class="micon">&#xe05f;</i>Inquiry Basket</a>'}}c.prototype.setConfig=function(t){var e=this;e.config=t};c.prototype._initEvent=function(){if(!this.carrier)throw"carrier must be exist.";var d=this;var p=null;this._.elems.inquiryControl.bind("click",function(t){if(!d._.expand){d.show.call(d)}else{d.hide.call(d)}t.stopPropagation()});this._.elems.tabMenu.children().bind("click",function(t){var e=$(this).attr("data-Type");d.switchType(e);t.stopPropagation()});function f(t){if(t[0].nodeName.toLowerCase()==="li"){return t}else{return t.parents("li")}}if(!r){this._.elems.list.bind("mouseover",function(t){var e=f($(t.target));if(!e.hasClass("in-basket-supplier")){e.addClass("hover")}});this._.elems.list.bind("mouseout",function(t){f($(t.target)).removeClass("hover")})}this._.elems.list.bind("click",function(t){var e=f($(t.target)),i=e.attr("data-ItemId"),n=e.attr("data-UrlId"),a=null;t.stopPropagation();if(e.hasClass("J-companyName")){return}var r=$(t.target);if(r.is(".input-checkbox")){r.closest("li[data-itemid]").trigger("click");return}if(r.is(".input-ctnr, .input-wrap")){return}d.showItem&&d.showItem.find(".J-inquiryError").hide();if(r.hasClass("in-basket-delete")||r.closest(".in-basket-delete").length){t.preventDefault();$(t.target).hide();d.removeItem(i,function(){e.fadeOut("slow",function(){if(e.prev().hasClass("J-companyName")&&(e.next().length===0||e.next().hasClass("J-companyName"))){e.prev().remove()}$(e).remove();d._autoScroll()});d._updateSelect.call(d,n,false)});return}if(r.hasClass("J-inquiryCheckedAll")){var s=r.prop("checked");if(s){d.showItem.find("li[data-itemid]:not(.ibselected)").trigger("click")}else{d.showItem.find("li[data-itemid].ibselected").trigger("click")}return}if(r.is(".input-checkbox")||r.closest(".input-checkbox").length){e.toggleClass("ibselected");d._updateSelect.call(d,n,e.hasClass("ibselected"));g.call(d);return}var o=r.closest(".input-checkbox").length===0&&(r.is("li[data-itemid]")||r.closest("li[data-itemid]").length&&r.is(":not(a, img)"));if(o){e.toggleClass("ibselected");var c=e.find(".J-item-checkbox");c.prop("checked",!c.prop("checked"));d._updateSelect.call(d,n,c.prop("checked"));g.call(d);return}if($(t.target).hasClass("J-sendInquiry")){a=d._transURL(m,d._.inquiryOpts);if(d._.type===d._.typeMap.o2o){if(a){a=a+"?"+$.param({from:"basket",type:"o2o"})}}else if(d._.beforeInquiry){p=d._.beforeInquiry(a);if(p){a=p}}if(a){$(t.target).attr("href",a)}else{t.preventDefault()}}if($(t.target).hasClass("J-compare")){var l=y;if(d._.beforeCompare){p=d._.beforeCompare(l);if(p){l=p}}a=d._transURL(l,d._.compareOpts);if(a){$(t.target).attr("href",a)}else{t.preventDefault()}}if($(t.target).is(".J-start-order-mini")){var l=v;if(d._.beforeOrder){p=d._.beforeOrder(l);if(p){l=p}}l=d._transURL(l,d._.orderOpts);var h=d.getSelectedItems();var u=[];$.each(d.cacheData.product&&d.cacheData.product.data,function(t,e){$.each(e.items,function(t,e){if($.inArray(e.urlId,h)!==-1&&e.isOnlineTrading){u.push(e.urlId)}})});if(u.length){t.target.href=l+u.join(",")}else{d._showError("There is no tradable product selected!");t.preventDefault()}}});$(document.body).bind("click",function(t){if($(t.target).parents("#in-basket").length===0&&$(t.target).parents(".already-in-basket").length===0){if(d._.expand&&$(t.target).parents(".add-to-basket").length===0){d.hide()}}});var n=false;this._.elems.list.bind("mousewheel",function(t){var e=t.originalEvent.detail||t.originalEvent.wheelDelta;var i=$(this).find("ul:visible")[0];if(e>0&&i.scrollTop===0||e<0&&i.scrollHeight===i.scrollTop+$(i).height()){n=true}else{n=false}});this._.elems.list.bind("mouseleave",function(){n=false});$(window).bind("mousewheel",function(t){if(n){t.preventDefault()}});$(window).bind("resize",function(){if(d._.expand){d._autoScroll()}});if(this._.isIE6){$(window).bind("scroll",function(){var t=parseInt(document.body.scrollTop?document.body.scrollTop:document.documentElement.scrollTop);d.carrier.css("top",t+parseInt(document.documentElement.clientHeight)-d.carrier.height()+"px")})}};function g(){var t=this._.selected[this._.type]&&this.showItem.find("li[data-itemid]").length===this._.selected[this._.type].length;this.showItem&&this.showItem.find(".J-inquiryCheckedAll").prop("checked",t)}c.prototype._updateSelect=function(t,e){if(!t)return this._.selected[this._.type];if(!this._.selected[this._.type])this._.selected[this._.type]=[];var i=this._.selected[this._.type].join(",");if(e&&i.indexOf(t)===-1){this._.selected[this._.type].push(t)}else{var n=this._.selected[this._.type].length;while(n>0){n--;if(this._.selected[this._.type][n]===t){this._.selected[this._.type].splice(n,1);return this._.selected}}}return this._.selected};c.prototype._initBasket=function(t){var e,i,n,s,o=t||this._.type,a=o.toUpperCase();function r(t){var e="",i="",n=this.getSelectedItems().join(","),a=false;for(s=0;s<t.length;s++){a=n.indexOf(t[s].urlId)!==-1;e=this.template.item({type:o,link:decodeURIComponent(t[s].redirectUrl),name:this._escape(t[s].name),shortDesc:t[s].shortCut,imgLink:decodeURIComponent(t[s].imgUrl),shows:t[s].expo||[],checked:a,isOnlineTrading:!!t[s].isOnlineTrading});var r=a?"ibselected":"";i+='<li class="in-basket-item '+r+'" data-ItemId="'+t[s].id+'" data-UrlId="'+t[s].urlId+'">'+e+"</li>"}return i}if(this.currentData&&this[o+"Count"]>0){i="<ul>";if((o==="product"||o==="o2oProduct")&&this.currentData.length){for(n=0;n<this.currentData.length;n++){i+=this.template.companyItem.replace(/{COMPANYNAME}/g,this._escape(this.currentData[n].name));if(this.currentData[n].items&&this.currentData[n].items.length){i+=r.call(this,this.currentData[n].items)}}}else{i+=r.call(this,this.currentData)}i+="</ul>";if((o==="product"||o==="o2oProduct")&&this.currentData.length){var c=false;$.each(this.currentData,function(t,e){$.each(e.items,function(t,e){if(e.isOnlineTrading){c=true}})});e=this.template.items({hasTrading:c}).replace("{LIST}",i)}else{e=this.template.items({}).replace("{LIST}",i)}}if(!this.currentData||this.currentData.length===0){e=this.template.nothing.replace("{TYPE}",o==="o2oProduct"?"exhibition product":a.toLowerCase())}this._.elems[o+"Content"]&&this._.elems[o+"Content"].html(e);this._lazyImage(this._.elems[o+"Content"]);g.call(this)};c.prototype._initCount=function(){this.o2oProductCount=this.supplierCount=this.supplierLimit=this.productCount=this.productLimit=0;if(this.cacheData){var t=this.cacheData;this.supplierCount=parseInt(t.supplier.data.length,10);this.supplierLimit=parseInt(t.supplier.limit,10);this.productLimit=parseInt(t.product.limit,10);var e=0;while(t.product&&t.product.data[e]){this.productCount+=t.product.data[e].items.length;e++}var i=0;while(t.o2oProduct&&t.o2oProduct.data[i]){this.o2oProductCount+=t.o2oProduct.data[i].items.length;i++}var n=t.o2oProduct&&t.o2oProduct.data;this.o2oProductCount=n?n.reduce(function(t,e){return t+e.items.length},0):0;this.totalCount=this.supplierCount+this.productCount+this.o2oProductCount}this._.elems.totalCount[0].innerHTML="(<em>"+this.totalCount+"</em>)";this._.elems.productCount[0].innerHTML="(<em>"+this.productCount+"</em>)";this._.elems.supplierCount[0].innerHTML="(<em>"+this.supplierCount+"</em>)";this._.elems.o2oProductCount[0].innerHTML="(<em>"+this.o2oProductCount+"</em>)"};c.prototype._escape=function(e){if(e){try{return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&#034;")}catch(t){return e}}return e};c.prototype._rePosition=function(t){var e=0,i=this,n=this.carrier.css("overflow")!=="hidden";if(this._.isIE6){this.carrier.css("top","auto")}if(n){e=parseInt(this._.elems.inquiryControl.outerHeight(),10)-parseInt(this.carrier.outerHeight(),10)}else{this.carrier.css({height:"auto",overflow:"visible"});this.carrier.css("bottom",parseInt(this._.elems.inquiryControl.outerHeight(),10)-parseInt(this.carrier.outerHeight(),10))}this.carrier.animate({bottom:e+"px"},400,"easeInQuart",function(){i._initCount.call(i);if(n){i.carrier.css({height:"34px",overflow:"hidden",bottom:0})}t&&t.call(i)})};c.prototype._animate=function(t,e){if(!this._.animateOpts.carrier)return;var i=this._.animateOpts,n=this.carrier;if(this._.expand){n=this._.elems.tabMenu}t=$(t);i.carrier.style.cssText="display:none;width:"+i.width+"px;height:"+i.height+"px;position:absolute; z-index:21000;";t.show();var a={start:{x:t.offset().left,y:t.offset().top,angle:325.325,length:.458},end:{x:n.offset().left+parseInt(n.width())/2,y:n.offset().top,angle:39.018,length:.18}};document.body.appendChild(i.carrier);$(i.carrier).show();$(i.carrier).animate({path:new $.path.bezier(a)},i.speed,function(){$(i.carrier).hide(200);$(i.carrier).remove();e&&e()})};c.prototype._showError=function(t){var e=this;if(this._.timer)clearTimeout(this._.timer);this.showItem.find(".J-inquiryError").html(t).show();this._.timer=setTimeout(function(){e.showItem.find(".J-inquiryError").hide();e._.timer=null},4e3)};c.prototype._transURL=function(t,e){var i=this._.type===this._.typeMap.o2o?this._.typeMap.prod:this._.type;var n=this._.typeInvertMap[i]||this._.typeInvertMap.product,a=this.getSelectedItems();if(a.length<e.min){this._showError(e.LESS_LIMIT);return null}if(a.length>e.max){this._showError(e.OVER_LIMIT);return null}return t.replace("{type}",n).replace("{ids}",a.join(","))};c.prototype._getItemData=function(t,e){var i;if(t.length){for(var n=0,a=t.length;n<a;n++){if((this._.type==="product"||this._.type==="o2oProduct")&&t[n].items){i=this._getItemData(t[n].items,e);if(i)return i;continue}if(t[n].id==e){return t[n]}}}return null};c.prototype.geometric=function(t,e,i,n){var a={w:i,h:n};if(t<=i&&e<=n){return{w:t,h:e}}if(t/e>i/n){if(i<t)a.h=e*i/t}else{if(n<e)a.w=t*n/e}return a};c.prototype._lazyImage=function(t){if(!t)return;var e=t.find("img[data-src]"),i,n,a;var r=this;for(var s=0;s<e.length;s++){(function(t){if(!t.src){a=new Image;a.src=decodeURIComponent(t.getAttribute("data-src"));if(a.complete){n=r.geometric(a.width,a.height,50,50);t.width=n.w;t.height=n.h}else{a.onload=function(){return function(){n=r.geometric(this.width,this.height,50,50);t.width=n.w;t.height=n.h}}()}t.src=decodeURIComponent(t.getAttribute("data-src"))}})(e[s])}};c.prototype._autoScroll=function(){var t=this._.elems[this._.type+"Content"].find("ul");if(!t.length||!t.find("li").length||!this._.expand)return;t.css("height","auto");t.css("overflow","hidden");var e=t.outerHeight(),i=this._.elems[this._.type+"Content"].outerHeight()+72,n=document.documentElement.clientHeight-i,a=t.find("li[data-itemId]").outerHeight();e="auto";if(t.find(".J-companyName").length){a+=t.find(".J-companyName").outerHeight()}if(n<=200){e=document.documentElement.clientHeight-350;if(e<=a){e=a}t.css("height",e);t.css("overflow-y","auto")}};c.prototype.render=function(){this.getCrossData(n,function(t){this.cacheData=t;this.carrier=$(this.template.container);this._.elems={};this._.elems.inquiryControl=this.carrier.find("#J-inquiryControl");this._.elems.totalCount=this._.elems.inquiryControl.find(".J-inquiryTotal");this._.elems.arr=this._.elems.inquiryControl.find(".J-arr");this._.elems.list=$(this.template.list);this._.elems.productContent=this._.elems.list.find(".J-productContent");this._.elems.supplierContent=this._.elems.list.find(".J-supplierContent");this._.elems.o2oProductContent=this._.elems.list.find(".J-o2oProductContent");this.carrier.append(this._.elems.list);this._.elems.tabMenu=$(this.template.tab(t));this._.elems.productCount=this._.elems.tabMenu.find(".J-productCount>span");this._.elems.supplierCount=this._.elems.tabMenu.find(".J-supplierCount>span");this._.elems.o2oProductCount=this._.elems.tabMenu.find(".J-o2oProductCount>span");this.carrier.append(this._.elems.tabMenu);this.carrier.css({height:"34px",overflow:"hidden"});this._initCount();if(this.totalCount===0){this.carrier.css("display","none");$("body").removeClass("isMiniInquiry")}else{$("body").addClass("isMiniInquiry")}$(document.body).append(this.carrier);if(this._.isIE6){document.getElementsByTagName("html")[0].style.cssText="background-image:url(about:blank); background-attachment:fixed;";this.carrier.css({position:"absolute",right:"0px"})}this._initEvent();o(this._.afterRender,[null,t])},null,function(t,e){o(this._.afterRender,["Oops! An Error Occurred."])})};c.prototype.show=function(){this._.elems.tabMenu.children("[data-Type="+(this._.type||"product")+"]").trigger("click");if(this._.expand)return;this._.elems.arr.html(i);this._.expand=true;this._.elems.inquiryControl.addClass("in-basket-main-info-top");this._autoScroll();this._rePosition()};c.prototype.hide=function(){this._rePosition(function(){this._.elems.arr.html(e);this._.elems.inquiryControl.removeClass("in-basket-main-info-top");this._.expand=false})};c.prototype.addItem=function(o,c,l,h){var u=this;var t=function t(){return new Promise(function(i,t){var e=1,n=u,a=d.replace("{type}",c),r=u._.typeMap[c]||"product",s=o;u.carrier.css("display","");$("body").addClass("isMiniInquiry");if(l){u._.animateOpts.carrier=l.carrier||null;u._.animateOpts.start=l.start||null;u._.animateOpts.speed=l.speed||1e3;u._.animateOpts.width=l.width||"auto";u._.animateOpts.height=l.height||"auto"}if(Object.prototype.toString.call(o)==="[object Array]"){e=o.length;a=p;s="type="+c+"&sourceIds="+o.join("&sourceIds=")}if(u[r+"Count"]+e>u[r+"Limit"]){u.switchType(r);u._showError("You only can add "+u[r+"Limit"]+" or fewer "+r+"s.");u.show();u.sendStatus=false;return false}u.getCrossData(a,function(e){n.cacheData=e;n.currentData=e[r].data;n._animate.call(n,l.start,function(){n._initCount();h&&h(e);n.refresh(r);if(n._.expand){n._autoScroll()}if(a===p){var t=s.match(/sourceIds=([a-zA-Z0-9]+)/g).map(function(t){return t.split("=")[1]});t.forEach(function(t){if(!$(".in-basket-item[data-urlid=".concat(t,"]")).is(".ibselected")){$(".in-basket-item[data-urlid=".concat(t,"]")).trigger("click")}})}else{if(!$(".in-basket-item[data-urlid=".concat(s,"]")).is(".ibselected")){$(".in-basket-item[data-urlid=".concat(s,"]")).trigger("click")}}i()})},s,function(){t()})})};this.queue.push({taskId:o,task:t,type:c});this.perform()};c.prototype.perform=function(){var t,e,i=this;if(this.sendStatus){return}if(this.queue.length===0){this.sendStatus=false;return}var n=this.queue[0].task;var a=this.queue[0].type;var r=this.queue[0].taskId;if(a==="prod"&&(t=this.cacheData.product)!==null&&t!==void 0&&(e=t.data)!==null&&e!==void 0&&e.some(function(t){return(t.items||[]).some(function(t){return t.urlId===r})})){this.queue.shift();this.perform();return}this.sendStatus=true;n().then(function(){i.queue.shift();i.sendStatus=false;i.perform()}).catch(function(t){i.queue.shift();i.sendStatus=false;i.perform()})};c.prototype.removeItem=function(t,e){if(typeof t==="function"){this._.removeBack=t;return}var i=t,n=this,a=this.cacheData&&this.cacheData[this._.type],r=n._getItemData(this.currentData,t);if(Object.prototype.toString.call(t)==="[object Array]"){i=t.join(",")}this.getCrossData(s,function(t){n.cacheData=t;n.currentData=t[n._.type].data;e&&e();n._initBasket();if(n._.expand){n._autoScroll()}n._initCount();if(n._.removeBack&&r){n._.removeBack(r.urlId,n._.type,r.imgUrl)}if(this.totalCount===0){this.carrier.css("display","none");$("body").removeClass("isMiniInquiry")}},i)};c.prototype.refresh=function(t){this._initBasket(t);this.switchType(t)};c.prototype.clear=function(){this.cacheData.supplier.data=[];this.cacheData.product.data=[];this.cacheData.o2oProduct.data=[];this.currentData=null;this._initCount();if(this._.type){var t=["product","supplier","o2oProduct"];var e=t.indexOf(this._.type);e=e>=0?e:0;this._.type=t[(e+1)%t.length];this._initBasket()}this._rePosition()};c.prototype.getSelectedItems=function(){if(!this._.type||!this.cacheData[this._.type])return[];return this._.selected[this._.type]||[]};c.prototype.getCount=function(t){return this[this._.type+"Count"]?this[this._.type+"Count"]:0};c.prototype.switchType=function(t){if(this._.type===t||t!=="product"&&t!=="supplier"&&t!=="o2oProduct")return;this._.type=t;this.currentData=this.cacheData&&this.cacheData[this._.type].data;if(this.showItem){this.showItem.hide()}this._initCount();this.showItem=this._.elems[this._.type+"Content"];if(!this._[this._.type+"init"]){this._initBasket();this._[this._.type+"init"]=true}this._.elems.tabMenu.children().removeClass("ibselected");this._.elems.tabMenu.children("[data-type="+this._.type+"]").addClass("ibselected");this.showItem.show();this._autoScroll()};c.prototype.getCrossData=function(t,i,e,n){var a=this._.typeInvertMap[this._.type]||this._.typeInvertMap.product,r=this;t=t.replace("{type}",a);if(e&&t.indexOf("{id}")!==-1){t=t.replace("{id}",e);e=null}$.jsonp({url:t+"&_="+(new Date).getTime(),cache:false,callbackParameter:"jsoncallback",data:e||"",success:function t(e){i&&i.call(r,e)},complete:function t(){},error:function t(e,i){n&&n.call(r,e,i);throw"Oops! An Error Occurred."}})};c.prototype.beforeInquiry=function(t){this._.beforeInquiry=t};c.prototype.beforeCompare=function(t){this._.beforeCompare=t};c.prototype.afterRender=function(t){if(typeof t==="function"){this._.afterRender.push(t)}};return c});(function(){var t=document.createElement("link");t.type="text/css";t.rel="stylesheet";t.href="https://www.micstatic.com/common/js/business/plugs/inquiryMINI/min-basket_de3d456e.css?t="+(new Date).getTime();document.getElementsByTagName("head")[0].appendChild(t)})();var ADD_TO_BASKET_CALLBACKS={product:function t(e){var i=$("."+e);if(i.attr("iconOnly")){i.attr("href","javascript:;");i.attr("title","").addClass("selected").html('<i class="micon">&#xe05f;</i>')}else{var n=$(IBalready);n.addClass(e);if(i.parent().hasClass("js_abs")||i.parent().hasClass("basket-wrap")){n.append('<i class="micon">&#xe05f;</i>Inquiry Basket');i.replaceWith(n);$("."+e).parent().show()}else if(i.parent().hasClass("J-prodList")){i.parent().find(".tip-para").html("Inquiry Basket");i.parent().find(".tip-inquiry").addClass("tip-inquiry-already");n.append('<a style="text-decoration:none;" href="javascript:;" onclick="showMiniInquiry(\'product\');"><i class="ob-icon icon-cart-success"></i></a>');i.replaceWith(n)}else{n.append('<a style="text-decoration:none;display:block;width:auto" href="javascript:;" onclick="showMiniInquiry(\'product\');"><i class="micon">&#xe05f;</i>Inquiry Basket</a>');i.each(function(t,e){$(e).replaceWith(n.clone())})}}},supplier:function t(e){var i=$("."+e);$("."+e+"Animate").remove();var n=$(IBalready);n.addClass(e);if(i.parent().hasClass("js_abs")||i.parent().hasClass("basket-wrap")){n.append('<i class="micon">&#xe05f;</i>Inquiry Basket');i.replaceWith(n);$("."+e).parent().show()}else if(i.parent().hasClass("J-prodList")){i.parent().find(".tip-para").html("Inquiry Basket");i.parent().find(".tip-inquiry").addClass("tip-inquiry-already");n.append('<a style="text-decoration:none;" href="javascript:;" onclick="showMiniInquiry(\'product\');"><i class="ob-icon icon-cart-success"></i></a>');i.replaceWith(n)}else{n.append(inquiryMini.config.alreadyTpl4Supplier);i.replaceWith(n)}var a=n.parent().find("div.pic .micon");if(a.size()==1){n.find(".micon").remove();a.html("&#xe05f;");a.attr("title","");a.parent().attr("href","//www.made-in-china.com/inquiry-basket/");a.parent().attr("target","_blank")}},o2oProduct:function t(e){var i=$("."+e);if(i.attr("iconOnly")){i.attr("href","javascript:;");i.attr("title","").addClass("selected").html('<i class="micon">&#xe05f;</i>')}else{var n=$(IBalready);n.addClass(e);if(i.parent().hasClass("js_abs")||i.parent().hasClass("basket-wrap")){n.append('<i class="micon">&#xe05f;</i>Inquiry Basket');i.replaceWith(n);$("."+e).parent().show()}else if(i.parent().hasClass("J-prodList")){i.parent().find(".tip-para").html("Inquiry Basket");i.parent().find(".tip-inquiry").addClass("tip-inquiry-already");n.append('<a style="text-decoration:none;" href="javascript:;" onclick="showMiniInquiry(\'o2oProduct\');"><i class="ob-icon icon-cart-success"></i></a>');i.replaceWith(n)}else{n.append('<a style="text-decoration:none;" href="javascript:;" onclick="showMiniInquiry(\'o2oProduct\');"><i class="micon">&#xe05f;</i>Inquiry Basket</a>');i.replaceWith(n)}}}};var IBalready='<span class="already-in-basket link"></span>',IBadd='<span class="add-to-basket"></span>',inquiryMini=new InquiryMINI;inquiryMini.afterRender(function(t,s){if(t){return}var o={product:"",supplier:"com-",o2oProduct:"o2o-"};"product,o2oProduct,supplier".replace(/\w+/g,function(t){var e=(s[t]||{}).data||[];if(t==="supplier"){for(var i=0;i<e.length;i++){var n=e[i]||[];var a=n.urlId||n.id;a=o[t]+a;if($("."+a).is(".J-if-in-basket")){ADD_TO_BASKET_CALLBACKS[t](a)}}}else{for(var i=0;i<e.length;i++){var n=e[i].items||[];for(var r=0;r<n.length;r++){var a=n[r].urlId||n[r].id;a=o[t]+a;if($("."+a).is(".J-if-in-basket")){ADD_TO_BASKET_CALLBACKS[t](a)}}}}})});inquiryMini.render();inquiryMini.beforeCompare(function(t){if($("#compareFromPage").length){return t+=$("#compareFromPage").val()}});inquiryMini.beforeInquiry(function(t){if($("#contactUrlParam").length){var e=$("#contactUrlParam").val();if(e!==""&&""!==t&&null!==t){if(e.indexOf("&event=basket")==-1){return t+e+"&event=basket"}else{return t+e}}}});var getData=function t(){var e,i,n,a;return((e=window)===null||e===void 0?void 0:(i=e.inquiryMini)===null||i===void 0?void 0:(n=i.cacheData)===null||n===void 0?void 0:(a=n.product)===null||a===void 0?void 0:a.data)||[]};function add2BasketProd(e,t,i){if(getData().some(function(t){return t.items.some(function(t){return t.urlId===e})})){window.showMiniInquiry&&window.showMiniInquiry();return}var n=document.createElement("div");var a=document.createElement("img");var r=new Image;var s=e;r.src=t;a.src=t;if(r.complete){var o=inquiryMini.geometric(r.width,r.height,50,50);a.width=o.w;a.height=o.h}else{a.width=50;a.heigth=50;r.onload=function(){return function(){o=inquiryMini.geometric(this.width,this.height,50,50);a.width=o.w;a.height=o.h}}()}n.appendChild(a);if(e&&e.indexOf("pro-")===0){s=e.substring(4,e.length)}inquiryMini.addItem(s,"prod",{start:$("."+(i||e)+":visible").eq(0),carrier:n},function(){ADD_TO_BASKET_CALLBACKS.product(e);refreshHead()})}function add2BasketCom(t,e){var i=document.createElement("div");var n=document.createElement("img");var a=t;var r=$("."+a);n.src="https://www.micstatic.com/common/js/business/plugs/inquiryMINI/img/min-basket-com-logo_ceb1ede2.png";i.appendChild(n);i.className=a+"Animate";if(t&&t.indexOf("com-")===0){a=t.substring(4,t.length)}r.eq(0).parent().show();inquiryMini.addItem(a,"com",{start:$("."+t+":visible").eq(0),carrier:i},function(){ADD_TO_BASKET_CALLBACKS.supplier(t);refreshHead()})}function add2BasketO2o(t,e){var i=document.createElement("div");var n=document.createElement("img");var a=new Image;var r=t;a.src=e;n.src=e;if(a.complete){var s=inquiryMini.geometric(a.width,a.height,50,50);n.width=s.w;n.height=s.h}else{n.width=50;n.heigth=50;a.onload=function(){return function(){s=inquiryMini.geometric(this.width,this.height,50,50);n.width=s.w;n.height=s.h}}()}i.appendChild(n);if(t&&t.indexOf("o2o-")===0){r=t.substring(4,t.length)}inquiryMini.addItem(r,"o2o",{start:$("."+t+":visible").eq(0),carrier:i},function(){ADD_TO_BASKET_CALLBACKS.o2oProduct(t);refreshHead()})}function showMiniInquiry(t){if(inquiryMini){inquiryMini.switchType(t);inquiryMini.show()}return false}inquiryMini.removeItem(function(t,e,i){if(!t){return}var n={product:"pro-",supplier:"com-",o2oProduct:"o2o-"};var a={product:"add2BasketProd",supplier:"add2BasketCom",o2oProduct:"add2BasketO2o"};var r=$(IBadd),s=$("."+t),o=n[e]||n.product,c=a[e]||a.product;if(s.size()==0){s=$("."+o+t);t=o+t;r.addClass(t);var l="".concat(c,"('").concat(t,"', '").concat(i,"')");r.append(inquiryMini.config.add2basketTpl4Supplier.replace("$fn",l));s.replaceWith(r)}else{if(s.attr("iconOnly")){s.attr("href","javascript:"+c+"('"+t+"', '"+i+"')");s.attr("title","Add to inquiry basket to compare.");s.removeClass("selected").html('<i class="micon">&#xe020;</i>')}else if(s.parent().hasClass("J-prodList")){s.parent().find(".tip-para").html("Add to inquiry basket to compare.");s.parent().find(".tip-inquiry").removeClass("tip-inquiry-already");r.addClass(t);r.append('<a href="javascript:'+c+"('"+t+"', '"+i+'\')" rel="nofollow"><i class="ob-icon icon-cart-add"></i></a>');s.replaceWith(r)}else{r.addClass(t);r.append('<a title="Add to inquiry basket to compare." href="javascript:'+c+"('"+t+"', '"+i+'\')" rel="nofollow"><i class="micon">&#xe05e;</i>Inquiry Basket</a>');s.replaceWith(r);if($("."+t).parent().hasClass("js_abs")){$("."+t).parent().hide()}}}var h=r.parent().find("div.pic .micon");if(h.size()==1){r.find(".micon").remove();h.html("&#xe05e;");h.attr("title","Add to inquiry basket to compare.");h.parent().attr("href","javascript:add2BasketCom('"+t+"', '"+i+"')");h.parent().removeAttr("target")}refreshHead()});function refreshHead(){window.requestLogonStatus&&window.requestLogonStatus();window.logonRefresh&&window.logonRefresh();window.topLoginInfo&&window.topLoginInfo.request&&window.logonRefresh!==window.topLoginInfo.request&&window.topLoginInfo.request()}function addCom2BasketNormally(i,n){var a=document.createElement("div");var t=document.createElement("img");t.src="https://www.micstatic.com/common/js/business/plugs/inquiryMINI/img/min-basket-com-logo_ceb1ede2.png";a.appendChild(t);var r=[i,"Animate",Math.floor(Math.random()*1e4)].join("-");a.className=r;return new Promise(function(t,e){inquiryMini.addItem(i,"com",{start:n,carrier:a},function(){$("."+r).remove();t()})})}
//# sourceMappingURL=../../../../../__sources__/common/js/business/plugs/inquiryMINI/inquiryMINI_eeb5f537.js.map
