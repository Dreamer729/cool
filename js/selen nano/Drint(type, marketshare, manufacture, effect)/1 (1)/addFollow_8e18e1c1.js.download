function _typeof(e){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _defineProperty(e,o,t){o=_toPropertyKey(o);if(o in e){Object.defineProperty(e,o,{value:t,enumerable:true,configurable:true,writable:true})}else{e[o]=t}return e}function _toPropertyKey(e){var o=_toPrimitive(e,"string");return _typeof(o)==="symbol"?o:String(o)}function _toPrimitive(e,o){if(_typeof(e)!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==undefined){var i=t.call(e,o||"default");if(_typeof(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(e)}void function(){var e={hideTimeOut:null,init:function e(){var o=document.createElement("section");o.innerHTML='<span class="text"></span>';o.id="toast";o.setAttribute("class","discover-toast");o.style.display="none";document.body.appendChild(o)},show:function e(o,t,i){if(this.hideTimeOut){clearTimeout(this.hideTimeOut);this.hideTimeOut=null}if(!o){console.error("text 不能为空!");return}var n=document.getElementById("toast");if(!n){console.error("DOM 不存在!");return}var a=n.querySelector(".text");switch(t){case"success":o='<i class="ob-icon icon-yes"></i>'+o;break;case"warn":o='<i class="ob-icon icon-info"></i>'+o;break;case"error":o='<i class="ob-icon icon-error"></i>'+o;break;default:break}a.innerHTML=o||"";n.style.display="block";var l=this;this.hideTimeOut=setTimeout(function(){n.style.display="none";l.hideTimeOut=null},i||2e3)},hide:function e(){if(this.hideTimeOut){clearTimeout(this.hideTimeOut);this.hideTimeOut=null}var o=document.getElementById("toastWaka");if(o){o.style.display="none"}}};window.Toast=e}();function autoComplete(e){var o={input:null,tipCls:"",hoverCls:"",type:"login",datas:{suppler:["163.com","sina.com","126.com","sohu.com","yahoo.com.cn","yahoo.cn","139.com","qq.com"],buyer:["gmail.com","hotmail.com","yahoo.com","msn.com","live.com","aol.com"],login:["gmail.com","hotmail.com","yahoo.com","msn.com","live.com","163.com","sina.com","sohu.com","126.com"],foreign:["gmail.com","hotmail.com","hotmail.co.uk","yahoo.com","yahoo.co.uk","aol.com","mail.ru","rediffmail.com","live.com","msn.com"],domestic:["gmail.com","hotmail.com","163.com","126.com","qq.com","yahoo.com","sina.com","live.cn"],login0:["gmail.com","hotmail.com","163.com","126.com","qq.com","yahoo.com","sina.com","live.cn"],login1:["gmail.com","hotmail.com","hotmail.co.uk","yahoo.com","yahoo.co.uk","aol.com","mail.ru","rediffmail.com","live.com","msn.com"],supplier1:["gmail.com","hotmail.com","163.com","126.com","qq.com","yahoo.com","sina.com","live.cn"]},disHisTip:true,hideMailBody:false};this.opts=$.extend(o,e);this._={};this._.listContainer=null;this._.selected=null;this._.oldVal=null;this._.order=0;this._.val=null;this.onSelected=null;this.initialize()}autoComplete.prototype={constructor:this,initialize:function e(){var o=this.opts;try{if(!o.tipCls)throw"Please set correct tipCls";if(!o.type||!o.datas[o.type])throw"Create mail list errror";if(o.disHisTip)this._hideAutoTip(o.input);var t=document.createElement("ul");t.className=o.tipCls;t.style.cssText="display:none";t.innerHTML=this._createMailList(o.datas[o.type]);this._.listContainer=t;$(t).insertAfter($(o.input));this._initEvent()}catch(e){return}},_initEvent:function e(){var t=this;$(this.opts.input).bind("keyup",a);$(this.opts.input).bind("focus",a);$(this._.listContainer).bind("mouseover",o);$(this._.listContainer).bind("mouseout",i);$(this._.listContainer).bind("mousedown",function(e){if(e.target.nodeName.toLowerCase()==="li"){if(t.opts.hideMailBody){r.call(t.opts.input,t.opts.input.value.split("@")[0]+t._.selected[0].innerHTML)}else{r.call(t.opts.input,t._.selected[0].innerHTML)}}});function o(e){if(e.target.nodeName.toLowerCase()==="li"){$(e.target).addClass("hover");t._.selected=$(e.target)}}function i(e){t._.selected&&t._.selected.removeClass("hover")}function n(e){e.stopPropagation();if(e.target!==t.opts.input){t._.listContainer.style.display="none";$(document).unbind("click",n)}}function a(e){var o=t._.val=this.value;t._.listContainer.style.display="none";if(o.indexOf("@")!==-1&&o.indexOf("@")!==0&&e.keyCode!==13&&e.keyCode!==27&&$.trim(o)!==""){if(t._.oldval!=o){l()}if(t._.listContainer.getElementsByTagName("li").length){t._.listContainer.style.display=""}t._.oldval=o;$(document).bind("click",n);$(document).unbind("keydown",s).bind("keydown",s)}}function l(){var e=new RegExp("(.*?)@(.*)$","gi");var o;e.test(t._.val);o=t._selectApproximate(RegExp.$2);t._.listContainer.innerHTML=t._createMailList(o,RegExp.$1);t._.selected=null}function r(e){if(e){this.value=e}t._.listContainer.style.display="none";$(document).unbind("keydown",s);$(document).unbind("click",n);t.onSelected&&t.onSelected()}function s(e){if(e.keyCode===13&&t._.selected&&t._.selected[0]){if(t.opts.hideMailBody){r.call(t.opts.input,t.opts.input.value.split("@")[0]+t._.selected[0].innerHTML)}else{r.call(t.opts.input,t._.selected[0].innerHTML)}e.preventDefault()}if(!t._.selected)t._.order=-1;else t._.selected.removeClass("hover");if(e.keyCode===38){if(t._.order===0)t._.order=$(t._.listContainer).find("li").length-1;else t._.order--;e.preventDefault()}if(e.keyCode===40){if(t._.order===$(t._.listContainer).find("li").length-1)t._.order=0;else t._.order++;e.preventDefault()}t._.selected=$(t._.listContainer).find("li:eq("+t._.order+")");t._.selected.addClass("hover");if(t._.selected[0]){var o=t._.selected.innerHeight()*t._.order;$(t._.selected.context).scrollTop(o)}if(e.keyCode===27){r()}}},changeType:function e(o){if(!this.opts.datas[o])return;this.opts.type=o;this._.oldval=""},_hideAutoTip:function e(o){o.setAttribute("AutoComplete","off");if(o.getAttribute("style")){o.style.cssText=o.style.cssText+" ime-mode:disabled"}else{o.style.cssText="ime-mode:disabled"}},_createMailList:function e(o,t){var i,n,a;i="";for(a=0;n=o[a];a++){if(this.opts.hideMailBody){i+="<li>@"+n+"</li>"}else{i+="<li>"+t+"@"+n+"</li>"}}return i},_selectApproximate:function e(o){if($.trim(o)==="")return this.opts.datas[this.opts.type];var t=[],i,n;for(n=0;i=this.opts.datas[this.opts.type][n];n++){if(i.indexOf(o)!=-1&&i.indexOf(o)===0&&o!==i){t.push(i)}}return t}};jQuery(function(){var n,a,e,l;var o=document.getElementById("login")&&document.getElementById("login").value;var t=document.getElementById("loginBuyer")&&document.getElementById("loginBuyer").value;if(o&&o!="false"){n=true}if(t&&t!="false"){a=true}Toast.init();var r;a&&c();$(document).on("click",".follow-btn",function(e){r=$(this).data("logusername");l="//".concat(r,".en.made-in-china.com");$(this).hasClass("following")?y():m()});function i(e){if(typeof i18n=="undefined"){return e}else{return i18n._(e)||e}}var s={following:i("Following"),follow:i("Follow"),followsuccess:i("Followed Successfully!"),unfollowsuccess:i("Unfollow Successfully!"),notglobalbuyer:i("Only for global buyer."),overmoresuppliers:i("1000 suppliers at the most."),toofrequent:i("Your operation is too frequent, please try again after 24 hours."),emptyname:i("Please enter your full name."),englishname:i("Please use English characters."),palceholderemail:i("Enter your email address"),emptyemail:i("Please enter your email address."),validemail:i("Please enter a valid email address."),negotiated:i("To Be Negotiated"),followmsg:i("Updates notifications will be sent to this email, make sure your email is correct."),name:i("Name"),email:i("Email"),already1:i("An account already exists with this email,"),signin:i("Sign in"),already2:i("now or select another email address."),confirm:i("Confirm"),cancel:i("Cancel"),ms:i("Ms."),mr:i("Mr."),miss:i("Miss"),mrs:i("Mrs."),syserror:i("System error, please try again.")};function c(){var e;var o=[];$(".follow-btn").each(function(){o.push($(this).data("cid"))});$.ajax((e={type:"post",url:"//purchase.made-in-china.com/follow/suppliers/getFollowSupplierFromSearchList",async:true,crossDomain:true,traditional:true,xhrFields:{withCredentials:true},dataType:"json"},_defineProperty(e,"async",true),_defineProperty(e,"data",{followSupplierIds:o}),_defineProperty(e,"success",function e(o){var t=o.result?o.result:[];t.forEach(function(e){$(".follow-btn[data-cid=".concat(e,"]")).addClass("following").find("span").text(s.following)})}),_defineProperty(e,"error",function e(){}),e))}function m(){if(n){if(a){p()}else{Toast.show(s.notglobalbuyer,"warn")}}else{var e=$.cookie("follow_sex")||"1";var o=$.cookie("follow_name")||"";var t=$.cookie("follow_email")||"";var i=$("input[name='lan']").val()&&$("input[name='lan']").val()!=="en"?"\n            <option value='1' ".concat(e=="1"?"selected":"",">").concat(s.mr,"</option>\n            <option value='3' ").concat(e=="3"?"selected":"",">").concat(s.mrs,"</option>\n            "):"\n            <option value='0' ".concat(e=="0"?"selected":"",">").concat(s.ms,"</option>\n            <option value='1' ").concat(e=="1"?"selected":"",">").concat(s.mr,"</option>\n            <option value='2' ").concat(e=="2"?"selected":"",">").concat(s.miss,"</option>\n            <option value='3' ").concat(e=="3"?"selected":"",">").concat(s.mrs,"</option>\n            ");var l=future.Dialog.createDialog({width:490,opacity:.4,padding:"30px 30px 0",lock:true,id:"followDialog",content:"\n                    <div class='discover-dialog'>\n                        <div class=\"discover-title\">".concat(s.follow,"</div>\n                        <p>").concat(s.followmsg,"</p>\n                        <div class='discover-form'>\n                            <div class='discover-form-item'>\n                                <label><em>*</em>").concat(s.name,":</label>\n                                <div class='form-fields'>\n                                    <select name='visitorGender' class='discover-form-gender'>\n                                        ").concat(i,"\n                                    </select><input type='text' name='visitorName' class='discover-form-name' maxlength='50' value='").concat(o,"'>\n                                </div>\n                            </div>\n                            <div class='discover-form-error discover-error-name'></div>\n                            <div class='discover-form-item'>\n                                <label><em>*</em>").concat(s.email,":</label>\n                                <div class='form-fields'>\n                                <input type='text' name='userEmail' id=\"discover-form-email\"e class='discover-form-email' maxlength='50' placeholder='").concat(s.palceholderemail,"' value='").concat(t,"'>\n                                </div>\n                            </div>\n                            <div class='discover-form-item'>\n                                <label></label><div class=\"discover-captcha\" id=\"J-validator\"></div>\n                            </div>\n                            <div class='discover-form-error discover-error-email'></div>\n                        </div>\n                    </div>\n\t\t\t\t"),button:[{value:s.cancel},{value:s.confirm,callback:function e(){var o=$(".discover-form-name").val().trim();var t=$(".discover-form-email").val().trim();var i=d(o),n=_(t);i?$(".discover-error-name").empty():null;n?$(".discover-error-email").empty():null;if(i&&n){var a={visitorGender:$(".discover-form-gender").val(),visitorName:o,userEmail:t};if(!!$("input[name=faptcha_response_field]").length){a.faptcha_response_field=$("input[name=faptcha_response_field]").val();a.faptcha_public_key=$("input[name=faptcha_public_key]").val();a.faptcha_challenge_field=$("input[name=faptcha_challenge_field]").val()}$(".dlg-buttons").find(".btn-main").prop("disabled",true);p(a,function(e){if(e.code==200||e.code==11){l&&l.close()}else if(e.code==13){l&&l.close();f()}if(e.code==200||e.code==11||e.code==13){$.cookie("follow_sex",$(".discover-form-gender").val(),{path:"/",domain:".made-in-china.com"});$.cookie("follow_name",o,{path:"/",domain:".made-in-china.com"});$.cookie("follow_email",t,{path:"/",domain:".made-in-china.com"})}$(".dlg-buttons").find(".btn-main").prop("disabled",false)})}return false},autofocus:true}]});$(".discover-form-name").off();$(".discover-form-email").off();$(".discover-form-name").on("blur",function(e){var o=e.target.value;d(o.trim())?$(".discover-error-name").empty():null});$(".discover-form-email").on("blur",function(e){var o=e.target.value;_(o.trim())?$(".discover-error-email").empty():null});u.call(this,document)}}function d(e){var o=true;if(!e){$(".discover-error-name").html(s.emptyname);o=false}else if(!/^[a-z0-9\s]+$/i.test(e)){$(".discover-error-name").html(s.englishname);o=false}return o}function u(e){new autoComplete({input:e.getElementById("discover-form-email"),tipCls:"mail-guess",hoverCls:"hover",type:"login1",datas:{suppler:["163.com","sina.com","126.com","sohu.com","yahoo.com.cn","yahoo.cn","139.com","qq.com"],buyer:["gmail.com","hotmail.com","yahoo.com","msn.com","live.com","aol.com"],login:["gmail.com","hotmail.com","yahoo.com","msn.com","live.com","163.com","sina.com","sohu.com","126.com"],foreign:["gmail.com","hotmail.com","hotmail.co.uk","yahoo.com","yahoo.co.uk","aol.com","mail.ru","rediffmail.com","live.com","msn.com"],domestic:["gmail.com","hotmail.com","163.com","126.com","qq.com","yahoo.com","sina.com","live.cn"],login0:["gmail.com","hotmail.com","163.com","126.com","qq.com","yahoo.com","sina.com","live.cn"],login1:["gmail.com","yahoo.com","hotmail.com","outlook.com","icloud.com","me.com","mac.com","rediffmail.com","yahoo.co.in","yahoo.co.uk","hotmail.co.uk","live.com","ymail.com","aol.com","mail.ru","bk.ru","rambler.ru","yandex.ru","hotmail.fr","free.fr","neuf.fr","sfr.fr","orange.fr","wannado.fr","mindspring.com","excite.com","club-internet.fr"]}})}function f(){var o=future.Dialog.createDialog({lock:true,opacity:.4,title:"",id:"signDialog",content:"".concat(s.already1,' <a class="discover-signIn">').concat(s.signin,"</a> ").concat(s.already2),okVal:s.confirm,ok:function e(){o&&o.close()}});$(document).find(".discover-signIn").off("click").on("click",function(){o&&o.close();showPoploginArtdialog(window.location.href,"quoteUrl=1")})}window.urlForward=function(){n=true;p();window.location.reload()};function p(o,i){g(function(t){var e={_form_uniq_id:t};if(o){e=$.extend(true,e,o)}$.ajax({url:l+"/follow",data:e,dataType:"json",type:"post",crossDomain:true,xhrFields:{withCredentials:true},headers:{"X-Requested-With":"XMLHttpRequest"},success:function e(o){t=o.token;if(o.code==200||o.code==11){t="";Toast.show(s.followsuccess,"success");$(".follow-btn[data-logusername=".concat(r,"]")).addClass("following").find("span").text(s.following)}else if(o.code==6||o.code==14){Toast.show(s.notglobalbuyer,"warn")}else if(o.code==9){Toast.show(s.overmoresuppliers,"warn")}else if(o.code==10){Toast.show(s.toofrequent,"warn")}else if(o.code==12||o.data){if(!!$("#J-validator").length){h()}else{v()}}if(i&&$.isFunction(i)){i(o)}},error:function e(){Toast.show(s.syserror,"error")}})})}function h(){$.ajax({url:l+"/captcha?action=widget&k=6LfzAc0SAADE5CteqEn5zUBDtNHIGZ6NGtaHh0g9&inputattrs=maxLength%3D4%20placeholder%3D%22Enter%20the%20code%20shown%22%20Code%20autocorrect%3Doff%20autocapitalize%3Doff%20autocomplete%3Doff%20class%3Dtext",type:"get",dataType:"html",crossDomain:true,xhrFields:{withCredentials:true},cache:false,success:function e(o){$("#J-validator").html(o)},error:function e(){}})}function v(){var t=new artDialog({content:'<div class="discover-captcha" id="J-validator"></div>',skin:"discover-captcha-dlg",title:"Captcha",init:function e(){if(!!$("#J-validator").length){h()}},width:390,lock:true,resize:false,drag:false,button:[{name:s.confirm,highlight:true,callback:function e(){var o={faptcha_response_field:$("input[name=faptcha_response_field]").val(),faptcha_public_key:$("input[name=faptcha_public_key]").val(),faptcha_challenge_field:$("input[name=faptcha_challenge_field]").val()};p(o,function(e){t&&t.close()});return false}},{name:s.cancel,callback:function e(){t&&t.close()}}]})}function y(){g(function(e){$.ajax({url:l+"/unFollow",data:{_form_uniq_id:e},dataType:"json",type:"post",crossDomain:true,xhrFields:{withCredentials:true},headers:{"X-Requested-With":"XMLHttpRequest"},success:function e(o){if(o.code==200){Toast.show(s.unfollowsuccess,"success");$(".follow-btn[data-logusername=".concat(r,"]")).removeClass("following").find("span").text(s.follow)}},error:function e(){Toast.show(s.syserror,"error")}})})}function g(t){if(e){t(e)}else{$.ajax({url:l+"/getFollow",dataType:"json",type:"post",crossDomain:true,xhrFields:{withCredentials:true},headers:{"X-Requested-With":"XMLHttpRequest"},success:function e(o){if(o.code==200&&o.token){t(o.token)}else if(o.code==6){Toast.show(s.notglobalbuyer,"warn")}else{Toast.show(s.syserror,"error")}},error:function e(){Toast.show(s.syserror,"error")}})}}function _(e){var o=true;if(!e){$(".discover-error-email").html(s.emptyemail);o=false}else if(!w(e)){$(".discover-error-email").html(s.validemail);o=false}return o}function w(e){if(!/^[-\.\w]+@[-\.a-zA-Z0-9]+\.[-\.a-zA-Z0-9]+$/.test(e)){return false}var o=e.split("@")[0];var t=e.split("@")[1];if(!/^.*[A-Za-z0-9]+.*$/.test(o)){return false}if(/(^\..*)|(.*\.$)/.test(o)){return false}if(/(\.){2,}/.test(o)){return false}var i=t.lastIndexOf(".");var n=t.substr(0,i);var a=t.substr(i+1);if(/(^[\.-].*)|(.*[\.-]$)/.test(n)){return false}if(/(\.){2,}/.test(n)){return false}if(!/^[a-zA-Z]+$/.test(a)){return false}return true}});
//# sourceMappingURL=../../../../../__sources__/landing/www/qc/js/supplierSearch/addFollow_8e18e1c1.js.map
